(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{585:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(25),{data:function(){return{nb_panel:0,nb_publoc_ref:0,in_task:!1,panels:[]}},methods:{getStatsRefPanneau:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/settings/ref/stats");case 3:(n=t.sent).status?(e.nb_panel=n.nb_panel,e.nb_publoc_ref=n.nb_publoc_ref):e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},setRefToPubloc:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.in_task=!0,t.next=4,e.$axios.$put("api/a/settings/ref/to-publoc-ref");case 4:(n=t.sent).status?e.getStatsRefPanneau():e.showNotif("Erreur",n.message,!0),e.in_task=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getExamplePan:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/settings/ref/example-pan");case 3:(n=t.sent).status?e.panels=n.panels:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){this.getStatsRefPanneau(),this.getExamplePan()}}),c=n(7),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2"},[n("div",{staticClass:"mb-2 flex flex-col p-2 border rounded-lg"},[n("span",{},[e._v(" Nombre Total de panneau : "),n("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.nb_panel)+" ")])]),e._v(" "),n("span",{},[e._v(" Nombre de panneau avec une référence publoc : "),n("span",{staticClass:"font-bold"},[e._v(e._s(e.nb_publoc_ref))])])]),e._v(" "),e.nb_publoc_ref!=e.nb_panel?n("div",{staticClass:"p-2 border rounded-lg"},[e.in_task?n("div",{},[n("span",{staticClass:"text-sm"},[e._v(" Traitement ... ")])]):n("div",{},[n("span",{staticClass:"text-sm"},[e._v("Créer les références publoc")]),e._v(" "),n("button",{staticClass:"bt text-sm",on:{click:e.setRefToPubloc}},[e._v(" Créer ")])])]):e._e(),e._v(" "),n("div",{},[n("span",{staticClass:"text-sm"},[e._v("Exemples de panneau")]),e._v(" "),n("div",{staticClass:"text-xs"},e._l(e.panels,(function(p){return n("div",{key:p.pan_id,staticClass:"flex flex-col mb-2 border p-2 rounded-lg hover:bg-gray-100 bg-gray-50"},[n("span",{},[e._v(" Ref : "+e._s(p.pan_ref)+" ")]),e._v(" "),n("span",{},[e._v("Ref Publoc : "+e._s(p.pan_publoc_ref)+" ")]),e._v(" "),n("span",{},[e._v("Lieu : "+e._s(p.lieu_label)+" ")])])})),0)])])}),[],!1,null,null,null);t.default=component.exports}}]);
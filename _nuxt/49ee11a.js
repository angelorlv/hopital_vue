(window.webpackJsonp=window.webpackJsonp||[]).push([[127,65],{383:function(t,e,r){"use strict";r.r(e);var n=r(3),l=(r(25),r(62),{props:["by","val","label_by"],data:function(){return{list_pan:[]}},methods:{getPanelBy:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse('{"'.concat(t.by,'":"').concat(t.val,'"}')),e.next=4,t.$axios.$get("api/a/panel/by",{params:r});case 4:(n=e.sent).status?t.list_pan=n.panels:t.showNotif("Erreur",n.message,!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.showErrorConnexion(),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},mounted:function(){this.getPanelBy()}}),o=r(7),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"fixed bg-white bg-opacity-90 top-0 left-0 w-screen h-screen flex justify-center items-center z-50"},[r("div",{staticClass:"border rounded-lg bg-white shadow-lg ",staticStyle:{width:"600px"}},[r("div",{staticClass:"p-2 flex items-center"},[r("span",{},[t._v("Liste des panneaux : "),r("span",{staticClass:"font-bold"},[t._v(t._s(t.label_by))])]),t._v(" "),r("span",{staticClass:"flex-grow"}),t._v(" "),r("button",{staticClass:"bt-back",on:{click:function(e){return t.$emit("close")}}},[t._v("Retour")])]),t._v(" "),r("div",{staticClass:"border-t overflow-auto",staticStyle:{height:"300px","max-height":"300px"}},t._l(t.list_pan,(function(p){return r("div",{key:p.pan_id,staticClass:" cursor-pointer flex flex-col p-2 rounded-lg m-2 border hover:bg-gray-100",on:{click:function(e){return t.$router.push("/admin/panneau/"+p.pan_id)}}},[r("span",{staticClass:"font-bold"},[t._v(" "+t._s(p.pan_ref)+" ")]),t._v(" "),r("span",{staticClass:"text-sm"},[t._v(" "+t._s(p.lieu_label)+" ")])])})),0)])])}),[],!1,null,null,null);e.default=component.exports},396:function(t,e,r){"use strict";var n=r(3);r(25);e.a={data:function(){return{}},methods:{validateProfil:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$axios.$put("api/a/profil/validate/"+t,{pr_validate:1});case 3:(n=r.sent).status?(e.showNotif("Validation de profil",n.message),null!=e.ann?e.getAnn():e.getReg()):e.showNotif("Erreur de validation",n.message,!0),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),e.showNotif("Erreur","Erreur de connexion. Connexion pas établie avec le serveur.",!0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}}},599:function(t,e,r){"use strict";r.r(e);var n=r(3),l=(r(25),{mixins:[r(396).a],layout:"espace",data:function(){return{error_on_page:!1,reg:{},on_show_panel:!1}},methods:{getReg:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("api/a/regisseur/"+t.$route.params.id);case 2:(r=e.sent).status?t.reg=r.regisseur:t.error_on_page=!0;case 4:case"end":return e.stop()}}),e)})))()},changeSub:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$put("api/a/ad/reg/sub/"+t.$route.params.id,{soc_sub:t.reg.soc_sub?0:1});case 2:(r=e.sent).status?t.getReg():t.showNotif("Erreur",r.message,!0);case 4:case"end":return e.stop()}}),e)})))()},btValidateProfil:function(){this.validateProfil(this.reg.reg_pr_id)}},created:function(){this.getReg()}}),o=r(7),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col justify-center items-center"},[t.error_on_page?r("div",{staticClass:"flex justify-center items-center"},[r("div",{staticClass:"h-48"}),t._v(" "),t._m(0)]):r("div",{staticClass:"flex flex-col justify-center ",style:{width:"600px"}},[r("div",{staticClass:"w-full rounded border mt-5"},[r("div",{staticClass:"flex border-b p-2"},[r("button",{staticClass:"bt-pren-next",on:{click:function(e){return t.$router.go(-1)}}},[r("span",{staticClass:"material-icons"},[t._v(" navigate_before ")])]),t._v(" "),r("span",{staticClass:"flex-grow"}),t._v(" "),r("button",{staticClass:"bt text-sm"},[t._v("Contacter")])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Nom de la société ")]),t._v(" "),r("span",{staticClass:"text-xl"},[t._v(" "+t._s(t.reg.reg_label)+" ")])]),t._v(" "),r("div",{staticClass:"flex flex-col p-2 border-b"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Nombre de panneau ")]),t._v(" "),r("div",{staticClass:"flex"},[r("span",{staticClass:"text-xl mr-5"},[t._v(" "+t._s(t.reg.nb_panel)+" ")]),t._v(" "),r("span",{staticClass:"flex-grow"}),t._v(" "),t.reg.nb_panel>0?r("button",{staticClass:"bt text-xs",on:{click:function(){t.on_show_panel=!0,t.p_view.by="reg_id",t.p_view.val=t.reg.reg_id,t.p_view.label_by=t.reg.reg_label}}},[t._v("Voir")]):t._e()])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Login ")]),t._v(" "),r("span",{staticClass:"text-xl"},[t._v(" "+t._s(null==t.reg.pr_login?"-":t.reg.pr_login)+" ")])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2 "},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Validation profil ")]),t._v(" "),r("span",{staticClass:"text-xl"},[t._v(" "+t._s(0==t.reg.pr_validate?"Profil pas encore validé":"Profil validé")+" ")])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Adresse ")]),t._v(" "),r("span",{staticClass:"text-xl"},[t._v(" "+t._s(null==t.reg.soc_pr_adresse?"-":t.reg.soc_pr_adresse)+" ")])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Email ")]),t._v(" "),r("span",{staticClass:"text-xl"},[t._v(" "+t._s(null==t.reg.soc_pr_email?"-":t.reg.soc_pr_email)+" ")])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Abonnement ")]),t._v(" "),r("div",{staticClass:"flex"},[t.reg.soc_sub?r("span",{staticClass:"text-xl text-blue-500"},[t._v(" Ce régisseur est abonné à Publoc ")]):r("span",{staticClass:"text-red-500"},[t._v(" Ce régisseur n'est pas abonné à Publoc ")]),t._v(" "),r("span",{staticClass:"flex-grow"}),t._v(" "),r("button",{staticClass:"bt text-sm ",on:{click:t.changeSub}},[t._v(" "+t._s(t.reg.soc_sub?"Désabonner":"Mettre comme abonné")+" ")])])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Nif ")]),t._v(" "),r("span",{staticClass:"text-xl"},[t._v(" "+t._s(null==t.reg.soc_pr_nif?"-":t.reg.soc_pr_nif)+" ")])]),t._v(" "),r("div",{staticClass:"flex flex-col border-b p-2"},[r("span",{staticClass:"text-xs font-bold"},[t._v(" Stat ")]),t._v(" "),r("span",{staticClass:"text-xl"},[t._v(" "+t._s(null==t.reg.soc_pr_stat?"-":t.reg.soc_pr_stat)+" ")])])]),t._v(" "),r("div",{staticClass:"flex sticky bottom-2 mt-5 border-b p-2"},[r("button",{staticClass:"bt text-sm",on:{click:function(e){return t.$router.push("/admin/regisseur")}}},[t._v("Listes")]),t._v(" "),r("span",{staticClass:"flex-grow"}),t._v(" "),0==t.reg.pr_validate?r("button",{staticClass:"bt text-sm mx-2",on:{click:function(e){return t.btValidateProfil()}}},[t._v(" Valider le profil ")]):t._e(),t._v(" "),r("button",{staticClass:"bt text-sm",on:{click:function(e){return t.$router.push({name:"admin-regisseur-edit-id",params:{id:t.$route.params.id}})}}},[t._v("Modifier")])]),t._v(" "),t.on_show_panel?r("view-panel-by",{attrs:{by:t.p_view.by,val:t.p_view.val,label_by:t.p_view.label_by},on:{close:function(e){t.on_show_panel=!1}}}):t._e()],1)])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("span",{staticClass:"text-xl"},[t._v("Erreur pendant l'affichage de la page")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{ViewPanelBy:r(383).default})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[95,7,23],{358:function(t,e,n){"use strict";n.r(e);var c={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},r=n(7),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},425:function(t,e,n){"use strict";n.r(e);var c=n(3),r=(n(25),{props:["modif","cu_modif"],data:function(){return{w:500,overlay_style:{},cu:{cu_label:"",cu_login:"",cu_pass:"",cu_desc:"",cu_ville:"",cu_label_2:""}}},methods:{init:function(){this.overlay_style={width:this.w+"px"}},add_cu:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("api/a/cu",t.cu);case 3:(n=e.sent).status?(t.showNotif("Ajout Commune","Ajout de la commune réussi"),t.$emit("validate")):t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},up_cu:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$put("api/a/cu",t.cu);case 3:(n=e.sent).status?(t.showNotif("Modification Commune","Modification de la commune réussi"),t.$emit("validate")):t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.init(),this.modif&&(this.cu=this.cu_modif,this.cu.cu_login=this.cu.pr_login,this.cu.cu_pass="")}}),l=n(7),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex justify-center items-center top-0 left-0 w-screen h-screen fixed bg-white bg-opacity-75"},[n("div",{staticClass:"border rounded-lg bg-white shadow-lg",style:t.overlay_style},[n("div",{staticClass:"text-sm px-2 py-1 border-b flex items-center"},[n("span",{},[t._v(" "+t._s(t.modif?"Modification de la comune urbaine":"Ajout d'une Commune Urbaine ")+" ")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(e){return t.$emit("close")}}},[n("span",{staticClass:"material-icons"},[t._v("clear")])])]),t._v(" "),n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"flex items-end"},[n("custom-input",{staticClass:"m-2",attrs:{label:"Nom de la commune ..."},model:{value:t.cu.cu_label,callback:function(e){t.$set(t.cu,"cu_label",e)},expression:"cu.cu_label"}}),t._v(" "),n("custom-input",{staticClass:"m-2",attrs:{label:"Libellé ..."},model:{value:t.cu.cu_label_2,callback:function(e){t.$set(t.cu,"cu_label_2",e)},expression:"cu.cu_label_2"}})],1),t._v(" "),n("div",{staticClass:"flex"},[n("custom-input",{staticClass:"m-2",attrs:{label:"Ville de la commune ..."},model:{value:t.cu.cu_ville,callback:function(e){t.$set(t.cu,"cu_ville",e)},expression:"cu.cu_ville"}})],1),t._v(" "),n("div",{staticClass:"flex items-end"},[n("custom-input",{staticClass:"m-2",attrs:{label:"Login pour l'admin ..."},model:{value:t.cu.cu_login,callback:function(e){t.$set(t.cu,"cu_login",e)},expression:"cu.cu_login"}}),t._v(" "),n("custom-input",{staticClass:"m-2",attrs:{type:"password",label:"Mot de passe ..."},model:{value:t.cu.cu_pass,callback:function(e){t.$set(t.cu,"cu_pass",e)},expression:"cu.cu_pass"}})],1)]),t._v(" "),n("div",{staticClass:"flex border-t p-2 "},[n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"text-sm bt",on:{click:function(){t.modif?t.up_cu():t.add_cu()}}},[t._v(" "+t._s(t.modif?"Modifier":"Valider")+" ")])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CustomInput:n(358).default})},551:function(t,e,n){"use strict";n.r(e);var c=n(3),r=(n(25),{data:function(){return{cu_list:[],on_add:!1,modif:!1,cu_modif:{},cu_id_cur:null,cu_index:null,villes:[],nb_pan_tana:0}},methods:{get_cu_list:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/cu/ad/all");case 3:(n=e.sent).status?t.cu_list=n.cu:t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},deleteCu:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Voulez vous vraiment supprimer cette commune ? Les panneaux concernés seront modifiés.")){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,e.$axios.$delete("api/a/cu/"+t);case 5:(c=n.sent).status?e.get_cu_list():e.showNotif("Erreur",c.message,!0),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),e.showErrorConnexion();case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},setPanInCu:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$put("api/a/cu/panel/make",t);case 3:(c=n.sent).status?(e.get_cu_list(),e.showNotif("Succès",c.message)):e.showNotif("Erreur",c.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},mounted:function(){this.get_cu_list()}}),l=n(7),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2"},[t._m(0),t._v(" "),n("div",{staticClass:" border rounded-lg"},[n("div",{staticClass:"border-b p-2 bg-gray-50 flex items-center"},[n("span",{staticClass:"text-sm"},[t._v("Liste des Communes Administratives")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt text-xs flex justify-center items-center",on:{click:function(e){t.on_add=!0}}},[n("span",{staticClass:"material-icons"},[t._v("add")]),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Ajouter")])])]),t._v(" "),t.cu_list.length>0?n("div",{staticClass:"text-xs"},t._l(t.cu_list,(function(e){return n("div",{key:e.cu_id,staticClass:"flex flex-col border-b py-1 hover:bg-gray-50 px-2",class:{"border border-indigo-600":t.cu_id_cur==e.cu_id}},[n("div",{staticClass:"flex items-center w-full ",class:{"border-b":t.cu_id_cur==e.cu_id}},[n("div",{staticClass:"flex items-center"},[n("span",{staticClass:"p-1 font-bold"},[t._v(" "+t._s(e.cu_label)+" ")]),t._v(" "),n("span",{staticClass:"ml-2"},[t._v(" "+t._s(e.cu_label_2)+" ")])]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt-prev-next text-xs",on:{click:function(){t.cu_id_cur=t.cu_id_cur==e.cu_id?null:e.cu_id,t.cu_modif=e}}},[n("span",{staticClass:"material-icons"},[t._v(" "+t._s(e.cu_id==t.cu_id_cur?"expand_less":"expand_more")+" ")])])]),t._v(" "),t.cu_id_cur==e.cu_id?n("div",{staticClass:"flex flex-col p-1"},[n("div",{staticClass:"flex flex-col"},[n("span",{},[t._v(" Login : "+t._s(e.pr_login)+" ")]),t._v(" "),n("span",{},[t._v(" Nombre de panneau :  "+t._s(e.nb_panel)+" ")]),t._v(" "),n("span",{},[t._v(" Ville :  "+t._s(e.cu_ville?e.cu_ville:"-")+" ")]),t._v(" "),n("span",{},[t._v(" "+t._s(e.nb_pan_ville?"Ils existent "+e.nb_pan_ville+" panneux pas encore dans la CUA ":"Tous les panneaux sont dans CUA ("+e.cu_ville+")")+" ")])]),t._v(" "),n("div",{staticClass:"flex mt-2"},[e.nb_panel<=0?n("button",{staticClass:"bt-back text-sm mr-2",on:{click:function(n){return t.deleteCu(e.cu_id)}}},[t._v("Supprimer")]):t._e(),t._v(" "),n("button",{staticClass:"bt text-sm mr-2",on:{click:function(){t.modif=!0,t.on_add=!0}}},[t._v("Modifier")]),t._v(" "),e.cu_ville&&e.nb_pan_ville?n("button",{staticClass:"bt text-sm",on:{click:function(n){return t.setPanInCu(e)}}},[t._v(" Inclure tous les panneaux dans sa ville  ")]):n("span",{staticClass:"text-sm"},[t._v(" Renseigner une ville pour mettre tous les panneux directement dans la ville ")])])]):t._e()])})),0):n("div",{staticClass:"text-xs p-2 flex justify-center items-center text-gray-500"},[n("span",{},[t._v(" Aucune Commune Administrative ajoutée ")])])]),t._v(" "),t._m(1),t._v(" "),t.on_add?n("add-cu",{attrs:{cu_modif:t.cu_modif,modif:t.modif},on:{close:function(e){t.on_add=!1},validate:function(){t.on_add=!1,t.modif=!1,t.get_cu_list()}}}):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2"},[n("span",{staticClass:"text-lg underline"},[t._v("Gestion des communes urbaines et Administratives")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border rounded-lg mt-5"},[n("div",{staticClass:"border-b p-2 bg-gray-50 flex items-center"},[n("span",{staticClass:"text-sm"},[t._v("Modification Commune Administrative massive")]),t._v(" "),n("span",{staticClass:"flex-grow"})]),t._v(" "),n("div",{})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{AddCu:n(425).default})}}]);
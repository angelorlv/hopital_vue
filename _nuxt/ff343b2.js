(window.webpackJsonp=window.webpackJsonp||[]).push([[134,17,23],{358:function(t,e,l){"use strict";l.r(e);var n={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},r=l(7),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{style:t.input.style},[l("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[l("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),l("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},359:function(t,e,l){var content=l(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(27).default)("2d1dc0a2",content,!0,{sourceMap:!1})},360:function(t,e,l){"use strict";l(359)},361:function(t,e,l){var n=l(26)((function(i){return i[1]}));n.push([t.i,"/*purgecss start ignore*/\n.fade-enter-active,.fade-leave-active{\n  transition:opacity .3s\n}\n.fade-enter,.fade-leave-to{\n  opacity:0\n}\n\n/*purgecss end ignore*/",""]),n.locals={},t.exports=n},362:function(t,e,l){"use strict";l.r(e);var n={props:["value","datas","label","code","placeholder","padding","width"],watch:{datas:function(a){this.$emit("input",void 0===a[0]?null:a[0][this.code])}},data:function(){return{}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)}},mounted:function(){}},r=(l(360),l(7)),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"relative flex flex-col"},[t.placeholder?l("div",{staticClass:"text-xs duration-300 flex items-center font-bold",class:t.datas.length>0?" h-4":"h-0"},[t.datas.length>0?l("label",{staticClass:"z-10 px-1 text-indigo-600"},[t._v(" "+t._s(t.placeholder)+" ")]):t._e()]):t._e(),t._v(" "),l("div",[l("select",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",on:{change:function(e){return t.updateInput()}}},t._l(t.datas,(function(e){return l("option",{key:e[t.code],domProps:{value:e[t.code],selected:t.value==e[void 0===t.code?"code":t.code]}},[t._v(" "+t._s(e[void 0===t.label?"label":t.label])+" ")])})),0)])])}),[],!1,null,null,null);e.default=component.exports},579:function(t,e,l){"use strict";l.r(e);var n=l(3),r=(l(13),l(37),l(25),{watch:{},data:function(){return{slides_list:[],cur_content:"none",slides:{ms_label:null,ms_big_title:null,ms_sub_title:null,ms_rang:1,ms_image_id:null,ms_text_color:0},text_color_list:[{label:"Noir",code:0},{label:"Blanc",code:1}],img_src:null}},methods:{init:function(){this.img_src=null,this.slides={ms_label:null,ms_big_title:null,ms_sub_title:null,ms_rang:1,ms_image_id:null,ms_text_color:0}},getSlides:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/settings/slides");case 3:(s=e.sent).status?(t.slides_list=s.slides,t.init(),t.cur_content="none"):t.showNotif("Erreur",s.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},add_slide:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("api/a/settings/slides",t.slides);case 3:(l=e.sent).status?t.getSlides():t.showNotif("Erreur",l.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},deleteSlide:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,e.$axios.$delete("api/a/settings/slides/"+t);case 3:(n=l.sent).status?e.getSlides():e.showNotif("Erreur",n.message,!0),l.next=10;break;case 7:l.prev=7,l.t0=l.catch(0),e.showErrorConnexion();case 10:case"end":return l.stop()}}),l,null,[[0,7]])})))()},upload_image:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function l(){var image,n,data,r;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(console.log("Upload"),0!=t.target.files.length){l.next=3;break}return l.abrupt("return");case 3:return image=t.target.files[0],(n=new FileReader).readAsDataURL(image),e.on_load_image=!0,l.next=9,new Promise((function(t,e){n.onload=function(e){t(e.target.result)}}));case 9:return l.sent,(data=new FormData).append("name",e.makeid(8)),data.append("file",image),l.next=15,e.$axios.$post("api/a/uploads",data).then((function(t){return e.on_load_image=!1,t}));case 15:(r=l.sent).status?(e.slides.ms_image_id=r.file_id,e.img_src="/api/p/media/"+r.opt.name):e.showNotif("Erreur de connexion",r.message);case 17:case"end":return l.stop()}}),l)})))()},delete_image:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.slides.ms_image_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$axios.$delete("api/a/uploads/"+t.slides.ms_image_id);case 5:(l=e.sent).status?(t.img_src=null,t.slides.ms_image_id=null):t.showNotif("Erreur",l.message,!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.showErrorConnexion();case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()}},mounted:function(){this.getSlides()}}),o=l(7),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"p-2"},[l("span",{staticClass:"text-xl"},[t._v("Paramètres de l'acceuil")]),t._v(" "),t._m(0),t._v(" "),l("div",{staticClass:"flex py-2 flex-col mt-5 border-t"},[l("span",{staticClass:"text-sm"},[t._v("Liste des slides")]),t._v(" "),l("div",{staticClass:"flex flex-wrap"},[t._l(t.slides_list,(function(s){return l("div",{key:s.ms_id,staticClass:"hover:border-indigo-600  cursor-pointer flex relative overflow-hidden border-2 h-24 w-40 rounded-lg mb-2 mr-2",staticStyle:{"max-height":"96px"}},[s.ms_image_id?l("img",{staticClass:"rounded-lg object-cover w-full",attrs:{src:"/api/p/media/"+s.name_min_file,alt:"",srcset:""}}):t._e(),t._v(" "),l("div",{staticClass:"px-1 pb-2 flex flex-col absolute bottom-0 left-0",class:null!=s.ms_image_id&&s.ms_text_color?"text-gray-100":"text-gray-800"},[l("span",{staticClass:"text-sm font-bold"},[t._v(" "+t._s(s.ms_big_title)+" ")]),t._v(" "),l("span",{staticClass:"text-xs"},[t._v(" "+t._s(s.ms_sub_title)+" ")])]),t._v(" "),l("button",{staticClass:"bt-clear absolute top-1 right-1",on:{click:function(e){return t.deleteSlide(s.ms_id)}}},[l("span",{staticClass:"material-icons"},[t._v("clear")])]),t._v(" "),l("div",{staticClass:"absolute w-6 h-6 bg-gray-100 text-gray-700 rounded-full top-1 left-1 flex justify-center items-center"},[l("span",{},[t._v(" "+t._s(s.ms_rang))])])])})),t._v(" "),l("div",{staticClass:"border-dashed border-2 cursor-pointer flex justify-center items-center hover:bg-gray-100 rounded-lg h-24 w-40",on:{click:function(e){t.cur_content="add"}}},[l("span",{staticClass:"material-icons text-4xl text-gray-300"},[t._v(" add ")])])],2)]),t._v(" "),"show"==t.cur_content?l("div",{}):t._e(),t._v(" "),"add"==t.cur_content?l("div",{staticClass:"mt-5 py-2 border-t"},[l("div",{staticClass:"flex "},[l("span",{staticClass:"text-sm"},[t._v("Ajout d'un slide")]),t._v(" "),l("span",{staticClass:"flex-grow"}),t._v(" "),l("button",{staticClass:"bt text-sm mr-2",on:{click:t.add_slide}},[t._v("Valider le slide")]),t._v(" "),l("button",{staticClass:"bt-back text-sm",on:{click:function(){t.cur_content="none",t.delete_image()}}},[t._v("Fermer")])]),t._v(" "),l("div",{staticClass:"flex flex-col py-2"},[l("div",{staticClass:"flex items-end"},[l("custom-input",{staticClass:"mr-2",attrs:{label:"Libellé ..."},model:{value:t.slides.ms_label,callback:function(e){t.$set(t.slides,"ms_label",e)},expression:"slides.ms_label"}}),t._v(" "),l("custom-input",{staticClass:"mr-2",attrs:{label:"Gros titre ..."},model:{value:t.slides.ms_big_title,callback:function(e){t.$set(t.slides,"ms_big_title",e)},expression:"slides.ms_big_title"}}),t._v(" "),l("custom-input",{staticClass:"mr-2",attrs:{type:"number",label:"Rang ..."},model:{value:t.slides.ms_rang,callback:function(e){t.$set(t.slides,"ms_rang",e)},expression:"slides.ms_rang"}}),t._v(" "),l("c-select",{attrs:{datas:t.text_color_list,label:"label",code:"code",placeholder:"Couleur du texte ... "},model:{value:t.slides.ms_text_color,callback:function(e){t.$set(t.slides,"ms_text_color",e)},expression:"slides.ms_text_color"}})],1),t._v(" "),l("div",{staticClass:"w-full mt-2"},[l("textarea",{directives:[{name:"model",rawName:"v-model",value:t.slides.ms_sub_title,expression:"slides.ms_sub_title"}],staticClass:"input-alt w-full h-24",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"Sous Titre"},domProps:{value:t.slides.ms_sub_title},on:{input:function(e){e.target.composing||t.$set(t.slides,"ms_sub_title",e.target.value)}}})]),t._v(" "),l("div",{staticClass:"mt-2"},[t._m(1),t._v(" "),l("div",{staticClass:"relative flex overflow-hidden w-full rounded-lg border bg-gray-50",style:{height:"500px"}},[l("div",{staticClass:"flex absolute top-2 w-full p-2"},[null!=t.slides.ms_image_id?l("button",{staticClass:"bt-back text-sm mr-2",on:{click:t.delete_image}},[t._v("Supprimer")]):t._e(),t._v(" "),l("label",{staticClass:"text-sm bt top-2 right-2",attrs:{for:"photo_profil"}},[t._v("Ajouter image")]),t._v(" "),l("input",{staticClass:"hidden",attrs:{accept:"image/*",id:"photo_profil",type:"file"},on:{change:function(e){return t.upload_image(e)}}})]),t._v(" "),t.img_src?l("img",{staticClass:"rounded-lg object-cover w-full",attrs:{src:t.img_src,alt:"",srcset:""}}):t._e(),t._v(" "),l("div",{staticClass:"absolute flex flex-col bottom-0 left-0 p-2",class:1==t.slides.ms_text_color?"text-gray-100":"text-gray-800"},[l("span",{staticClass:"text-4xl font-bold"},[t._v(" "+t._s(t.slides.ms_big_title)+" ")]),t._v(" "),l("span",{staticClass:" text-xl whitespace-pre-wrap"},[t._v(t._s(t.slides.ms_sub_title))])])])])])]):t._e()])}),[function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"text-sm"},[l("p",[t._v("Ajouter et arranger l'apparition des slides dans l'Accueil")])])},function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{},[l("span",{staticClass:"text-sm"},[t._v("Visualisation ...")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{CustomInput:l(358).default,CSelect:l(362).default})}}]);
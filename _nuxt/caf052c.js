(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{583:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(25),{data:function(){return{stats:{},in_task:!1,in_suppress:!1}},methods:{getMediaStats:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/settings/media/stats");case 3:(n=t.sent).status?e.stats=n.stats:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},setImDimInfo:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.in_task=!0,t.next=4,e.$axios.$put("api/a/settings/media/set-info-dim");case 4:(n=t.sent).status?e.getMediaStats():e.showNotif("Erreur",n.message,!0),e.in_task=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},delAllRefImage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.in_suppress){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.in_suppress=!0,t.next=6,e.$axios.$delete("api/a/settings/media/all/refs");case 6:(n=t.sent).status?(e.in_suppress=!1,e.showNotif("Images","Suppression Terminée")):e.showNotif("Erreur",n.message,!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.showErrorConnexion();case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()}},mounted:function(){this.getMediaStats()}}),c=n(7),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2"},[n("div",{staticClass:"flex p-2 border rounded-lg flex-col mb-2"},[n("span",{},[e._v("Nombre d'image sans Information de dimension  : "+e._s(e.stats.nb_im_no_dim)+" ")]),e._v(" "),n("span",{},[e._v("Nombre Total d'images :  "+e._s(e.stats.nb_im)+" ")])]),e._v(" "),0!=e.stats.nb_im_no_dim?n("div",{staticClass:" p-2 rounded-lg border "},[e.in_task?n("div",{},[n("span",{staticClass:"text-sm"},[e._v("Traitement ...")])]):n("div",{},[n("span",{},[e._v("Ajouter les informations de dimension pour toutes les images ")]),e._v(" "),n("button",{staticClass:"bt text-sm",on:{click:e.setImDimInfo}},[e._v(" Ajouter ")])])]):e._e(),e._v(" "),n("div",{staticClass:"rounded-lg border p-2"},[n("div",{staticClass:"flex flex-col p-2"},[n("span",[e._v(" Supprimer toutes les références d'images de la base de donnée")]),e._v(" "),n("button",{staticClass:"bt-cancel text-sm",on:{click:e.delAllRefImage}},[e._v(" "+e._s(e.in_suppress?"En cours de suppression ....":"Supprimer")+" ")])])])])}),[],!1,null,null,null);t.default=component.exports}}]);
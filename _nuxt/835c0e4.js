(window.webpackJsonp=window.webpackJsonp||[]).push([[116,17,23],{358:function(e,t,n){"use strict";n.r(t);var r={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},o=n(7),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},359:function(e,t,n){var content=n(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(27).default)("2d1dc0a2",content,!0,{sourceMap:!1})},360:function(e,t,n){"use strict";n(359)},361:function(e,t,n){var r=n(26)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n.fade-enter-active,.fade-leave-active{\n  transition:opacity .3s\n}\n.fade-enter,.fade-leave-to{\n  opacity:0\n}\n\n/*purgecss end ignore*/",""]),r.locals={},e.exports=r},362:function(e,t,n){"use strict";n.r(t);var r={props:["value","datas","label","code","placeholder","padding","width"],watch:{datas:function(a){this.$emit("input",void 0===a[0]?null:a[0][this.code])}},data:function(){return{}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)}},mounted:function(){}},o=(n(360),n(7)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative flex flex-col"},[e.placeholder?n("div",{staticClass:"text-xs duration-300 flex items-center font-bold",class:e.datas.length>0?" h-4":"h-0"},[e.datas.length>0?n("label",{staticClass:"z-10 px-1 text-indigo-600"},[e._v(" "+e._s(e.placeholder)+" ")]):e._e()]):e._e(),e._v(" "),n("div",[n("select",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",on:{change:function(t){return e.updateInput()}}},e._l(e.datas,(function(t){return n("option",{key:t[e.code],domProps:{value:t[e.code],selected:e.value==t[void 0===e.code?"code":e.code]}},[e._v(" "+e._s(t[void 0===e.label?"label":e.label])+" ")])})),0)])])}),[],!1,null,null,null);t.default=component.exports},568:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(25),n(158),n(62),{watch:{ref_reg_pan:function(a){""==a.trim()?this.panels_results=[]:this.searchPanByRef()},reg_id:function(a){this.panels_results=[],this.searchPanByRef()}},data:function(){return{ref_reg_pan:"",panels:[],panels_results:[],in_search:!1,index_parcours:-1,list_id_pan:[],reg_list:[],reg_id:null,in_request:!1}},methods:{searchPanByRef:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.ref_reg_pan.trim()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$axios.$get("api/a/panel/search/"+e.ref_reg_pan+"/ref",{params:{reg:e.reg_id}});case 5:(n=t.sent).status?e.panels_results=n.panels:e.showNotif("Erreur",n.message,!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},getReg:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/regisseur");case 3:(n=t.sent).status?e.reg_list=n.regisseurs:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},putDispoPan:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.in_request){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.in_request=!0,t.next=6,e.$axios.$put("api/a/panel/dispo",{ids:e.list_id_pan,reg_id:e.reg_id});case 6:(n=t.sent).status?(e.$router.push("/admin/panneau"),e.showNotif("Modification de panneau","Modification réussie, ".concat(n.dispo_modif.affectedRows," panneau en dispo et ").concat(n.indispo_modif.affectedRows," panneau en indispo.")),e.in_request=!1):e.showNotif("Erreur",n.message,!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.showErrorConnexion();case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()}},mounted:function(){this.getReg()}}),l=n(7),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:" min-h-screen"},[n("div",{staticClass:"p-2 flex flex-col"},[n("span",{},[e._v(" Modification multiple des panneaux ")]),e._v(" "),n("div",{staticClass:"p-2 mt-2 border-t"},[n("c-select",{attrs:{datas:e.reg_list,code:"reg_id",label:"reg_label",placeholder:"Choisissez un régisseur"},model:{value:e.reg_id,callback:function(t){e.reg_id=t},expression:"reg_id"}})],1)]),e._v(" "),n("div",{staticClass:"border-t py-2"},e._l(e.panels,(function(p,i){return n("div",{key:p.pan_id,staticClass:"flex border-b p-2 items-center"},[n("span",{staticClass:"text-sm mr-2 font-bold"},[e._v(" "+e._s(p.pan_publoc_ref)+" ")]),e._v(" "),n("span",{staticClass:"text-xs"},[e._v(" "+e._s(p.pan_ref)+" ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-prev-next text-sm",on:{click:function(){e.panels.splice(i),e.list_id_pan.splice(i)}}},[n("span",{staticClass:"material-icons"},[e._v("clear")])])])})),0),e._v(" "),n("div",{staticClass:"flex p-2"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:" text-sm",class:e.in_request?"bt-load":"bt",on:{click:e.putDispoPan}},[e._v(" "+e._s(e.in_request?"Requête en cours ...":"Mettre en Dispo")+" ")])]),e._v(" "),n("div",{staticClass:"p-2 border flex items-end"},[n("div",{staticClass:"relative",on:{keypress:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:function(){e.console.log("sdqdfqsdfqsdf"),e.index_parcours=e.index_parcours+1==e.panels_results.length?0:e.index_parcours+1}.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:function(){e.index_parcours=0==e.index_parcours?e.panels_results.length-1:e.index_parcours-1}.apply(null,arguments)}]}},[n("custom-input",{attrs:{label:"Référence régisseur du panneau ... "},model:{value:e.ref_reg_pan,callback:function(t){e.ref_reg_pan=t},expression:"ref_reg_pan"}}),e._v(" "),e.panels_results.length>0?n("div",{staticClass:" h-80 overflow-auto absolute w-full border py-1 mt-2 shadow-lg rounded"},e._l(e.panels_results,(function(p){return n("div",{key:p.pan_id,staticClass:"flex flex-col p-2 border border-transparent hover:m-2 hover:border-indigo-600 cursor-pointer hover:bg-gray-100",class:{"bg-indigo-600 bg-opacity-10 border ":-1!=e.list_id_pan.indexOf(p.pan_id)},on:{click:function(){-1==e.list_id_pan.indexOf(p.pan_id)&&(e.list_id_pan.push(p.pan_id),e.panels.push({pan_id:p.pan_id,pan_ref:p.pan_ref,pan_publoc_ref:p.pan_publoc_ref}),e.panels_results=[],e.index_parcours=-1,e.ref_reg_pan="")}}},[n("span",{staticClass:"text-sm font-bold"},[e._v(" "+e._s(p.pan_publoc_ref)+" ")]),e._v(" "),n("span",{staticClass:"text-xs"},[e._v(" "+e._s(p.pan_ref)+" ")])])})),0):e._e()],1),e._v(" "),n("div",{staticClass:"text-xs border p-2 rounded ml-2"},[e.in_search?n("span",{},[e._v(" Recherche ... ")]):n("span",{},[e._v(" "+e._s(e.panels_results.length>0?e.panels_results.length+" correspondance ":"Aucune correspondance")+" ")])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CSelect:n(362).default,CustomInput:n(358).default})}}]);
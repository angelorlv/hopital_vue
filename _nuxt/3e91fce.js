(window.webpackJsonp=window.webpackJsonp||[]).push([[141,17,23],{358:function(t,e,r){"use strict";r.r(e);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},n=r(7),component=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{style:t.input.style},[r("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[r("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),r("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},359:function(t,e,r){var content=r(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(27).default)("2d1dc0a2",content,!0,{sourceMap:!1})},360:function(t,e,r){"use strict";r(359)},361:function(t,e,r){var l=r(26)((function(i){return i[1]}));l.push([t.i,"/*purgecss start ignore*/\n.fade-enter-active,.fade-leave-active{\n  transition:opacity .3s\n}\n.fade-enter,.fade-leave-to{\n  opacity:0\n}\n\n/*purgecss end ignore*/",""]),l.locals={},t.exports=l},362:function(t,e,r){"use strict";r.r(e);var l={props:["value","datas","label","code","placeholder","padding","width"],watch:{datas:function(a){this.$emit("input",void 0===a[0]?null:a[0][this.code])}},data:function(){return{}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)}},mounted:function(){}},n=(r(360),r(7)),component=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"relative flex flex-col"},[t.placeholder?r("div",{staticClass:"text-xs duration-300 flex items-center font-bold",class:t.datas.length>0?" h-4":"h-0"},[t.datas.length>0?r("label",{staticClass:"z-10 px-1 text-indigo-600"},[t._v(" "+t._s(t.placeholder)+" ")]):t._e()]):t._e(),t._v(" "),r("div",[r("select",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",on:{change:function(e){return t.updateInput()}}},t._l(t.datas,(function(e){return r("option",{key:e[t.code],domProps:{value:e[t.code],selected:t.value==e[void 0===t.code?"code":t.code]}},[t._v(" "+t._s(e[void 0===t.label?"label":t.label])+" ")])})),0)])])}),[],!1,null,null,null);e.default=component.exports},585:function(t,e,r){"use strict";r.r(e);var l=r(3),n=(r(25),{watch:{"tr_filter.cat_id":function(a){if(!a)return this.tmp_formats=this.formats,void(this.tr_filter.format_id=this.tmp_formats[0].cat_id);for(var t=[],i=0;i<this.formats.length;i++){var e=this.formats[i];e.parent_cat_id==a&&t.push(e)}this.tmp_formats=t,this.tr_filter.format_id=this.tmp_formats[0].cat_id},"tr_filter.month":function(a){a||(this.tr_filter.month=1)}},data:function(){return{tarifs:[],cats:[],regs:[],formats:[],services:[],tr_filter:{cat_id:0,month:1},tmp_formats:[],list_label_aff:[{label:"Regisseur",key:"reg_label"},{label:"Catégorie",key:"cat_label"},{label:"Location",key:"tpm_location",number:!0},{label:"Taxe Comminale",key:"tpm_taxe_communale",number:!0}]}},methods:{getListTarifs:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/tr/list/all");case 3:(r=e.sent).status?t.tarifs=r.tarifs:t.showNotif("Erreur",r.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getDataUtilsTarif:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/tr/ad/data-utils");case 3:(r=e.sent).status?(t.cats=r.cats,t.cats.unshift({cat_label:"Tous",cat_id:null}),t.tr_filter.cat_id=t.cats[0].cat_id,t.regs=r.regs,t.regs.unshift({reg_label:"Tous",reg_id:null}),t.tr_filter.reg_id=t.regs[0].reg_id,t.formats=r.formats,t.services=r.services,t.tr_filter.serv_id=t.services[0].t_serv_id,t.tr_filter.type=t.panel_impression_type[0].code):t.showNotif("Erreur",r.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},launchSearch:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/tr/search/filter",{params:t.tr_filter});case 3:(r=e.sent).status?t.tarifs=r.tarifs:t.showNotif("Erreur",r.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.getDataUtilsTarif()}}),c=r(7),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("div",{staticClass:"mx-2 p-2"},[r("span",{staticClass:"font-bold"},[t._v(" Liste des tarifs créer | Total : "+t._s(t.tarifs.length)+" ")])]),t._v(" "),r("div",{staticClass:" flex "},[r("div",{staticClass:"flex m-2 items-end"},[r("c-select",{staticClass:"mr-2",attrs:{datas:t.regs,label:"reg_label",code:"reg_id",placeholder:"Régisseur ..."},model:{value:t.tr_filter.reg_id,callback:function(e){t.$set(t.tr_filter,"reg_id",e)},expression:"tr_filter.reg_id"}}),t._v(" "),r("c-select",{staticClass:"mr-2",attrs:{datas:t.cats,label:"cat_label",code:"cat_id",placeholder:"Catégorie ..."},model:{value:t.tr_filter.cat_id,callback:function(e){t.$set(t.tr_filter,"cat_id",e)},expression:"tr_filter.cat_id"}}),t._v(" "),t.tmp_formats.length>0?r("c-select",{staticClass:"mr-2",attrs:{datas:t.tmp_formats,label:"cat_label",code:"cat_id",placeholder:"Formats ..."},model:{value:t.tr_filter.format_id,callback:function(e){t.$set(t.tr_filter,"format_id",e)},expression:"tr_filter.format_id"}}):t._e(),t._v(" "),r("custom-input",{staticClass:"mr-2",attrs:{type:"number",label:"Nombre de mois"},model:{value:t.tr_filter.month,callback:function(e){t.$set(t.tr_filter,"month",e)},expression:"tr_filter.month"}}),t._v(" "),r("c-select",{staticClass:"mr-2",attrs:{datas:t.panel_impression_type,label:"label",code:"code",placeholder:"Type ..."},model:{value:t.tr_filter.type,callback:function(e){t.$set(t.tr_filter,"type",e)},expression:"tr_filter.type"}}),t._v(" "),r("button",{staticClass:"bt text-sm",on:{click:t.launchSearch}},[t._v(" Rechercher ")])],1)]),t._v(" "),r("div",{staticClass:"mx-2"},[r("table",{staticClass:"w-full"},[r("thead",[r("tr",{staticClass:"p-2 text-left border"},t._l(t.list_label_aff,(function(e){return r("th",{key:e.label,staticClass:"p-2"},[t._v(" "+t._s(e.label)+" ")])})),0)]),t._v(" "),r("tbody",t._l(t.tarifs,(function(tr){return r("tr",{key:tr.tr_id,staticClass:"border-b"},[t._l(t.list_label_aff,(function(e){return r("td",{staticClass:"p-2"},[t._v(" "+t._s(e.number?t.separateNumber(tr[e.key]):tr[e.key])+" ")])})),t._v(" "),t._l(tr.services,(function(s){return r("td",{staticClass:"flex flex-col"},[r("div",{staticClass:"flex"},[r("span",{staticClass:"font-bold text-xs"},[t._v(" "+t._s(s.t_serv_label)+" ")]),t._v(" "),!t.tr_filter.type&&s.tps_type?r("span",{staticClass:"text-xs ml-1"},[t._v(" ( "+t._s(s.tps_type)+" ) ")]):t._e()]),t._v(" "),r("span",{staticClass:"text-sm"},[t._v(" "+t._s(t.separateNumber(s.tps_prix))+" ")])])}))],2)})),0)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CSelect:r(362).default,CustomInput:r(358).default})}}]);
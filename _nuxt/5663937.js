(window.webpackJsonp=window.webpackJsonp||[]).push([[96,23,65],{358:function(e,t,n){"use strict";n.r(t);var r={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},c=n(7),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},383:function(e,t,n){"use strict";n.r(t);var r=n(3),c=(n(25),n(62),{props:["by","val","label_by"],data:function(){return{list_pan:[]}},methods:{getPanelBy:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.parse('{"'.concat(e.by,'":"').concat(e.val,'"}')),t.next=4,e.$axios.$get("api/a/panel/by",{params:n});case 4:(r=t.sent).status?e.list_pan=r.panels:e.showNotif("Erreur",r.message,!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.showErrorConnexion(),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},mounted:function(){this.getPanelBy()}}),o=n(7),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fixed bg-white bg-opacity-90 top-0 left-0 w-screen h-screen flex justify-center items-center z-50"},[n("div",{staticClass:"border rounded-lg bg-white shadow-lg ",staticStyle:{width:"600px"}},[n("div",{staticClass:"p-2 flex items-center"},[n("span",{},[e._v("Liste des panneaux : "),n("span",{staticClass:"font-bold"},[e._v(e._s(e.label_by))])]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back",on:{click:function(t){return e.$emit("close")}}},[e._v("Retour")])]),e._v(" "),n("div",{staticClass:"border-t overflow-auto",staticStyle:{height:"300px","max-height":"300px"}},e._l(e.list_pan,(function(p){return n("div",{key:p.pan_id,staticClass:" cursor-pointer flex flex-col p-2 rounded-lg m-2 border hover:bg-gray-100",on:{click:function(t){return e.$router.push("/admin/panneau/"+p.pan_id)}}},[n("span",{staticClass:"font-bold"},[e._v(" "+e._s(p.pan_ref)+" ")]),e._v(" "),n("span",{staticClass:"text-sm"},[e._v(" "+e._s(p.lieu_label)+" ")])])})),0)])])}),[],!1,null,null,null);t.default=component.exports},396:function(e,t,n){"use strict";var r=n(3);n(25);t.a={data:function(){return{}},methods:{validateProfil:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$put("api/a/profil/validate/"+e,{pr_validate:1});case 3:(r=n.sent).status?(t.showNotif("Validation de profil",r.message),null!=t.ann?t.getAnn():t.getReg()):t.showNotif("Erreur de validation",r.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.showNotif("Erreur","Erreur de connexion. Connexion pas établie avec le serveur.",!0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}}},411:function(e,t,n){var content=n(472);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(27).default)("68383d69",content,!0,{sourceMap:!1})},471:function(e,t,n){"use strict";n(411)},472:function(e,t,n){var r=n(26)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n.onglet-active[data-v-03f6b1b0]{\n  font-weight:700;\n  --tw-text-opacity:1;\n  color:rgba(99, 102, 241, var(--tw-text-opacity));\n  text-decoration:underline\n}\n\n/*purgecss end ignore*/",""]),r.locals={},e.exports=r},600:function(e,t,n){"use strict";n.r(t);var r=n(3),c=(n(62),n(25),{mixins:[n(396).a],layout:"espace",watch:{ann_search:function(a){this.searchAnn()}},data:function(){return{error_on_page:!1,ann:{},on_show_panel:!1,ann_search:"",list_ann_pige:[],list_ann_search:[],in_add_ann_pige:!1}},methods:{getAnn:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("api/a/annonceur/"+e.$route.params.id);case 2:(n=t.sent).status?e.ann=n.annonceur:e.error_on_page=!0;case 4:case"end":return t.stop()}}),t)})))()},btValidateProfil:function(){this.validateProfil(this.ann.ann_pr_id),console.log(this.ann.ann_pr_id)},delAnn:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$delete("api/a/ad/annonceur/"+e.$route.params.id);case 3:(a=t.sent).status?(e.showNotif("Suppression","Suppression de l'annonceur avec succès"),e.$router.go(-1)):e.showNotif("Erreur Suppression",a.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},changeAnnStatusCom:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ann.ann_is_agence_com){t.next=3;break}if(confirm("Vous Confirmer le changement du status de l'annonceur ? \n                Les sous-annonceurs ne verront plus les panneaux.")){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,e.$axios.$put("api/a/ad/ann/status_com/".concat(e.$route.params.id,"/").concat(e.ann.ann_is_agence_com));case 6:(a=t.sent).status?(e.showNotif("Changement de status","Le statut de l'annonceur a bien été changer"),e.getAnn()):e.showNotif("Erreur Suppression",a.message,!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.showErrorConnexion();case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},changeAccessAnn:function(p){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur/change/access",{params:p});case 3:(n=t.sent).status?e.getAnn():e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},searchAnn:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur/pige/list-ann-search",{params:{id_ann:e.$route.params.id,search:e.ann_search}});case 3:(n=t.sent).status?e.list_ann_search=n.anns:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},addAnnInPige:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$put("api/a/annonceur/pige/add-ann",{ann_id_add:e,ann_id_cur:t.$route.params.id});case 3:(r=n.sent).status?t.searchAnn():t.showNotif("Erreur",r.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getListAnnPige:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur/pige/list-ann",{params:{id_ann:e.$route.params.id}});case 3:(n=t.sent).status?e.list_ann_pige=n.list_ann_pige:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteAnnPige:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$delete("api/a/annonceur/pige/delete-ann",{params:{id_ann:t.$route.params.id,id_ann_sup:e}});case 3:(r=n.sent).status?t.getListAnnPige():t.showNotif("Erreur",r.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},mounted:function(){this.getAnn(),this.getListAnnPige()}}),o=(n(471),n(7)),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center"},[e.error_on_page?n("div",{staticClass:"flex justify-center items-center"},[n("div",{staticClass:"h-48"}),e._v(" "),e._m(1)]):n("div",{staticClass:"flex flex-col justify-center ",style:{width:"600px"}},[n("div",{staticClass:"w-full rounded border mt-5"},[n("div",{staticClass:"flex border-b p-2"},[n("button",{staticClass:"bt-pren-next",on:{click:function(t){return e.$router.go(-1)}}},[n("span",{staticClass:"material-icons"},[e._v(" navigate_before ")])]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt text-sm"},[e._v("Contacter")])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Nom de la société ")]),e._v(" "),n("span",{staticClass:"text-xl"},[e._v(" "+e._s(e.ann.ann_label)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col p-2 border-b"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Nombre de panneau ")]),e._v(" "),n("div",{staticClass:"flex"},[n("span",{staticClass:"text-xl mr-5"},[e._v(" "+e._s(e.ann.nb_panel)+" ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),e.ann.nb_panel>0?n("button",{staticClass:"bt text-xs",on:{click:function(){e.on_show_panel=!0,e.p_view.by="ann_id",e.p_view.val=e.ann.ann_id,e.p_view.label_by=e.ann.ann_label}}},[e._v("Voir")]):e._e()])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Login ")]),e._v(" "),n("span",{staticClass:"text-xl"},[e._v(" "+e._s(null==e.ann.pr_login?"-":e.ann.pr_login)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2 "},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Validation profil ")]),e._v(" "),n("span",{staticClass:"text-lg"},[e._v(" "+e._s(0==e.ann.pr_validate?"Profil pas encore validé":"Profil validé")+" ")]),e._v(" "),n("span",{staticClass:"text-sm"},[e._v(" Inscription le, "+e._s(e.dateToText(e.ann.pr_date_ins))+" ")]),e._v(" "),e.ann.pr_validate&&e.ann.pr_date_ins_validate?n("span",{staticClass:"text-sm"},[e._v(" Profil validé le, "+e._s(e.dateToText(e.ann.pr_date_ins_validate))+" ")]):e._e()]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Adresse ")]),e._v(" "),n("span",{staticClass:"text-xl"},[e._v(" "+e._s(null==e.ann.soc_pr_adresse?"-":e.ann.soc_pr_adresse)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Email ")]),e._v(" "),n("span",{staticClass:"text-xl"},[e._v(" "+e._s(null==e.ann.soc_pr_email?"-":e.ann.soc_pr_email)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Nif ")]),e._v(" "),n("span",{staticClass:"text-xl"},[e._v(" "+e._s(null==e.ann.soc_pr_nif?"-":e.ann.soc_pr_nif)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Stat ")]),e._v(" "),n("span",{staticClass:"text-xl"},[e._v(" "+e._s(null==e.ann.soc_pr_stat?"-":e.ann.soc_pr_stat)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("div",{},[e.ann.ann_is_agence_com?n("span",{staticClass:"border-l-2 pl-2 border-indigo-600"},[e._v("Cet annonceur a un statut d'Agence Commerciale")]):n("span",{staticClass:"border-l-2 pl-2 border-green-600"},[e._v(" Cet Annonceur n'est pas une agence Commerciale ")])]),e._v(" "),n("div",{staticClass:"border-t mt-2 p-2"},[e.ann.ann_is_agence_com?n("span",{staticClass:"text-sm"},[e._v(" Enlevez de cet annonceur le status d'agence commerciale ")]):e._e(),e._v(" "),e.ann.ann_is_agence_com?e._e():n("span",{staticClass:"text-sm"},[e._v("Mettre cet annonceur comme une agence commerciale")]),e._v(" "),n("button",{staticClass:"bt text-sm",on:{click:e.changeAnnStatusCom}},[e._v(" Changer ")])])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("div",{staticClass:"flex  items-center"},[n("span",{staticClass:"text-sm font-bold"},[e._v(' Accès à "Trouver emplacement" ')]),e._v(" "),n("div",{staticClass:"flex text-white text-xs p-1 rounded-full items-center justify-center ml-2",class:{"bg-red-500":!e.ann.ann_place_v,"bg-green-500":e.ann.ann_place_v}},[n("span",{staticClass:"material-icons text-xs"},[e._v(" check ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.ann.ann_place_v?"Actif":"Inactif")+" ")])])]),e._v(" "),n("div",{staticClass:"text-xs flex"},[n("span",{staticClass:"flex-grow"},[e._v(" Accès permettant de voir et de rechercher des emplacements dans le tableau de bord de l'annonceur ")]),e._v(" "),n("div",{staticClass:"border-l p-2"},[n("button",{on:{click:function(t){e.changeAccessAnn({key:"place",value:e.ann.ann_place_v?0:1,ann_id:e.$route.params.id})}}},[e._v(" "+e._s(e.ann.ann_place_v?"Desactiver":"Activer")+" ")])])])]),e._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("div",{staticClass:"flex  items-center"},[n("span",{staticClass:"text-sm font-bold"},[e._v(" Possibilité de voir le nom du Régisseur ")]),e._v(" "),n("div",{staticClass:"flex text-white text-xs p-1 rounded-full items-center justify-center ml-2",class:{"bg-red-500":!e.ann.ann_reg_v,"bg-green-500":e.ann.ann_reg_v}},[n("span",{staticClass:"material-icons text-xs"},[e._v(" check ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.ann.ann_reg_v?"Actif":"Inactif")+" ")])])]),e._v(" "),n("div",{staticClass:"text-xs flex"},[n("span",{staticClass:"flex-grow"},[e._v(" Accès permettant de voir le nom du régisseur dans détails panneau ")]),e._v(" "),n("div",{staticClass:"border-l p-2"},[n("button",{on:{click:function(t){e.changeAccessAnn({key:"reg",value:e.ann.ann_reg_v?0:1,ann_id:e.$route.params.id})}}},[e._v(" "+e._s(e.ann.ann_reg_v?"Desactiver":"Activer")+" ")])])])]),e._v(" "),n("div",{},[e._m(0),e._v(" "),n("div",{staticClass:"flex p-2 border-b"},[n("span",{staticClass:"cursor-pointer px-2",class:{"onglet-active":!e.in_add_ann_pige},on:{click:function(){e.in_add_ann_pige=!1,e.getListAnnPige()}}},[e._v(" Liste ")]),e._v(" "),n("span",{staticClass:"cursor-pointer px-2",class:{"onglet-active":e.in_add_ann_pige},on:{click:function(t){e.in_add_ann_pige=!0}}},[e._v(" Ajout ")])]),e._v(" "),e.in_add_ann_pige?n("div",{staticClass:"p-2 flex flex-col h-80 overflow-auto"},[n("custom-input",{attrs:{label:"Nom annonceur"},model:{value:e.ann_search,callback:function(t){e.ann_search=t},expression:"ann_search"}}),e._v(" "),n("div",{staticClass:"flex flex-wrap"},e._l(e.list_ann_search,(function(a){return n("div",{key:a.ann_id,staticClass:" p-1 m-1 border rounded-full flex justify-center items-center"},[n("span",{staticClass:"mx-2"},[e._v(e._s(a.ann_label))]),e._v(" "),n("button",{staticClass:" flex mx-2 justify-center items-center "},[n("span",{staticClass:" material-icons",on:{click:function(t){return e.addAnnInPige(a.ann_id)}}},[e._v("add_circle")])])])})),0)],1):n("div",{staticClass:" flex  "},[n("div",{staticClass:"flex flex-wrap"},e._l(e.list_ann_pige,(function(a){return n("div",{key:a.ann_id,staticClass:" p-1 m-1 border rounded-full flex justify-center items-center"},[n("span",{staticClass:"mx-2"},[e._v(e._s(a.ann_label))]),e._v(" "),n("button",{staticClass:" flex mx-2 justify-center items-center ",on:{click:function(t){return e.deleteAnnPige(a.ann_id)}}},[n("span",{staticClass:" material-icons"},[e._v("clear")])])])})),0)])])]),e._v(" "),n("div",{staticClass:"flex border rounded-lg sticky bottom-2 mt-4 bg-white shadow-lg p-2"},[n("button",{staticClass:"bt",on:{click:function(t){return e.$router.push("/admin/annonceur")}}},[e._v(" Listes ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt text-sm mr-2",on:{click:e.delAnn}},[e._v("Supprimer")]),e._v(" "),0==e.ann.pr_validate?n("button",{staticClass:"bt text-sm mx-2",on:{click:function(t){return e.btValidateProfil()}}},[e._v(" Valider le profil ")]):e._e(),e._v(" "),n("button",{staticClass:"bt text-sm",on:{click:function(t){return e.$router.push({name:"admin-annonceur-edit-id",params:{id:e.$route.params.id}})}}},[e._v("Modifier")])]),e._v(" "),e.on_show_panel?n("view-panel-by",{attrs:{by:e.p_view.by,val:e.p_view.val,label_by:e.p_view.label_by},on:{close:function(t){e.on_show_panel=!1}}}):e._e()],1)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 border-b"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Gestion de pige pour l'annonceur ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("span",{staticClass:"text-xl"},[e._v("Erreur pendant l'affichage de la page")])])}],!1,null,"03f6b1b0",null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default,ViewPanelBy:n(383).default})}}]);
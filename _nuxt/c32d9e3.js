(window.webpackJsonp=window.webpackJsonp||[]).push([[75,23,34,63],{358:function(t,e,n){"use strict";n.r(e);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},r=n(7),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},378:function(t,e,n){"use strict";n.r(e);n(61),n(21),n(99);var l={props:["list","index","mode","im"],watch:{cur_im:function(){this.redim()}},data:function(){return{cur_index:{},cur_im:{},im_style:{}}},methods:{init:function(){},redim:function(){var t=this.cur_im.dimension_file.split(",").map((function(t){return parseInt(t)}));if(t[0]>window.innerWidth){var e=window.innerWidth-100,n=e/t[0]*t[1];n>window.innerHeight&&(e=(n=window.innerHeight)/t[1]*t[0]),this.im_style.width=e+"px",this.im_style.height=n+"px",console.log(this.im_style),console.log("Mihoatra")}}},mounted:function(){var t=this;this.init(),this.cur_im=this.im,window.addEventListener("resize",(function(){t.redim()}))}},r=n(7),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:" flex justify-center items-center fixed w-screen h-screen top-0 left-0 bg-white bg-opacity-80",staticStyle:{"z-index":"1010"}},[n("button",{staticClass:"bt-prev-next top-5 left-5 absolute",on:{click:function(e){return t.$emit("close")}}},[n("span",{staticClass:"material-icons"},[t._v(" clear ")])]),t._v(" "),n("img",{style:t.im_style,attrs:{src:"/api/p/media/"+t.cur_im.name_file,alt:"",srcset:""}})])}),[],!1,null,null,null);e.default=component.exports},379:function(t,e,n){"use strict";e.a={data:function(){return{im_v:{show:!1,cur_image:{}}}},methods:{},mounted:function(){}}},380:function(t,e,n){"use strict";n.r(e);var l=n(3),r=(n(25),n(61),n(363)),o=n.n(r),c={props:["coord","load_data"],watch:{load_data:function(a){a&&this.initMap()}},data:function(){return{mymap:{},accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",layerGroup:{}}},methods:{initMap:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.mymap=o.a.map("map",{zoomControl:!1}).setView(t.coord,19),o.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(t.mymap),o.a.marker(t.coord).addTo(t.mymap);case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){}},d=n(7),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"400px",width:"100%"}},[e("div",{staticStyle:{height:"100%",width:"100%","border-radius":"8px"},attrs:{id:"map"}})])}],!1,null,null,null);e.default=component.exports},490:function(t,e,n){"use strict";n.r(e);var l=n(3),r=(n(25),{mixins:[n(379).a],layout:"espace",data:function(){return{error_on_page:!1,panel:{},list_image:[],image_list_pose:[],image_list_solarpro:[],spp:null,loaded:!1,tag_model:"",on_modif_tag:!1}},methods:{getPanel:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaded=!1,e.next=3,t.$axios.$get("api/a/annonceur/p/panel/"+t.$route.params.id).then((function(t){return t}));case 3:(n=e.sent).status?(t.panel=n.panel,t.list_image=n.image_list,t.image_list_pose=n.image_list_pose,t.image_list_solarpro=n.image_list_solarpro,t.spp=n.spp?n.spp:null,t.loaded=!0):t.error_on_page=!0;case 5:case"end":return e.stop()}}),e)})))()},delPanel:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Voulez vous vraiment supprimer ce Panneau ?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$axios.$delete("api/a/ad/panel/"+t.$route.params.id);case 5:(n=e.sent).status?(t.showNotif("Suppression de Panneau","Suppresion de panneau avec succès"),t.$router.go(-1)):t.showNotif("Erreur",n.message,!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.showErrorConnexion();case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},validatePan:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Valider le panneau !!?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$axios.$put("api/a/ad/panel/valid/"+t.$route.params.id);case 5:e.sent.status?(t.showNotif("Validation de panneau","Panneau Validé avec succès"),t.getPanel()):t.showNotif("Erreur",d.message,!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.showErrorConnexion();case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},putTagPan:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$put("api/a/panel/ann/tag",{pan_id:t.$route.params.id,tag:t.tag_model});case 3:(n=e.sent).status?(t.getPanel(),t.on_modif_tag=!1):t.showNotif("Erreur de changement de tag",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},toggleVisiblePan:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$put("api/a/regisseur/panel/"+e.$route.params.id+"/visible/"+(t?1:0));case 3:(l=n.sent).status?e.getPanel():e.showNotif("Erreur",l.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},created:function(){this.getPanel()}}),o=n(7),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex justify-center items-center"},[t.error_on_page?n("div",{},[n("div",{staticClass:"h-48"}),t._v(" "),n("div",{staticClass:" flex flex-col justify-center items-center p-3 border rounded-lg"},[n("span",[t._v("Ooups !!")]),t._v(" "),n("span",[t._v(" Erreur pendant l'affichage de la page !")]),t._v(" "),n("span",{staticClass:"font-bold cursor-pointer text-indigo-600",on:{click:function(e){return t.$route.push("/admin/panneau")}}},[t._v(" Retour à la liste ")])])]):n("div",{},[n("div",{style:{width:"600px",maxWidth:"700px"}},[n("div",{staticClass:" relative w-full rounded-b-lg bg-gray-50",style:{height:"300px",maxHeight:"300px"}},[n("div",{staticClass:" absolute bottom-2 left-2 rounded-full p-2 bg-gray-100 shadow-lg"},[n("span",{staticClass:"text-2xl"},[t._v(" "+t._s(t.panel.pan_publoc_ref)+" ")])]),t._v(" "),n("button",{staticClass:"bt-prev-next absolute top-2 left-2",on:{click:function(e){return t.$router.go(-1)}}},[n("span",{staticClass:"material-icons"},[t._v(" navigate_before ")])]),t._v(" "),null==t.panel.name_file?n("div",{staticClass:"w-full h-full flex justify-center items-center "},[n("span",{staticClass:"p-2 rounded-full border-gray-400 border text-gray-400 "},[t._v(" Aucune image Disponible ")])]):n("div",{staticClass:"h-full w-full flex "},[n("img",{staticClass:"object-cover flex-grow rounded-b-lg",attrs:{src:"/api/p/media/"+t.panel.name_file,loading:"lazy",crossorigin:"anonymous"}})])]),t._v(" "),n("div",{staticClass:"mt-5 border rounded-lg bg-white shadow-lg"},[n("div",{staticClass:" border-r"},[n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Lieu")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(t.panel.lieu_label)+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Latitude")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(t.panel.lieu_lat)+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col  border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Longitude")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(t.panel.lieu_lng)+" ")])])])]),t._v(" "),n("div",{staticClass:"mt-5",staticStyle:{height:"400px",width:"100%"}},[n("client-only",[n("view-in-carte",{attrs:{coord:[t.panel.lieu_lat,t.panel.lieu_lng],load_data:t.loaded}})],1)],1),t._v(" "),n("div",{staticClass:"mt-5 border rounded-lg bg-white shadow-lg"},[t._m(0),t._v(" "),t.panel.pan_tag&&!t.on_modif_tag?n("div",{staticClass:"p-2 flex"},[n("span",{staticClass:"p-1 mr-2 rounded-lg text-blue-500 bg-opacity-10 bg-blue-500"},[t._v(" "+t._s(t.panel.pan_tag)+" ")]),t._v(" "),n("button",{staticClass:"text-xs bg-gray-50 hover:bg-gray-100 duration-300 p-1 rounded-full border w-8 h-8 flex justify-center items-center",on:{click:function(){t.tag_model=t.panel.pan_tag,t.on_modif_tag=!0}}},[n("span",{staticClass:"material-icons text-sm"},[t._v(" edit ")])])]):n("div",{staticClass:" flex p-2 flex-col "},[n("div",{staticClass:"flex items-end"},[n("custom-input",{staticClass:"mr-2",attrs:{label:"Tag ..."},model:{value:t.tag_model,callback:function(e){t.tag_model=e},expression:"tag_model"}}),t._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(){t.putTagPan()}}},[n("span",{staticClass:"material-icons"},[t._v(" check  ")])])],1)])]),t._v(" "),n("div",{staticClass:"mt-5 border rounded-lg bg-white shadow-lg"},[n("div",{staticClass:" w-full"},[n("div",{},[n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Pays")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(null!=t.panel.lieu_pays?t.panel.lieu_pays:"-")+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Ville")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(null!=t.panel.lieu_ville?t.panel.lieu_ville:"-")+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col text-xl border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Région")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(null!=t.panel.lieu_region?t.panel.lieu_region:"-")+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Quartier")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(null!=t.panel.lieu_quartier?t.panel.lieu_quartier:"-")+" ")])])])])]),t._v(" "),n("div",{staticClass:"mt-5 border rounded-lg shadow-lg bg-white"},[n("div",{staticClass:" w-full flex"},[n("div",{staticClass:"w-full"},[n("div",{staticClass:"flex border-b w-full p-2"},[n("div",{staticClass:"w-1/2 flex flex-col"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Catégorie")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(null!=t.panel.parent_cat_label?t.panel.parent_cat_label:"-")+" ")])]),t._v(" "),n("div",{staticClass:"w-1/2 flex flex-col"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Format")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v(" "+t._s(null!=t.panel.cat_label?t.panel.cat_label:"-")+" ")])])]),t._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Surface")]),t._v(" "),n("span",{staticClass:"text-xl"},[t._v("  "+t._s(null!=t.panel.pan_surface?t.panel.pan_surface+" m²":"-")+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col border-b p-2"},[n("span",{staticClass:"text-xs font-bold"},[t._v("Description")]),t._v(" "),n("span",{staticClass:"text-xl whitespace-pre-wrap"},[t._v(t._s(null!=t.panel.pan_description?t.panel.pan_description:"-")+" ")])])])])]),t._v(" "),n("div",{staticClass:"bg-white mt-5 mb-5 flex flex-col border justify-start relative rounded-lg "},[t._m(1),t._v(" "),t.list_image.length>0?n("div",{staticClass:"flex p-2 flex-wrap"},t._l(t.list_image,(function(e){return n("div",{key:e.name_file,staticClass:"flex h-16 m-1 border-2 border-gray-300 rounded-lg relative",on:{click:function(){t.im_v.show=!0,t.im_v.cur_image=e}}},[n("img",{staticClass:" rounded-lg",attrs:{src:"/api/p/media/"+e.name_min_file,loading:"lazy",crossorigin:"anonymous"}})])})),0):n("div",{staticClass:"p-2"},[n("span",{staticClass:"text-sm"},[t._v("Aucune image disponible")])])]),t._v(" "),n("div",{staticClass:"bg-white mt-5 flex flex-col relative border-t border-l border-r border-indigo-600 justify-start rounded-lg rounded-b-none "},[t._m(2),t._v(" "),n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"flex flex-col p-2 "},[n("span",{staticClass:"text-xs"},[t._v(" Date de début de location ")]),t._v(" "),n("span",{},[t._v(" "+t._s(new Date(t.panel.pan_loc_date_debut).toLocaleDateString())+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col p-2 "},[n("span",{staticClass:"text-xs"},[t._v(" Date de Fin de location ")]),t._v(" "),n("span",{},[t._v(" "+t._s(new Date(t.addMonthToDate(t.panel.pan_loc_date_debut,t.panel.pan_loc_month)).toLocaleDateString())+" ")])]),t._v(" "),n("div",{staticClass:"flex flex-col p-2 "},[n("span",{staticClass:"text-xs"},[t._v(" Nombre de mois ")]),t._v(" "),n("span",{},[t._v(" "+t._s(t.panel.pan_loc_month)+" ")])]),t._v(" "),t.panel.reg_label?n("div",{staticClass:"flex flex-col p-2 "},[n("span",{staticClass:"text-xs"},[t._v(" Régisseur ")]),t._v(" "),n("span",{},[t._v(" "+t._s(t.panel.reg_label)+" ")])]):t._e()])])]),t._v(" "),n("div",{staticClass:"bg-white mt-2 mb-5 flex flex-col relative border-b border-l border-r border-indigo-600 justify-start rounded-lg rounded-t-none "},[t._m(3),t._v(" "),t.image_list_pose.length>0?n("div",{staticClass:"flex p-2 flex-wrap "},t._l(t.image_list_pose,(function(e){return n("div",{key:e.name_file,staticClass:"flex h-16 m-1 border-2 border-gray-300 rounded-lg relative",on:{click:function(){t.im_v.show=!0,t.im_v.cur_image=e}}},[n("img",{staticClass:" rounded-lg",attrs:{src:"/api/p/media/"+e.name_min_file,loading:"lazy",crossorigin:"anonymous"}})])})),0):n("div",{staticClass:"p-2"},[n("span",{staticClass:"text-sm"},[t._v("Aucune image disponible")])])]),t._v(" "),n("div",{staticClass:"bg-white mt-5 mb-5 flex flex-col border justify-start rounded-lg relative"},[t._m(4),t._v(" "),t.image_list_solarpro.length>0?n("div",{staticClass:"flex flex-wrap p-2 "},t._l(t.image_list_solarpro,(function(e){return n("div",{key:e.name_file,staticClass:"flex h-16 m-1 border-2 border-gray-300 rounded-lg relative",on:{click:function(){t.im_v.show=!0,t.im_v.cur_image=e}}},[n("img",{staticClass:" rounded-lg",attrs:{src:"/api/p/media/"+e.name_min_file,loading:"lazy",crossorigin:"anonymous"}})])})),0):n("div",{staticClass:"p-2"},[n("span",{staticClass:"text-sm"},[t._v("Aucune image disponible")])])]),t._v(" "),t.spp?n("div",{staticClass:"bg-white mt-5 mb-5 flex flex-col border justify-start rounded-lg relative"},[t._m(5),t._v(" "),n("div",{staticClass:"p-2 flex flex-col"},[n("span",{staticClass:"text-sm font-bold"},[t._v("Date debut")]),t._v(" "),n("span",{},[t._v(" "+t._s(t.spp.spp_date_debut?t.dateToText(t.spp.spp_date_debut):"-")+" ")])]),t._v(" "),n("div",{staticClass:"p-2 flex flex-col"},[n("span",{staticClass:"text-sm font-bold"},[t._v("Date fin")]),t._v(" "),n("span",{},[t._v(" "+t._s(t.spp.spp_date_fin?t.dateToText(t.spp.spp_date_fin):"-")+" ")])]),t._v(" "),n("div",{staticClass:"p-2 flex flex-col"},[n("span",{staticClass:"text-sm font-bold"},[t._v("Date de Contrôle")]),t._v(" "),n("span",{},[t._v(" "+t._s(t.spp.spp_date_control?t.dateToText(t.spp.spp_date_control):"-")+" ")])]),t._v(" "),n("div",{staticClass:"p-2 flex flex-col"},[n("span",{staticClass:"text-sm font-bold"},[t._v("Nombre de lumière")]),t._v(" "),n("span",{},[t._v(" "+t._s(t.spp.spp_nb_light?t.spp.spp_nb_light:"-")+" ")])])]):t._e(),t._v(" "),n("div",{staticClass:"mt-5 mb-5 p-2 flex border justify-end rounded-lg sticky bottom-2 bg-white"},[n("button",{staticClass:"bt text-sm",on:{click:function(e){return t.$router.push({name:"a-panneau"})}}},[t._v("Retour")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),t.panel.pan_modifiable?n("button",{staticClass:"bt text-sm",on:{click:function(e){return t.$router.push({name:"admin-panneau-edit-id",params:{id:t.$route.params.id}})}}},[t._v("Modifier")]):t._e()])])]),t._v(" "),t.im_v.show?n("image-viewer",{attrs:{im:t.im_v.cur_image},on:{close:function(e){t.im_v.show=!1}}}):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 border-b"},[n("span",{staticClass:"text-sm"},[t._v(" Tag du panneau ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 border-b "},[n("span",{staticClass:" text-sm font-bold"},[t._v(" Image en mode disponible ")]),t._v(" "),n("span",{staticClass:"text-xs"},[t._v(" ( visible publiquement ) ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-2 py-1 border-b "},[n("span",{staticClass:" text-sm font-bold"},[t._v(" Information de location ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 border-b "},[n("span",{staticClass:" text-sm font-bold"},[t._v(" Images de pose ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 border-b "},[n("span",{staticClass:" text-sm font-bold"},[t._v(" Image du Panneau Illuminé ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 border-b"},[n("span",{staticClass:"text-xs"},[t._v(" Infos illumination ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{ViewInCarte:n(380).default,CustomInput:n(358).default,ImageViewer:n(378).default})}}]);
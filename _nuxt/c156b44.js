(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{364:function(e,t,n){var content=n(367);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(27).default)("66a93922",content,!0,{sourceMap:!1})},366:function(e,t,n){"use strict";n(364)},367:function(e,t,n){var o=n(26)((function(i){return i[1]}));o.push([e.i,"/*purgecss start ignore*/\n.leaflet-popup .leaflet-popup-content-wrapper{\n  background-color:transparent;\n  box-shadow:none;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-content{\n  width:200px;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-tip-container{\n  top:0;\n  display:none\n}\n\n/*purgecss end ignore*/",""]),o.locals={},e.exports=o},370:function(e,t,n){"use strict";n.r(t);var o=n(3),r=(n(25),n(37),n(61),n(56),n(373),n(374),{}),l={props:["list_coord","load_data"],watch:{load_data:function(a){a&&this.initMap()}},data:function(){return{mymap:{},accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",layerGroup:{},markers:{},index_selected:-1}},methods:{setLinkPan:function(){return"r-panneau"==this.$route.name?"r/":"a-panneau"==this.$route.name?"a/":"admin-panneau"==this.$route.name?"admin/":""},initMap:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e.mymap=r.map("map",{zoomControl:!0}).setView([-19.002846,46.460938],5),r.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(e.mymap),e.markers=new r.MarkerClusterGroup({iconCreateFunction:function(e){var html='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-30 bg-indigo-600 w-12 h-12">';return html+='<div class="bg-indigo-600 h-10 w-10 text-gray-100 flex rounded-full justify-center items-center font-bold">'+e.getAllChildMarkers().length+"</div>",html+="</div>",r.divIcon({html:html,className:"mycluster",iconSize:r.point(32,32)})}}),n=function(i){var t=e.list_coord[i];o='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12">',o+='<span class="material-icons duration-300 text-indigo-600 hover:text-indigo-900 " style="font-size:50px;color:'.concat(t.cat_color,'"> place </span>'),o+="</div>",'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12">','<span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span>',"</div>";var n=r.divIcon({className:"custom-div-icon",html:o,iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),l=r.divIcon({className:"custom-div-icon",html:'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12"><span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span></div>',iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),c=r.marker([t.lieu_lat,t.lieu_lng],{icon:n});e.mymap.on("click",(function(){e.index_selected=-1,e.markers.eachLayer((function(e){e.setIcon(n)}))}));var d=e;c.on("click",(function(){d.markers.eachLayer((function(e){e.setIcon(n)})),d.index_selected=i,this.setIcon(l)})),e.markers.addLayer(c)},i=0;i<e.list_coord.length;i++)n(i);e.mymap.addLayer(e.markers);case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;r=n(363),n(375),this.load_data&&setTimeout((function(){e.initMap()}),500)}},c=(n(366),n(7)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative",staticStyle:{height:"500px",width:"100%"}},[n("div",{staticStyle:{height:"100%",width:"100%","border-radius":"8px"},attrs:{id:"map"}}),e._v(" "),n("div",{staticClass:"bg-gray-100 flex w-72 rounded-lg absolute top-5 right-5 duration-300",class:-1==e.index_selected?"h-16":"h-48",staticStyle:{"z-index":"1002"}},[-1!=e.index_selected?n("div",{staticClass:"cursor-pointer p-2 flex w-full relative flex-col justify-start items-start",on:{click:function(){"a-search-place"==e.$route.name?e.$router.push("/a/search-place/"+e.list_coord[e.index_selected].pan_id):e.$router.push("/"+e.setLinkPan()+"panneau/"+e.list_coord[e.index_selected].pan_id)}}},[n("div",{staticClass:"flex absolute top-4 left-4"},[n("span",{staticClass:"p-2 rounded-full bg-indigo-600 text-white"},[e._v(" "+e._s(e.list_coord[e.index_selected].pan_publoc_ref)+" ")])]),e._v(" "),null!=e.list_coord[e.index_selected].name_file?n("div",{staticClass:"h-full w-full flex rounded-t"},[n("img",{staticClass:"object-cover flex-grow rounded",attrs:{src:"/api/p/media/"+e.list_coord[e.index_selected].name_min_file,loading:"lazy",crossorigin:"anonymous"}})]):e._e(),e._v(" "),n("div",{staticClass:"flex justify-end items-end font-bold absolute p-2 w-full h-16 bg-gradient-to-t rounded-b-lg from-gray-700 to-transparent via-gray-700 left-0 bottom-0"},[n("span",{staticClass:"py-2 text-gray-200 block w-full"},[e._v(" "+e._s(e.list_coord[e.index_selected].lieu_label)+" ")])])]):n("div",{staticClass:"p-2 flex justify-center items-center text-gray-400"},[n("span",[e._v(" Cliquez sur un marqueur pour plus de détails ")])])])])}),[],!1,null,null,null);t.default=component.exports}}]);
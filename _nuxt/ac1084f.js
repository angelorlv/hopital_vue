(window.webpackJsonp=window.webpackJsonp||[]).push([[82,11,23,35,42],{358:function(e,t,r){"use strict";r.r(t);var n={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},l=r(7),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:e.input.style},[r("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[r("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),r("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},365:function(e,t,r){var content=r(369);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(27).default)("76a25175",content,!0,{sourceMap:!1})},368:function(e,t,r){"use strict";r(365)},369:function(e,t,r){var n=r(26)((function(i){return i[1]}));n.push([e.i,"/*purgecss start ignore*/\n#map[data-v-1beb3618]{\n  height:450px\n}\n\n/*purgecss end ignore*/",""]),n.locals={},e.exports=n},371:function(e,t,r){"use strict";r.r(t);var n=r(3),l=(r(25),r(61),r(62),r(21),r(99),r(363)),c=r.n(l),o=(r(376),r(377),{props:["data_carte"],data:function(){return{mymap:{},origin_view:[-18.929670491513264,47.52685546875001],accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",layerGroup:{},d_carte:{lat:0,lng:0,region:"",ville:"",quartier:"",pays:""},d:["lat","lng","region","ville","quartier","pays"]}},methods:{initMap:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.mymap=c.a.map("map").setView(e.origin_view,16),c.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(e.mymap),e.layerGroup=c.a.layerGroup().addTo(e.mymap),c.a.Control.geocoder({defaultMarkGeocode:!1}).addTo(e.mymap).on("markgeocode",(function(t){e.getLocation(t.geocode.center),e.d_carte.lat=t.geocode.center.lat,e.d_carte.lng=t.geocode.center.lng,e.mymap.setView([e.d_carte.lat,e.d_carte.lng]),e.layerGroup.clearLayers(),c.a.marker([e.d_carte.lat,e.d_carte.lng]).addTo(e.layerGroup)})),e.mymap.on("click",(function(t){e.d_carte.lat=t.latlng.lat,e.d_carte.lng=t.latlng.lng,e.layerGroup.clearLayers(),c.a.marker([e.d_carte.lat,e.d_carte.lng]).addTo(e.layerGroup),e.getLocation(t.latlng)}));case 5:case"end":return t.stop()}}),t)})))()},getLocation:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,i,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.d_carte.region="",t.d_carte.pays="",t.d_carte.ville="",t.d_carte.quartier="",r.prev=1,r.next=4,t.$axios.$get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.lng,",").concat(e.lat,".json?access_token=").concat(t.accessToken));case 4:n=r.sent,console.log(n),l=n.features,i=1;case 8:if(!(i<l.length)){r.next=25;break}c=l[i].id.split(".")[0],r.t0=c,r.next="locality"===r.t0?13:"place"===r.t0?15:"region"===r.t0?17:"country"===r.t0?19:21;break;case 13:return t.d_carte.quartier=l[i].text,r.abrupt("break",22);case 15:return t.d_carte.ville=l[i].text,r.abrupt("break",22);case 17:return t.d_carte.region=l[i].text,r.abrupt("break",22);case 19:return t.d_carte.pays=l[i].text,r.abrupt("break",22);case 21:return r.abrupt("break",22);case 22:i++,r.next=8;break;case 25:r.next=30;break;case 27:r.prev=27,r.t1=r.catch(1),console.log(r.t1);case 30:case"end":return r.stop()}}),r,null,[[1,27]])})))()},setDataCarte:function(){this.$emit("validate",this.d_carte),this.$emit("close")}},mounted:function(){this.initMap()}}),d=(r(368),r(7)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-screen h-screen bg-white bg-opacity-70 fixed top-0 left-0 flex justify-center items-center",staticStyle:{"z-index":"1010"}},[r("div",{staticClass:"rounded-lg flex bg-gray-100",staticStyle:{height:"80%",width:"80%"}},[r("button",{staticClass:"absolute top-5 right-5 bt-prev-next",on:{click:function(t){return e.$emit("close")}}},[r("span",{staticClass:"material-icons"},[e._v(" clear ")])]),e._v(" "),r("div",{staticStyle:{height:"100%",width:"70%","border-radius":"8px"},attrs:{id:"map"}}),e._v(" "),r("div",{staticClass:"flex flex-col p-5 ",staticStyle:{width:"30%"}},[e._l(e.d,(function(p,i){return r("div",{key:i,staticClass:"flex flex-col"},[r("span",{staticClass:"text-sm font-bold"},[e._v(" "+e._s(p)+" ")]),e._v(" "),r("span",{staticClass:"text-xl"},[e._v(" "+e._s(e.d_carte[p])+" ")])])})),e._v(" "),r("div",{staticClass:"p-5 flex justify-end w-full"},[r("button",{staticClass:"flex justify-center items-center bt",on:{click:e.setDataCarte}},[r("span",{staticClass:"text-sm"},[e._v(" Valider ")]),e._v(" "),r("span",{staticClass:"material-icons"},[e._v(" navigate_next ")])])])],2)])])}),[],!1,null,"1beb3618",null);t.default=component.exports},415:function(e,t,r){"use strict";r.r(t);var n=r(3),l=(r(25),{data:function(){return{qplaces:[]}},methods:{getList:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/p/panel/qplace/all");case 3:(r=t.sent).status?e.qplaces=r.qplaces:e.showNotif("Erreur",r.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},delQplace:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.$delete("api/p/panel/qplace/"+e);case 3:(n=r.sent).status?t.getList():t.showNotif("Erreur",n.message,!0),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.showErrorConnexion();case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},mounted:function(){this.getList()}}),c=r(7),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{},[e.qplaces.length<=0?r("div",{staticClass:"text-sm p-5 flex justify-center items-center"},[r("span",[e._v(" Aucune demande pour le moment ")])]):e._e(),e._v(" "),e._l(e.qplaces,(function(t,i){return r("div",{key:t.qplace_id,staticClass:"flex relative bg-gray-100 flex-col p-2 border mb-2 rounded-lg hover:border-blue-600 duration-300"},[r("div",{staticClass:"flex flex-col"},[r("span",{staticClass:"font-bold text-blue-600 "},[e._v(" "+e._s(t.qplace_desc_lieu)+" ")]),e._v(" "),r("span",{staticClass:"text-xs border-l-2 px-2  whitespace-pre-wrap italic text-gray-500"},[e._v(e._s(t.qplace_desc?t.qplace_desc:"Aucune description"))]),e._v(" "),r("span",{staticClass:"text-xs text-gray-500"},[e._v("Ajouté le, "),r("strong",[e._v(" "+e._s(e.dateToText(t.qplace_created_at))+" ")])])]),e._v(" "),r("button",{staticClass:"bt-prev-next text-xs absolute top-2 right-2",on:{click:function(r){return e.delQplace(t.qplace_id)}}},[r("span",{staticClass:"material-icons"},[e._v(" clear ")])])])}))],2)])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-2"},[r("span",{staticClass:"text-xl"},[e._v(" Liste de vos demandes d'emplacements ")])])}],!1,null,null,null);t.default=component.exports},416:function(e,t,r){"use strict";r.r(t);var n=r(3),l=(r(25),r(37),r(156),r(61),{data:function(){return{qplace:{},tmp_list_image:[],on_load:!1,show_carte:!1}},methods:{setLieu:function(p){this.qplace.lieu_pays=p.pays,this.qplace.lieu_region=p.region,this.qplace.lieu_quartier=p.quartier,this.qplace.lieu_ville=p.ville,this.qplace.lieu_lat=p.lat,this.qplace.lieu_lng=p.lng},add_im:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.on_load=!0,r.next=3,t.up_image(e);case 3:(n=r.sent).status&&(t.tmp_list_image.push({dimension_min_file:n.opt.dim_min_file,dimension_file:n.opt.dim_file,file_id:n.file_id,name_file:n.opt.name,name_min_file:n.opt.name+"_min"}),t.on_load=!1);case 5:case"end":return r.stop()}}),r)})))()},del_im_a:function(i){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.tmp_list_image[i].file_id,t.next=3,e.delete_ims_global(r);case 3:t.sent&&e.tmp_list_image.splice(i,1);case 5:case"end":return t.stop()}}),t)})))()},validatePlace:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.tmp_list_image.map((function(e){return e.file_id})),t.next=4,e.$axios.$post("api/p/panel/qplace/param",{qplace:e.qplace,ims:r});case 4:(n=t.sent).status?e.$emit("close"):e.showNotif("Erreur",n.message,!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.showErrorConnexion();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),c=r(7),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"mt-5"},[r("div",{staticClass:"flex  flex-col"},[r("div",{staticClass:"mb-3 mx-2 "},[e._m(0),e._v(" "),r("div",{staticClass:"flex flex-wrap items-end"},[r("custom-input",{staticClass:"w-full",attrs:{label:"Description du lieu ..."},model:{value:e.qplace.desc_lieu,callback:function(t){e.$set(e.qplace,"desc_lieu",t)},expression:"qplace.desc_lieu"}})],1)]),e._v(" "),r("div",{},[r("div",{staticClass:"mb-3 mx-2  "},[e._m(1),e._v(" "),r("div",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.qplace.desc,expression:"qplace.desc"}],staticClass:"input-alt w-full text-sm",attrs:{rows:"5",placeholder:"Détails du lieu ...",cols:""},domProps:{value:e.qplace.desc},on:{input:function(t){t.target.composing||e.$set(e.qplace,"desc",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"mb-3 mx-2  "},[e._m(2),e._v(" "),r("div",{staticClass:"flex"},[e._l(e.tmp_list_image,(function(t,i){return r("div",{key:t.name_file,staticClass:"relative w-28 h-28 rounded-lg flex justify-center items-center overflow-hidden bg-gray-50 border hover:border-indigo-600 m-2"},[t.name_file?r("img",{staticStyle:{width:"112px"},attrs:{src:"/api/p/media/"+t.name_file+"_min",alt:"",srcset:""}}):r("span",{staticClass:"text-6xl  material-icons"},[e._v(" perm_media ")]),e._v(" "),r("button",{staticClass:" top-1 right-1 absolute bt-prev-next text-xs",on:{click:function(t){return e.del_im_a(i)}}},[r("span",{staticClass:"material-icons"},[e._v(" clear ")])])])})),e._v(" "),e.on_load?r("div",{staticClass:"cursor-pointer  flex-col  w-28 h-28 rounded-lg flex justify-center items-center overflow-hidden bg-gray-50 border hover:border-indigo-600 m-2"},[r("span",{staticClass:"material-icons text-6xl animate-pulse text-indigo-500"},[e._v(" hourglass_bottom ")]),e._v(" "),r("span",{staticClass:" text-indigo-500 text-xs"},[e._v("Upload ...")])]):e._e(),e._v(" "),e._m(3),e._v(" "),r("input",{staticClass:"hidden",attrs:{accept:"image/*",id:"im",type:"file"},on:{change:function(t){return e.add_im(t)}}})],2)])])]),e._v(" "),r("div",{staticClass:"p-2 flex border-t"},[r("span",{staticClass:"flex-grow"}),e._v(" "),r("button",{staticClass:"bt text-sm",on:{click:e.validatePlace}},[e._v(" Valider ")])])]),e._v(" "),r("client-only",[e.show_carte?r("insert-by-carte",{on:{close:function(t){e.show_carte=!1},validate:e.setLieu}}):e._e()],1)],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex text-xs justify-center items-center font-bold py-2 mb-1 rounded-lg text-gray-100"},[r("span",{staticClass:"text-gray-600 flex-grow"},[e._v(" Dîtes-nous un peu plus sur le lieu. ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex text-xs justify-center items-center font-bold py-2 mb-1 rounded-lg text-gray-100"},[r("span",{staticClass:"text-gray-600 flex-grow"},[e._v(" Plus de détails sur le lieu  ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex text-xs justify-center items-center font-bold py-2 mb-1 rounded-lg text-gray-100"},[r("span",{staticClass:"text-gray-600 flex-grow"},[e._v(" Images  ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:" cursor-pointer w-28 h-28 rounded-lg flex justify-center items-center overflow-hidden bg-gray-50 border hover:border-indigo-600 m-2",attrs:{for:"im"}},[r("span",{staticClass:"material-icons text-6xl"},[e._v(" add ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:r(358).default,InsertByCarte:r(371).default})},493:function(e,t,r){"use strict";r.r(t);var n={data:function(){return{cur_view:"list"}},methods:{}},l=r(7),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-2"},[e._m(0),e._v(" "),r("div",[r("div",{staticClass:"p-2"},[r("span",{staticClass:"p-2  cursor-pointer ",class:{"border-b-2 border-blue-500":"list"==e.cur_view},on:{click:function(t){e.cur_view="list"}}},[e._v(" Liste ")]),e._v(" "),r("span",{staticClass:"p-2  cursor-pointer ",class:{"border-b-2 border-blue-500":"add"==e.cur_view},on:{click:function(t){e.cur_view="add"}}},[e._v(" Ajouter ")])]),e._v(" "),"list"==e.cur_view?r("list-query-place-ann"):e._e(),e._v(" "),"add"==e.cur_view?r("add-query-place",{on:{close:function(t){e.cur_view="list"}}}):e._e()],1)])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-2 border-b"},[r("div",[r("span",{staticClass:"font-bold "},[e._v(" Demande d'emplacements ")])]),e._v(" "),r("span",{staticClass:"text-sm"},[e._v(" Ici, vous pouvez ajouter des panneaux que vous voulez intégrer à la plateforme ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{ListQueryPlaceAnn:r(415).default,AddQueryPlace:r(416).default})}}]);
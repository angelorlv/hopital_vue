(window.webpackJsonp=window.webpackJsonp||[]).push([[90,23,25,55,63],{358:function(e,t,n){"use strict";n.r(t);var r={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},l=n(7),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},380:function(e,t,n){"use strict";n.r(t);var r=n(3),l=(n(25),n(61),n(363)),o=n.n(l),c={props:["coord","load_data"],watch:{load_data:function(a){a&&this.initMap()}},data:function(){return{mymap:{},accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",layerGroup:{}}},methods:{initMap:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.mymap=o.a.map("map",{zoomControl:!1}).setView(e.coord,19),o.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(e.mymap),o.a.marker(e.coord).addTo(e.mymap);case 3:case"end":return t.stop()}}),t)})))()}},mounted:function(){}},d=n(7),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"400px",width:"100%"}},[t("div",{staticStyle:{height:"100%",width:"100%","border-radius":"8px"},attrs:{id:"map"}})])}],!1,null,null,null);t.default=component.exports},386:function(e,t,n){"use strict";n.r(t);var r=n(3),l=(n(25),{props:["panel"],data:function(){return{m_style:{},pan_reserve:{date_debut:new Date,date_fin:"",pan_id:null,service_id:null,month:1,tarif_id:null},no_request:!0,on_request:!1,end_request:!1}},methods:{init:function(){this.m_style={width:"500px"},this.pan_reserve.pan_id=this.$route.params.id},validateLocation:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.on_request=!0,t.next=4,e.$axios.$post("api/a/annonceur/reservation",e.pan_reserve);case 4:(n=t.sent).status?(e.no_request=!1,e.end_request=!0):e.showNotif("Erreur",n.message,!0),e.on_request=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}},mounted:function(){this.init()}}),o=n(7),component=Object(o.a)(l,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"fixed h-screen w-screen bg-white bg-opacity-80 flex justify-center items-center top-0 left-0"},[r("div",{staticClass:"bg-white border rounded-lg shadow-lg",style:t.m_style},[r("div",{staticClass:"text-sm p-2 border-b flex items-center"},[r("span",{},[t._v("Réservation pour le panneau : "+t._s(t.panel.pan_publoc_ref))]),t._v(" "),r("span",{staticClass:"flex-grow"}),t._v(" "),r("button",{staticClass:"bt-prev-next",on:{click:function(e){return t.$emit("close")}}},[r("span",{staticClass:"material-icons"},[t._v("clear")])])]),t._v(" "),t.end_request?r("div",{staticClass:"p-2 text-sm flex items-center justify-center"},[r("span",{staticClass:"m-1 p-2 rounded border text-indigo-600 bg-blue-200 bg-opacity-50 material-icons"},[t._v("send")]),t._v(" "),r("span",{staticClass:"text-center"},[t._v("Votre réservation a été envoyé. Vous recevrez une notification quand il y aura une réponse.")])]):r("div",{},[r("div",{staticClass:"p-2 flex items-end border-b"},[r("div",{staticClass:"m-1"},[r("custom-input",{attrs:{type:"date",label:"Date de début prévisionnelle ..."},model:{value:t.pan_reserve.date_debut,callback:function(e){t.$set(t.pan_reserve,"date_debut",e)},expression:"pan_reserve.date_debut"}})],1),t._v(" "),r("div",{staticClass:"m-1"},[r("custom-input",{staticClass:"mr-2",attrs:{type:"number",label:"Pour combien de mois ... ?"},model:{value:t.pan_reserve.month,callback:function(e){t.$set(t.pan_reserve,"month",e)},expression:"pan_reserve.month"}})],1)]),t._v(" "),r("div",{staticClass:"p-2 border-b flex"},[r("div",{staticClass:"flex flex-col mb-1"},[r("span",{staticClass:"text-sm text-gray-500"},[t._v("Date de début")]),t._v(" "),""!=t.pan_reserve.date_debut?r("span",{},[t._v(" "+t._s(t.dateToText(t.pan_reserve.date_debut))+" ")]):t._e()]),t._v(" "),r("div",{staticClass:"flex flex-col mb-1"},[r("span",{staticClass:"text-sm text-gray-500"},[t._v("Date de Fin prévisionelle ")]),t._v(" "),""!=t.pan_reserve.date_debut?r("span",{},[t._v(" "+t._s((e=new Date(t.pan_reserve.date_debut),t.dateToText(e.setMonth(e.getMonth()+parseInt(t.pan_reserve.month)))))+"  ")]):t._e()]),t._v(" "),r("div",{staticClass:"flex flex-col mb-1"},[r("span",{staticClass:"text-sm text-gray-500"},[t._v("Nombre de mois")]),t._v(" "),r("span",{},[t._v(" "+t._s(t.pan_reserve.month)+" ")])])]),t._v(" "),""!=t.pan_reserve.date_debut&&t.pan_reserve.month>0?r("div",{staticClass:"flex p-2"},[r("button",{staticClass:" text-sm",class:t.on_request?"bt-load":"bt",on:{click:t.validateLocation}},[t._v("Valider la réservation")])]):t._e()])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})},387:function(e,t,n){"use strict";n.r(t);var r=n(3),l=(n(25),{props:["panel"],data:function(){return{m_style:{},devis:{pan_id:null,ann_id:null,date_debut:new Date,month:1},no_request:!0,on_request:!1,end_request:!1}},methods:{init:function(){this.m_style={width:"500px"},this.devis.pan_id=this.$route.params.id},validateLocation:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.on_request=!0,t.next=4,e.$axios.$post("api/a/annonceur/devis",e.devis);case 4:(n=t.sent).status?(e.no_request=!1,e.end_request=!0):e.showNotif("Erreur",n.message,!0),e.on_request=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},validateDemandeDevis:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.on_request=!0,t.next=4,e.$axios.$post("api/a/annonceur/devis",e.devis);case 4:(n=t.sent).status?(e.no_request=!1,e.end_request=!0):e.showNotif("Erreur",n.message,!0),e.on_request=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}},mounted:function(){this.init()}}),o=n(7),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fixed h-screen w-screen bg-white bg-opacity-80 flex justify-center items-center top-0 left-0"},[n("div",{staticClass:"bg-white border rounded-lg shadow-lg",style:e.m_style},[n("div",{staticClass:"text-sm p-2 border-b flex items-center"},[n("span",{},[e._v("Demande de devis pour le panneau : "+e._s(e.panel.pan_publoc_ref))]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(t){return e.$emit("close")}}},[n("span",{staticClass:"material-icons"},[e._v("clear")])])]),e._v(" "),e.end_request?n("div",{staticClass:"p-2 text-sm flex items-center justify-center"},[n("span",{staticClass:"m-1 p-2 rounded border text-indigo-600 bg-blue-200 bg-opacity-50 material-icons"},[e._v("send")]),e._v(" "),n("span",{staticClass:"text-center"},[e._v("Votre demande a été envoyé. Vous recevrez une notification quand il y aura une réponse.")])]):n("div",{},[n("div",{staticClass:"p-2 flex items-end border-b"},[n("div",{staticClass:"m-1"},[n("custom-input",{attrs:{type:"date",label:"Date de début prévisionnelle ..."},model:{value:e.devis.date_debut,callback:function(t){e.$set(e.devis,"date_debut",t)},expression:"devis.date_debut"}})],1),e._v(" "),n("div",{staticClass:"m-1"},[n("custom-input",{staticClass:"mr-2",attrs:{type:"number",label:"Pour combien de mois ... ?"},model:{value:e.devis.month,callback:function(t){e.$set(e.devis,"month",t)},expression:"devis.month"}})],1)]),e._v(" "),n("div",{staticClass:"p-2 border-b flex"},[n("div",{staticClass:"flex flex-col mb-1"},[n("span",{staticClass:"text-sm text-gray-500"},[e._v("Date de début")]),e._v(" "),""!=e.devis.date_debut?n("span",{},[e._v(" "+e._s(e.dateToText(e.devis.date_debut))+" ")]):e._e()]),e._v(" "),n("div",{staticClass:"flex flex-col mb-1"},[n("span",{staticClass:"text-sm text-gray-500"},[e._v("Date de Fin prévisionelle ")]),e._v(" "),""!=e.devis.date_debut?n("span",{},[e._v("  "+e._s(e.dateToText(e.addMonthToDate(e.devis.date_debut,e.devis.month)))+" ")]):e._e()]),e._v(" "),n("div",{staticClass:"flex flex-col mb-1"},[n("span",{staticClass:"text-sm text-gray-500"},[e._v("Nombre de mois")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.devis.month)+" ")])])]),e._v(" "),""!=e.devis.date_debut&&e.devis.month>0?n("div",{staticClass:"flex p-2"},[n("button",{staticClass:" text-sm",class:e.on_request?"bt-load":"bt",on:{click:e.validateDemandeDevis}},[e._v("Valider la demande")])]):e._e()])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})},501:function(e,t,n){"use strict";n.r(t);var r=n(3),l=(n(25),n(21),n(99),{data:function(){return{error_on_page:!1,panel:{},images:[],panel_vue_style:{},loaded:!1,img_selected:null,im_container_size:{w:700,h:400},w_window:0,h_window:0,main_container_style:{},im_container_style:{},onload:!1,on_reserve:!1,on_devis:!1,info:null}},computed:{im_style:function(){if(!this.img_selected.dimension_file)return{};var e,t=this.img_selected.dimension_file.split(","),n=t.w,r=t.h;return e=this.im_container_size.h,{width:n*(this.im_container_size.h/r)+"px",height:e+"px"}}},methods:{getPanel:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/p/panel/"+e.$route.params.id);case 3:(n=t.sent).status?(e.panel=n.panel.panel,e.images=n.panel.images,n.info&&(e.info=n.info),e.images.length>0&&(e.img_selected=e.images[0]),e.onload=!0):e.error_on_page=!0,e.loaded=!0,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.error_on_page=!0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},initStyle:function(){this.panel_vue_style={width:"600px"}},connectToReserve:function(){this.$router.push({name:"login",query:{next:"/a/reservation/p/"+this.$route.params.id}})},init:function(){this.im_container_style={width:this.im_container_size.w+"px",height:this.im_container_size.h+"px"},this.h_window=window.innerHeight}},mounted:function(){this.initStyle(),this.getPanel(),this.init()}}),o=n(7),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[e.error_on_page?n("div",{staticClass:"w-full h-screen flex flex-col justify-center items-center"},[n("div",{staticClass:"flex flex-col justify-center items-center p-5 rounded border "},[n("span",{},[e._v("Erreur pendant l'affichage de la Page")]),e._v(" "),n("span",{staticClass:"text-indigo-600 font-bold cursor-pointer",on:{click:function(t){return e.$router.push("/")}}},[e._v(" Retour à l'accueil ")])])]):n("div",{staticClass:"flex bg-white"},[n("div",{staticClass:"flex-grow flex flex-col items-center justify-center"},[n("div",{staticClass:"p-2"},[e._m(0),e._v(" "),n("div",{staticClass:"border rounded-lg flex justify-center items-center",style:e.im_container_style},[e.onload&&e.img_selected?n("img",{staticClass:"rounded-lg",style:e.im_style,attrs:{src:"/api/p/media/"+e.img_selected.name_file+" ",alt:"",srcset:""}}):e._e(),e._v(" "),e.img_selected?e._e():n("div",{staticClass:"w-full h-full flex justify-center items-center flex-col"},[n("span",{staticClass:" text-9xl material-icons"},[e._v(" perm_media ")]),e._v(" "),n("span",{staticClass:"text-xl"},[e._v(" Aucune photo Disponible pour ce Panneau ")])])]),e._v(" "),e.images.length>0?n("div",{staticClass:"flex"},e._l(e.images,(function(t){return n("div",{key:t.name_file,staticClass:"flex h-16 m-1 border-2 cursor-pointer  border-gray-300 rounded-lg relative",on:{click:function(n){e.img_selected=t}}},[n("img",{staticClass:" rounded-lg",attrs:{src:"/api/p/media/"+t.name_min_file,loading:"lazy",crossorigin:"anonymous"}}),e._v(" "),e.img_selected.file_id==t.file_id?n("span",{staticClass:"material-icons text-indigo-600 absolute top-0 right-0"},[e._v(" check_circle ")]):e._e()])})),0):e._e()]),e._v(" "),n("div",{staticClass:"my-5",style:{width:e.im_container_size.w+"px"}},[e._m(1),e._v(" "),n("client-only",[n("view-in-carte",{attrs:{coord:[e.panel.lieu_lat,e.panel.lieu_lng],load_data:e.loaded}})],1)],1)]),e._v(" "),n("div",{staticClass:"border-l p-2",staticStyle:{width:"400px"}},[n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"p-3 flex flex-col text-white border rounded-lg bg-gradient-to-br from-indigo-600 to-pink-600"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"flex flex-col mb-2"},[n("span",{staticClass:"text-gray-300"},[e._v(" Référence ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.pan_publoc_ref)+" ")])]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),e.info?n("div",{staticClass:"ml-2 flex flex-col"},[n("span",{staticClass:"text-gray-300"},[e._v(" Référence Régisseur ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.pan_ref)+" ")])]):e._e()]),e._v(" "),n("div",{staticClass:"flex flex-col mb-2"},[n("span",{staticClass:"text-gray-300"},[e._v(" Lieu ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.lieu_label)+" ")])]),e._v(" "),n("div",{staticClass:"flex mb-2"},[n("div",{staticClass:"flex flex-col mr-2"},[n("span",{staticClass:"text-gray-300"},[e._v(" Ville ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.lieu_ville)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col mr-2"},[n("span",{staticClass:"text-gray-300"},[e._v(" Région ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.lieu_region)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col mr-2"},[n("span",{staticClass:"text-gray-300"},[e._v(" Quartier ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.lieu_quartier)+" ")])])]),e._v(" "),n("div",{staticClass:"flex mb-2"},[n("div",{staticClass:"flex flex-col mr-2"},[n("span",{staticClass:"text-gray-300"},[e._v(" Catégorie ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.parent_cat_label)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col mr-2"},[n("span",{staticClass:"text-gray-300"},[e._v(" Format ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.panel.cat_label)+" ")])])]),e._v(" "),"ann"==e.$store.state.profil.pr_type?n("div",{staticClass:"flex"},[n("button",{staticClass:"rounded-full flex justify-center items-center bg-gray-50 bg-opacity-10 p-2 duration-300 hover:bg-opacity-20",on:{click:function(){e.on_reserve=!0}}},[n("span",{staticClass:"mr-2"},[e._v("Réserver")]),e._v(" "),n("span",{staticClass:"material-icons"},[e._v(" arrow_circle_right ")])]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"rounded-full flex justify-center items-center bg-indigo-300 bg-opacity-10 p-2 duration-300 hover:bg-opacity-20"},[n("span",{on:{click:function(t){e.on_devis=!0}}},[e._v("Demander un dévis")]),e._v(" "),n("span",{staticClass:"material-icons"},[e._v(" calculate ")])])]):e._e(),e._v(" "),e.$store.state.status.connect?e._e():n("div",{},[n("button",{staticClass:"rounded-full flex justify-center items-center bg-gray-50 bg-opacity-10 p-2 duration-300 hover:bg-opacity-20"},[n("span",{staticClass:"mr-2",on:{click:function(){var t="/panneau/"+e.$route.params.id+"?a=reserve";e.$router.push("/login?next="+t)}}},[e._v("Connecter vous pour réserver")]),e._v(" "),n("span",{staticClass:"material-icons"},[e._v(" arrow_circle_right ")])])])]),e._v(" "),e.panel.pan_view_vers?n("div",{staticClass:"mt-2 p-2 rounded-lg text-sm border"},[n("span",{staticClass:"text-sm font-bold border-b flex"},[e._v(" Vue vers ")]),e._v(" "),n("p",{staticClass:"pt-2"},[e._v(" "+e._s(e.panel.pan_view_vers)+" ")])]):e._e(),e._v(" "),n("div",{staticClass:"mt-2 p-2 rounded-lg text-sm border"},[n("span",{},[e._v(" Dérnière mise à jour le "),n("strong",[e._v(" "+e._s(e.dateToText(e.panel.pan_update_at))+" ")])])]),e._v(" "),e.info?n("div",{staticClass:" bg-gradient-to-br text-white from-gray-800 to-gray-700 mt-2 rounded-lg border p-2 flex flex-col"},[n("div",{staticClass:"flex "},[n("div",{staticClass:"flex flex-col"},[n("span",{staticClass:"text-xs"},[e._v(" Régisseur")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.info.reg_label)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col ml-2"},[n("span",{staticClass:"text-xs"},[e._v(" Téléphone ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.info.soc_pr_tel?e.info.soc_pr_tel:"-")+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col ml-2"},[n("span",{staticClass:"text-xs"},[e._v(" Email ")]),e._v(" "),n("span",{},[e._v(" "+e._s(e.info.soc_pr_email)+" fqsdfqsdfqsd ")])])]),e._v(" "),n("div",{staticClass:"flex justify-center items-center p-2"},[n("div",{staticClass:" w-28 h-28 rounded-full flex justify-center items-center overflow-hidden bg-gray-500"},[e.info.name_file?n("img",{staticStyle:{width:"112px"},attrs:{src:"/api/p/media/"+e.info.name_file+"_min",alt:"",srcset:""}}):n("span",{staticClass:"text-6xl  material-icons"},[e._v(" perm_media ")])])])]):e._e()])])]),e._v(" "),e.on_reserve?n("reserve-panel",{attrs:{panel:e.panel},on:{close:function(){e.on_reserve=!1}}}):e._e(),e._v(" "),e.on_devis?n("devis-panel",{attrs:{panel:e.panel},on:{close:function(t){e.on_devis=!1}}}):e._e()],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 border-b text-xl  mb-5 flex"},[n("span",{staticClass:"material-icons"},[e._v(" collections ")]),e._v(" "),n("span",{staticClass:"ml-5"},[e._v(" Les photos ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 border-b text-xl  mb-5 flex"},[n("span",{staticClass:"material-icons"},[e._v(" my_location ")]),e._v(" "),n("span",{staticClass:"ml-5"},[e._v(" Carte ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{ViewInCarte:n(380).default,ReservePanel:n(386).default,DevisPanel:n(387).default})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[14,23],{358:function(e,t,n){"use strict";n.r(t);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},r=n(7),component=Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},426:function(e,t,n){"use strict";n.r(t);var l=n(3),r=(n(25),{props:["pans","pans_id"],watch:{agent_model_search:function(a){a&&this.getAgent()}},data:function(){return{view_list_panel:!1,in_pan_is_in_location:!1,loc:{},ann_selected:null,ann_model_search:"",in_select_ann:!1,in_select_agent:!1,agent_model_search:"",agent_selected:null,agent:[],panel_post:[],ann:[],nullReg:!1}},methods:{init:function(){},check_in_location:function(){for(var e=0,i=0;i<this.pans.length;i++)if(-1!=(e=this.pans_id.indexOf(this.pans[i].pan_id))&&this.panel_post.push({pan_id:this.pans[i].pan_id,reg_id:this.pans[i].reg_id}),-1!=e&&"3"==this.pans[i].pan_state){this.in_pan_is_in_location=!0;break}},getAgent:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/mobile/agt",{params:{search:e.agent_model_search}});case 3:(n=t.sent).status?e.agent=n.agent:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validateAssignAgent:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.agent_selected){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$axios.$post("api/a/mobile/agt/assign/panel",{pans_id:e.pans_id,agt:e.agent_selected,nullReg:e.nullReg});case 5:(n=t.sent).status?e.$emit("validate"):e.showNotif("Erreur",n.message,!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},mounted:function(){}}),c=n(7),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center top-0 left-0 fixed w-screen h-screen bg-white bg-opacity-75"},[n("div",{staticClass:"bg-white rounded-lg border shadow-lg ",style:{width:"500px"}},[n("div",{staticClass:"p-2 flex border-b items-center"},[n("span",[e._v(" Assigner "),n("strong",[e._v(" "+e._s(e.pans_id.length)+" ")]),e._v(" panneaux à un agent ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm",on:{click:function(t){return e.$emit("close")}}},[e._v(" Retour ")])]),e._v(" "),n("div",{staticClass:"flex flex-wrap items-end p-2 text-xs "},[n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-xs text-indigo-600 font-bold"},[e._v(" Agent ")]),e._v(" "),n("span",{staticClass:"p-2 rounded-lg border cursor-pointer",on:{click:function(){e.in_select_agent=!0}}},[e._v(" "+e._s(e.agent_selected?e.agent_selected.pr_login:"-")+" ")]),e._v(" "),e.in_select_agent?n("div",{staticClass:"z-50 w-screen h-screen absolute top-0 left-0 flex justify-center items-center ",on:{click:function(t){e.in_select_ann=!1}}},[n("div",{staticClass:"shadow-lg bg-white rounded-lg border",staticStyle:{width:"250px"},on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"p-1 border-b"},[n("custom-input",{attrs:{label:"Login de l'agent ..."},model:{value:e.agent_model_search,callback:function(t){e.agent_model_search=t},expression:"agent_model_search"}})],1),e._v(" "),n("div",{staticClass:"flex flex-col overflow-auto",staticStyle:{"max-height":"200px",height:"200px"}},e._l(e.agent,(function(a){return n("span",{key:a.pr_id,staticClass:"p-2 border-b cursor-pointer hover:bg-gray-100",on:{click:function(){e.agent_selected=a,e.in_select_agent=!1}}},[e._v(" \n                                "+e._s(a.pr_login)+"\n                            ")])})),0)])]):e._e()])]),e._v(" "),n("div",{staticClass:"flex justify-center items-center p-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.nullReg,expression:"nullReg"}],staticClass:"mx-2",attrs:{type:"checkbox",id:"nullReg"},domProps:{checked:Array.isArray(e.nullReg)?e._i(e.nullReg,null)>-1:e.nullReg},on:{change:function(t){var n=e.nullReg,l=t.target,r=!!l.checked;if(Array.isArray(n)){var c=e._i(n,null);l.checked?c<0&&(e.nullReg=n.concat([null])):c>-1&&(e.nullReg=n.slice(0,c).concat(n.slice(c+1)))}else e.nullReg=r}}}),e._v(" "),n("label",{staticClass:"mx-2",attrs:{for:"nullReg"}},[e._v(" Effacer le régisseur ")])]),e._v(" "),e.in_pan_is_in_location?e._e():n("div",{staticClass:"flex p-2 border-t"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt text-xs",on:{click:e.validateAssignAgent}},[e._v("Valider")])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})}}]);
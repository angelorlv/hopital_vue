(window.webpackJsonp=window.webpackJsonp||[]).push([[137,23],{358:function(e,t,n){"use strict";n.r(t);var r={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},l=n(7),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},584:function(e,t,n){"use strict";n.r(t);var r=n(3),l=(n(156),n(25),{watch:{q_search:function(a){this.in_search?this.have_to_search=!0:this.searchPanel()}},data:function(){return{in_choose_panel:!1,q_search:"",in_search:!1,have_to_search:!1,panels:[],pan_prises:[],w_slide:250,h_slide:300,nb_slide_to_show:3,to_translate:0,index:0}},computed:{slide_slide_style:function(){return{width:this.w_slide+"px","max-width":this.w_slide+"px",minWidth:this.w_slide+"px",height:this.h_slide+"px",maxHeight:this.h_slide+"px"}},slide_c_style:function(){return{width:this.nb_slide_to_show*this.w_slide+"px"}},slide_style:function(){return{transform:"translateX(".concat(this.to_translate,"px)"),transition:"transform 0.3s"}}},methods:{searchPanel:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.in_search=!0,t.prev=1,t.next=4,e.$axios.$get("api/a/settings/prises/panels",{params:{search:e.q_search}});case 4:n=t.sent,e.in_search=!1,n.status?(e.panels=n.panels,e.have_to_search&&(e.have_to_search=!1,e.searchPanel())):e.showNotif("Erreur",n.message,!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},addToPrises:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$post("api/a/settings/prises",{id:e});case 3:(r=n.sent).status?(t.searchPanel(),t.getPanPrises()):t.showNotif("Erreur",r.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},delPrises:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$delete("api/a/settings/prises/"+e);case 3:(r=n.sent).status?(t.in_choose_panel&&t.searchPanel(),t.getPanPrises()):t.showNotif("Erreur",r.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getPanPrises:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/settings/prises");case 3:(n=t.sent).status?e.pan_prises=n.pan_prises:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},movePrises:function(e,i){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.pan_prises[i],l={},"up"==e?(l=t.pan_prises[i-1],t.pan_prises.splice(i,1,l),t.pan_prises.splice(i-1,1,r)):"down"==e&&(l=t.pan_prises[i+1],t.pan_prises.splice(i,1,l),t.pan_prises.splice(i+1,1,r));case 4:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getPanPrises()}}),o=n(7),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 "},[n("div",{staticClass:"m-2 border rounded-lg p-2"},[n("div",{staticClass:"flex"},[e.in_choose_panel?n("div",{},[n("button",{staticClass:"bt-back text-sm",on:{click:function(){e.in_choose_panel=!1}}},[e._v("Annuler")])]):n("div",{},[n("button",{staticClass:"bt text-sm",on:{click:function(t){e.in_choose_panel=!0}}},[e._v("Ajouter un panneau dans le slide")])])]),e._v(" "),e.in_choose_panel?n("div",{staticClass:"mt-2 bg-gray-50 border rounded-lg"},[n("custom-input",{staticClass:"m-1",attrs:{label:"Rechercher par nom régisseur, annonceur, ville, "},model:{value:e.q_search,callback:function(t){e.q_search=t},expression:"q_search"}}),e._v(" "),n("div",{staticClass:"overflow-auto p-2 flex flex-col",staticStyle:{"max-height":"300px"}},[e.in_search?n("div",{staticClass:"flex p-2 justify-center items-center"},[n("span",{staticClass:"text-sm"},[e._v(" Recherche ... ")])]):e._e(),e._v(" "),e._l(e.panels,(function(p){return n("div",{key:p.pan_id,staticClass:"border rounded-lg mb-2 flex items-center hover:bg-gray-100"},[n("div",{}),e._v(" "),n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-sm font-bold"},[e._v(" "+e._s(p.pan_ref)+" ")]),e._v(" "),n("span",{staticClass:"text-xs"},[e._v(" "+e._s(p.lieu_label)+" ")])]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"text-sm bt",on:{click:function(){e.addToPrises(p.pan_id)}}},[e._v("Ajouter")])])}))],2)],1):e._e()]),e._v(" "),n("div",{staticClass:"p-2"},[n("span",{staticClass:"text-sm"},[e._v("Liste des panneaux prisés par rang")]),e._v(" "),n("div",{staticClass:"overflow-auto p-2 flex flex-col rounded-lg  border",staticStyle:{"max-height":"300px"}},[e.pan_prises.length<=0?n("div",{staticClass:"flex justify-center items-center w-full"},[n("span",{staticClass:"text-xs"},[e._v(" Pubprisés vide ")])]):n("div",{},e._l(e.pan_prises,(function(t,i){return n("div",{key:t.pan_pr,staticClass:"flex items-center p-2 bg-gray-50 border rounded-xl mb-1"},[n("div",{staticClass:"flex w-8 justify-center mr-2 items-center"},[n("span",{staticClass:"p-2 rounded-full flex justify-center items-center bg-white w-8 h-8 "},[e._v(" "+e._s(t.pan_pr_rang)+" ")])]),e._v(" "),n("div",{staticClass:"flex flex-col w-14 mr-2"},[0!=i?n("button",{staticClass:"flex justify-center border mb-2 hover:bg-gray-100 items-center rounded-lg",on:{click:function(t){return e.movePrises("up",i)}}},[n("span",{staticClass:"material-icons"},[e._v("expand_less")])]):e._e(),e._v(" "),i!=e.pan_prises.length-1?n("button",{staticClass:"flex justify-center border hover:bg-gray-100 items-center rounded-lg",on:{click:function(t){return e.movePrises("down",i)}}},[n("span",{staticClass:"material-icons"},[e._v("expand_more")])]):e._e()]),e._v(" "),n("div",{staticClass:"flex flex-col"},[n("span",{staticClass:"font-bold"},[e._v(" "+e._s(t.pan_ref)+" ")]),e._v(" "),n("span",{staticClass:"text-sm"},[e._v(" "+e._s(t.lieu_label)+" ")])]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(n){return e.delPrises(t.pan_pr)}}},[n("span",{staticClass:"material-icons"},[e._v("clear")])])])})),0)])]),e._v(" "),n("div",{staticClass:"flex flex-col justify-center items-center"},[n("span",{},[e._v("Prévisualisation slide")]),e._v(" "),n("div",{},[n("span",[e._v("to_translate : "+e._s(e.to_translate)+" ")]),e._v(" "),n("span",[e._v(" intex :  "+e._s(e.index)+" ")])]),e._v(" "),n("div",{staticClass:"w-full flex flex-col justify-center items-center my-5"},[e._m(0),e._v(" "),n("div",{staticClass:"relative overflow-hidden  rounded-lg",style:e.slide_c_style},[n("div",{ref:"slide_container ",staticClass:"flex ",style:e.slide_style},e._l(e.pan_prises,(function(t){return n("div",{key:t.pan_id,ref:"slide_content",refInFor:!0,staticClass:"  flex box-border",style:e.slide_slide_style},[n("div",{staticClass:" hover:border-indigo-600 duration-300 cursor-pointer mx-2 border bg-gradient-to-b  from-white to-gray-100 rounded-lg w-full h-full",on:{click:function(n){return e.$router.push("/panneau/"+t.pan_id)}}},[n("div",{staticClass:"flex h-2/3 p-2 box-border rounded-lg"},[t.name_min_file?n("img",{staticClass:"object-cover w-full h-full rounded-lg",attrs:{src:"/api/p/media/"+t.name_min_file+" ",alt:""}}):n("span",{staticClass:"w-full h-full bg-gray-200 rounded-lg"})]),e._v(" "),n("div",{staticClass:"h-1/3 flex flex-col items-center p-2"},[n("span",{staticClass:"font-bold"},[e._v(" "+e._s(t.pan_ref)+" ")]),e._v(" "),n("p",{staticClass:"text-sm"},[e._v("\n                                    "+e._s(t.lieu_label)+"\n                                ")])])])])})),0),e._v(" "),n("button",{staticClass:"absolute top-1/2 left-0 bt-prev-next text-xm",on:{click:function(){e.index--,e.index=e.index<=0?0:e.index;e.nb_slide_to_show,e.pan_prises.length,e.w_slide;var t=e.nb_slide_to_show*e.w_slide*e.index;e.to_translate=-t}}},[n("span",{staticClass:"material-icons"},[e._v(" navigate_before ")])]),e._v(" "),n("button",{staticClass:"absolute top-1/2 right-0 bt-prev-next text-xm",on:{click:function(){e.index++;var t=e.nb_slide_to_show*e.w_slide*e.index;e.index>=Math.ceil(e.pan_prises.length/e.nb_slide_to_show)-1?(e.to_translate=-e.pan_prises.length%e.nb_slide_to_show*e.w_slide,e.index--):e.to_translate=-t}}},[n("span",{staticClass:"material-icons"},[e._v(" navigate_next ")])])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col justify-center items-center mb-5"},[n("span",{staticClass:"text-4xl"},[e._v(" Les Pub'Prisés ")]),e._v(" "),n("span",{staticClass:"w-1/2 bg-indigo-500 h-1 my-2 rounded block"}),e._v(" "),n("span",{staticClass:"text-2xl"},[e._v(" Des emplacements en OR ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})}}]);
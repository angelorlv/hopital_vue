(window.webpackJsonp=window.webpackJsonp||[]).push([[104,23],{358:function(e,t,n){"use strict";n.r(t);var r={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},o=n(7),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},557:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(25),{layout:"espace",data:function(){return{devis_list:[],in_edit_response_id:-1,response_devis:""}},methods:{getDevisList:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/devis");case 3:(n=t.sent).status?e.devis_list=n.devis:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},modifResponse:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$put("api/a/devis/response",e);case 3:(r=n.sent).status?(t.getDevisList(),t.in_edit_response_id=null):t.showNotif("Erreur",r.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},mounted:function(){this.getDevisList()}}),l=n(7),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[e._m(0),e._v(" "),e.devis_list.length>0?n("div",{staticClass:"mt-5 px-2"},e._l(e.devis_list,(function(t){return n("div",{key:t.d_devis_id,staticClass:"border rounded-lg"},[n("div",{staticClass:"flex border-b"},[n("div",{staticClass:"w-16 p-2 border-r flex items-center justify-center"},[t.name_min_file?n("img",{staticClass:"w-full",attrs:{src:"/api/p/media/"+t.name_min_file+" ",alt:"",srcset:""}}):n("span",{staticClass:"material-icons"},[e._v(" image ")])]),e._v(" "),n("div",{staticClass:"p-2 flex flex-col text-sm"},[n("span",{},[e._v(" Demande de devis pour le panneau  \n                        "),n("nuxt-link",{staticClass:"hover:underline text-indigo-500",attrs:{to:"/admin/panneau/"+t.pan_id}},[e._v(" "+e._s(t.pan_ref)+" ")]),e._v(",\n                        par l'annonceur \n                        "),n("nuxt-link",{staticClass:"hover:underline text-indigo-500",attrs:{to:"/admin/annonceur/"+t.ann_id}},[e._v(" "+e._s(t.ann_label)+" ")])],1),e._v(" "),n("span",{},[e._v(" Pour une durée de "),n("strong",[e._v(" "+e._s(t.d_devis_month)+" ")]),e._v(" mois ")]),e._v(" "),n("span",{},[e._v(" Début prévisionnelle le, "),n("strong",[e._v(" "+e._s(e.dateToText(t.d_devis_date_debut))+" ")])])])]),e._v(" "),n("div",{staticClass:"p-2"},[e.in_edit_response_id==t.d_devis_id?n("div",{staticClass:"p-2"},[n("div",{},[n("custom-input",{attrs:{label:"Réponse sur le devis ... "},model:{value:t.d_devis_response,callback:function(n){e.$set(t,"d_devis_response",n)},expression:"dr.d_devis_response"}})],1),e._v(" "),n("div",{staticClass:"flex pt-2"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm mr-2",on:{click:function(){e.in_edit_response_id=-1,t.d_devis_response=""}}},[e._v(" Annuler ")]),e._v(" "),n("button",{staticClass:"bt text-sm",on:{click:function(n){return e.modifResponse(t)}}},[e._v(" Répondre ")])])]):n("div",{staticClass:"py-1"},[null==t.d_devis_response||""==t.d_devis_response.trim()?n("span",{staticClass:"p-2 border rounded-lg bg-gray-50 text-gray-600 text-sm cursor-pointer",on:{click:function(n){e.in_edit_response_id=t.d_devis_id}}},[e._v("Votre réponse ... ")]):n("div",{staticClass:"flex flex-col"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Votre réponse .. ")]),e._v(" "),n("span",{staticClass:"text-sm px-2 "},[e._v(" "+e._s(t.d_devis_response)+" ")])])])])])})),0):e._e()])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 flex items-center h-16 border-b"},[n("span",{staticClass:"text-xl"},[e._v("Demande de devis")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[126,15,23,49,57],{358:function(t,e,n){"use strict";n.r(e);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},c=n(7),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},382:function(t,e,n){"use strict";n.r(e);n(56);var l={props:["is_top"],data:function(){return{open:!1,style:{}}},methods:{delOnBlur:function(){var t=this;this.style.opacity=0,setTimeout((function(){t.open=!1,t.style.opacity=100}),300)},toggleOpen:function(){this.open?this.open=!1:this.open=!0},init:function(){this.style={opacity:100}}},mounted:function(){this.init()}},c=n(7),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-2",staticStyle:{"z-index":"1011"},attrs:{tabindex:"0"}},[n("button",{staticClass:"bt-prev-next",on:{click:t.toggleOpen,blur:t.delOnBlur}},[n("span",{staticClass:"material-icons"},[t._v("more_vert")])]),t._v(" "),t.open?n("div",{staticClass:"absolute text-xs rounded mt-2 w-48 flex py-1 flex-col border right-0 bg-white shadow-lg",class:{"bottom-12":t.is_top},staticStyle:{"z-index":"1011"},style:t.style},[t._t("default")],2):t._e()])}),[],!1,null,null,null);e.default=component.exports},433:function(t,e,n){"use strict";n.r(e);var l=n(3),c=(n(25),{props:["qplace_id"],data:function(){return{qplace:{},image_list:[]}},methods:{getQueryPlace:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/ad/qplace/"+t.qplace_id);case 3:(n=e.sent).status&&(t.qplace=n.qplace,t.image_list=n.im_list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.getQueryPlace()}}),r=n(7),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fixed top-0 left-0 bg-white bg-opacity-90 h-screen w-screen flex justify-center items-center"},[n("div",{staticClass:"border bg-white rounded-lg shadow-lg",staticStyle:{width:"500px"}},[n("div",{staticClass:" border-b flex p-1 items-center "},[n("span",{staticClass:"text-sm"},[t._v(" Détails de l'emplacement ")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"text-sm bt-prev-next",on:{click:function(e){return t.$emit("close")}}},[n("span",{staticClass:"material-icons"},[t._v(" clear ")])])]),t._v(" "),n("div",{staticClass:"text-sm"},[n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"font-bold"},[t._v(" Lieu ")]),t._v(" "),n("div",[n("span",[t._v(" "+t._s(t.qplace.qplace_desc_lieu?t.qplace.qplace_desc_lieu:"-")+" ")])]),t._v(" "),n("div",{staticClass:"text-xs px-2 border-l-2"},[n("span",[t._v(" "+t._s(t.qplace.qplace_desc?t.qplace.qplace_desc:"Auncune description")+" ")])])]),t._v(" "),n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-sm font-bold"},[t._v(" Annonceur ")]),t._v(" "),n("div",{staticClass:" flex"},[n("span",{staticClass:"text-xs"},[t._v(" "+t._s(t.qplace.ann_label))])])]),t._v(" "),n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-sm font-bold"},[t._v(" Photos ")]),t._v(" "),n("div",{staticClass:" flex flex-wrap"},t._l(t.image_list,(function(e,i){return n("div",{key:e.name_file,staticClass:"relative w-28 h-28 rounded-lg flex justify-center items-center overflow-hidden bg-gray-50 border hover:border-indigo-600 m-2"},[e.name_file?n("img",{staticStyle:{width:"112px"},attrs:{src:"/api/p/media/"+e.name_file+"_min",alt:"",srcset:""}}):n("span",{staticClass:"text-6xl  material-icons"},[t._v(" perm_media ")])])})),0)])])])])}),[],!1,null,null,null);e.default=component.exports},434:function(t,e,n){"use strict";n.r(e);var l=n(3),c=(n(25),n(21),n(157),{props:["qplace_id"],watch:{search:function(a){a&&(this.on_search?this.has_search=!0:this.searchPan())}},data:function(){return{qplace:{},panel_list:[],search:"",on_search:!1,has_search:!1}},methods:{searchPan:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.on_search=!0,e.next=4,t.$axios.$get("api/a/ad/panel/qplace",{params:{search:t.search}});case 4:(n=e.sent).status?(t.panel_list=n.panels,t.has_search&&(t.searchPan(),t.has_search=!1)):t.showNotif("Erreur",n.message,!0),t.on_search=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.showErrorConnexion();case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},assignPan:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$put("api/a/ad/panel/qplace/assign-pan",{qplace_id:e.qplace_id,pan_id:t});case 3:(l=n.sent).status?e.$emit("validate"):e.showNotif("Erreur",l.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},mounted:function(){}}),r=n(7),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fixed top-0 left-0 bg-white bg-opacity-90 h-screen w-screen flex justify-center items-center"},[n("div",{staticClass:"border bg-white rounded-lg shadow-lg",staticStyle:{width:"500px"}},[n("div",{staticClass:" border-b flex p-1 items-center "},[n("span",{staticClass:"text-sm"},[t._v(" Choisissez un panneau ")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"text-sm bt-prev-next",on:{click:function(e){return t.$emit("close")}}},[n("span",{staticClass:"material-icons"},[t._v(" clear ")])])]),t._v(" "),n("div",{staticClass:"text-sm"},[n("div",{staticClass:"p-2 border-b"},[n("custom-input",{attrs:{label:"Référence panneau publoc ..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),t._v(" "),n("div",{staticClass:"p-2 overflow-auto",staticStyle:{"max-height":"500px"}},t._l(t.panel_list,(function(p,i){return n("div",{key:p.pan_id,staticClass:"flex border items-center p-2 mb-2 duration-300 hover:bg-gray-50 rounded-xl"},[n("div",{staticClass:"flex flex-col"},[n("span",{staticClass:"text-sm"},[t._v(" "+t._s(p.pan_publoc_ref)+" ")])]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(e){return t.assignPan(p.pan_id)}}},[n("span",{staticClass:"material-icons"},[t._v(" arrow_right ")])])])})),0)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CustomInput:n(358).default})},573:function(t,e,n){"use strict";n.r(e);var l=n(3),c=(n(25),{layout:"espace",data:function(){return{qplaces:[],qplace_id:null,on_show_detail:!1,on_assign_pan:!1}},methods:{getList:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/ad/qplace/all");case 3:(n=e.sent).status?t.qplaces=n.qplaces:t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.getList()}}),r=n(7),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 text-gray-600"},[t._m(0),t._v(" "),n("div",{staticClass:"mt-2"},t._l(t.qplaces,(function(e,i){return n("div",{key:e.qplace_id,staticClass:"flex relative bg-gray-100 p-2 border mb-2 rounded-2xl hover:border-blue-600 duration-300",class:{"bg-gray-100":!e.qplace_lu}},[n("div",{staticClass:"flex flex-col w-1/3"},[n("span",{staticClass:" text-blue-600 "},[t._v(" "+t._s(e.qplace_desc_lieu)+" ")]),t._v(" "),n("span",{staticClass:"text-xs text-gray-500"},[t._v("Ajouté le, "),n("strong",[t._v(" "+t._s(t.dateToText(e.qplace_created_at))+" ")])])]),t._v(" "),n("div",{staticClass:"flex flex-col  w-1/3"},[n("span",{staticClass:"text-sm text-blue-600"},[t._v(" Annonceur ")]),t._v(" "),n("span",{staticClass:"text-xs"},[t._v(" "+t._s(e.ann_label)+" ")])]),t._v(" "),e.pan_id?n("div",{staticClass:"flex flex-col  w-1/3"},[n("span",{staticClass:"text-sm text-blue-600"},[t._v(" Panneau ")]),t._v(" "),n("span",{staticClass:"text-xs"},[t._v(" "+t._s(e.pan_ref)+" | "+t._s(e.pan_publoc_ref)+" ")]),t._v(" "),n("span",{staticClass:"text-xs",class:{"text-green-500":1==e.pan_state||2==e.pan_state,"text-red-500":3==e.pan_state||4==e.pan_state}},[t._v(" "+t._s(1==e.pan_state||2==e.pan_state?"Dispo":3==e.pan_state?"En location":"Indispo")+" ")])]):t._e(),t._v(" "),n("menu-point",{staticClass:"absolute top-2 right-2"},[n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){t.qplace_id=e.qplace_id,t.on_assign_pan=!0}}},[n("span",{staticClass:"material-icons text-sm"},[t._v("edit")]),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Assigner à un panneau")])]),t._v(" "),n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){t.qplace_id=e.qplace_id,t.on_show_detail=!0}}},[n("span",{staticClass:"material-icons text-sm"},[t._v("info")]),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Plus de détails")])])])],1)})),0),t._v(" "),t.on_show_detail?n("show-details-query-place",{attrs:{qplace_id:t.qplace_id},on:{close:function(e){t.on_show_detail=!1}}}):t._e(),t._v(" "),t.on_assign_pan?n("assign-query-place-to-pan",{attrs:{qplace_id:t.qplace_id},on:{validate:function(){t.on_assign_pan=!1,t.getList()},close:function(e){t.on_assign_pan=!1}}}):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"py-2 border-b"},[n("span",[t._v(" Liste des demandes d'emplacements ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{MenuPoint:n(382).default,ShowDetailsQueryPlace:n(433).default,AssignQueryPlaceToPan:n(434).default})}}]);
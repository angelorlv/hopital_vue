(window.webpackJsonp=window.webpackJsonp||[]).push([[121,23],{358:function(e,t,r){"use strict";r.r(t);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},n=r(7),component=Object(n.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:e.input.style},[r("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[r("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),r("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},595:function(e,t,r){"use strict";r.r(t);var l=r(3),n=(r(25),{layout:"espace",watch:{"pr.models":function(a){this.getAgentVille()}},data:function(){return{error_on_page:!1,pr:{models:{}},data_loaded:!1,list_villes:[],agt_villes:[],input_search:""}},methods:{getProfil:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/profil/"+e.$route.params.id);case 3:(r=t.sent).status?e.pr.models=r.profil:e.error_on_page=!0,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.error_on_page=!0;case 10:e.data_loaded=!0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateProfil:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$put("api/a/profil/"+e.$route.params.id,e.pr.models);case 3:(r=t.sent).status?(e.agt_villes=r.agt_villes,e.list_villes=r.villes):alert(r.message),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Erreur de donnexion");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getAgentVille:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/profil/"+e.pr.models.pr_id+"/agent/ville");case 3:(r=t.sent).status?(e.list_villes=r.villes,e.agt_villes=r.agt_villes):alert(r.message),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},addVilleToAgent:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.$post("api/a/profil/".concat(t.pr.models.pr_id,"/agent/ville"),{ville:e});case 3:(l=r.sent).status?t.getAgentVille():t.showNotfi("Erreur",l.message,!0),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.showErrorConnexion();case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},delVilleToAgent:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.$delete("api/a/profil/".concat(t.pr.models.pr_id,"/agent/ville"),{params:{ville:e}});case 3:(l=r.sent).status?t.getAgentVille():t.showNotif("Erreur",l.message,!0),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.showErrorConnexion();case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},mounted:function(){this.getProfil()}}),o=r(7),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex w-full"},[e.error_on_page?r("div",{},[r("div",{staticClass:"h-48"}),e._v(" "),r("div",{staticClass:" flex flex-col justify-center items-center p-3 border rounded-lg"},[r("span",[e._v("Ooups !!")]),e._v(" "),r("span",[e._v(" Erreur pendant l'affichage de la page !")]),e._v(" "),r("span",{staticClass:"font-bold cursor-pointer text-indigo-600",on:{click:function(t){return e.$router.push("/admin/profil")}}},[e._v(" Retour à la liste ")])])]):r("div",{staticClass:"flex flex-col w-full justify-center items-center"},[r("div",{staticClass:"h-32"}),e._v(" "),r("div",{staticClass:"flex flex-col justify-center items-center"},[r("div",{staticClass:"mb-5 flex itels-center w-full"},[r("button",{staticClass:"bt-prev-next",on:{click:function(t){return e.$router.go(-1)}}},[r("span",{staticClass:"material-icons"},[e._v(" navigate_before ")])]),e._v(" "),r("span",{staticClass:"flex-grow"}),e._v(" "),r("span",{staticClass:"text-xl"},[e._v(" Profil [ "+e._s(e.switchTypeProfil(e.pr.models.pr_type))+" ] - ( "+e._s(e.pr.models.pr_login)+"  )")])]),e._v(" "),r("div",{staticClass:"w-full"},[r("custom-input",{staticClass:"mb-2",attrs:{width:"100%",label:"Login ..."},model:{value:e.pr.models.pr_login,callback:function(t){e.$set(e.pr.models,"pr_login","string"==typeof t?t.trim():t)},expression:"pr.models.pr_login"}}),e._v(" "),r("custom-input",{staticClass:"mb-2",attrs:{width:"100%",label:"Mot de passe ..."},model:{value:e.pr.models.pr_pass,callback:function(t){e.$set(e.pr.models,"pr_pass","string"==typeof t?t.trim():t)},expression:"pr.models.pr_pass"}}),e._v(" "),r("div",{staticClass:"border rounded p-2 mb-2",class:e.pr.models.pr_active?"border-indigo-600":""},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.pr.models.pr_active,expression:"pr.models.pr_active"}],attrs:{type:"checkbox",id:"pr_active"},domProps:{checked:Array.isArray(e.pr.models.pr_active)?e._i(e.pr.models.pr_active,null)>-1:e.pr.models.pr_active},on:{change:function(t){var r=e.pr.models.pr_active,l=t.target,n=!!l.checked;if(Array.isArray(r)){var o=e._i(r,null);l.checked?o<0&&e.$set(e.pr.models,"pr_active",r.concat([null])):o>-1&&e.$set(e.pr.models,"pr_active",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.pr.models,"pr_active",n)}}}),e._v(" "),r("label",{staticClass:"w-full h-full",attrs:{for:"pr_active"}},[e._v(" "+e._s(e.pr.models.pr_active?"Compte Activé":"Compte desactivé")+" ")])]),e._v(" "),r("div",{staticClass:"border rounded p-2 mb-2",class:e.pr.models.pr_change_pass?"border-indigo-600":""},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.pr.models.pr_change_pass,expression:"pr.models.pr_change_pass"}],attrs:{type:"checkbox",id:"pr_change_pass"},domProps:{checked:Array.isArray(e.pr.models.pr_change_pass)?e._i(e.pr.models.pr_change_pass,null)>-1:e.pr.models.pr_change_pass},on:{change:function(t){var r=e.pr.models.pr_change_pass,l=t.target,n=!!l.checked;if(Array.isArray(r)){var o=e._i(r,null);l.checked?o<0&&e.$set(e.pr.models,"pr_change_pass",r.concat([null])):o>-1&&e.$set(e.pr.models,"pr_change_pass",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.pr.models,"pr_change_pass",n)}}}),e._v(" "),r("label",{staticClass:"w-full h-full",attrs:{for:"pr_change_pass"}},[e._v(" "+e._s(e.pr.models.pr_change_pass?"Doit changer son mot de passe":"Pas besoin de changer son mot de passe")+" ")])])],1),e._v(" "),r("div",{staticClass:"flex w-full p-2 justify-end items-end border-t"},[r("span",{staticClass:"flex-grow"}),e._v(" "),r("button",{staticClass:"bt text-sm",on:{click:e.updateProfil}},[e._v("Enregistrer")])])]),e._v(" "),"ann"!=e.pr.models.pr_type&&"reg"!=e.pr.models.pr_type&&e.data_loaded?r("div",{staticClass:"my-5 pt-5 border-t"},[r("span",[e._v(" On peut supprimer ce profil ")])]):e._e(),e._v(" "),"agt"==e.pr.models.pr_type&&e.data_loaded?r("div",{staticClass:" flex flex-col my-5 pt-5 p-5 border-t w-full"},[e._m(0),e._v(" "),r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"my-2 border-b"},[e._m(1),e._v(" "),r("div",{},[e.agt_villes.agt_lieu_list?r("div",{staticClass:"border p-1 rounded mt-2 flex flex-wrap"},e._l(e.agt_villes.agt_lieu_list.split(","),(function(t){return r("div",{key:t,staticClass:" flex m-2 border rounded-full p-2"},[r("span",{},[e._v(" "+e._s(t)+" ")]),e._v(" "),r("button",{staticClass:"bg-white flex duration-300 hover:bg-red-500 hover:text-white items-center justify-center text-red-500 border mx-2 rounded-full",on:{click:function(r){return e.delVilleToAgent(t)}}},[r("span",{staticClass:"material-icons"},[e._v("clear")])])])})),0):r("div",{},[r("span",{staticClass:"text-xs"},[e._v("  L'agent ne contrôle aucune ville ")])])])]),e._v(" "),r("div",{},[e._m(2),e._v(" "),r("div",{},[r("custom-input",{attrs:{label:"Rechercher une ville ..."},model:{value:e.input_search,callback:function(t){e.input_search=t},expression:"input_search"}}),e._v(" "),r("div",{staticClass:"border p-1 rounded mt-2 flex flex-wrap"},e._l(e.list_villes,(function(t){return r("div",{key:t.lieu_ville,staticClass:" flex m-2 border rounded-full p-2 "},[r("span",{},[e._v(" "+e._s(t.lieu_ville)+" ")]),e._v(" "),r("button",{staticClass:"bg-white flex duration-300 hover:bg-black hover:text-white items-center justify-center text-black border mx-2 rounded-full",on:{click:function(r){return e.addVilleToAgent(t.lieu_ville)}}},[r("span",{staticClass:"material-icons"},[e._v("add")])])])})),0)],1)])])]):e._e()])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("span",{staticClass:"underline"},[e._v(" Gestion du profil agent")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("span",{staticClass:"text-sm"},[e._v(" Liste des villes contrôlées par l'agent ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("span",{staticClass:"text-sm"},[e._v(" Liste des villes ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:r(358).default})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[149,23,47],{358:function(t,e,n){"use strict";n.r(e);var o={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},l=n(7),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},364:function(t,e,n){var content=n(367);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("66a93922",content,!0,{sourceMap:!1})},366:function(t,e,n){"use strict";n(364)},367:function(t,e,n){var o=n(26)((function(i){return i[1]}));o.push([t.i,"/*purgecss start ignore*/\n.leaflet-popup .leaflet-popup-content-wrapper{\n  background-color:transparent;\n  box-shadow:none;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-content{\n  width:200px;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-tip-container{\n  top:0;\n  display:none\n}\n\n/*purgecss end ignore*/",""]),o.locals={},t.exports=o},370:function(t,e,n){"use strict";n.r(e);var o=n(3),l=(n(25),n(37),n(61),n(56),n(373),n(374),{}),r={props:["list_coord","load_data"],watch:{load_data:function(a){a&&this.initMap()}},data:function(){return{mymap:{},accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",layerGroup:{},markers:{},index_selected:-1}},methods:{setLinkPan:function(){return"r-panneau"==this.$route.name?"r/":"a-panneau"==this.$route.name?"a/":"admin-panneau"==this.$route.name?"admin/":""},initMap:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.mymap=l.map("map",{zoomControl:!0}).setView([-19.002846,46.460938],5),l.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(t.mymap),t.markers=new l.MarkerClusterGroup({iconCreateFunction:function(t){var html='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-30 bg-indigo-600 w-12 h-12">';return html+='<div class="bg-indigo-600 h-10 w-10 text-gray-100 flex rounded-full justify-center items-center font-bold">'+t.getAllChildMarkers().length+"</div>",html+="</div>",l.divIcon({html:html,className:"mycluster",iconSize:l.point(32,32)})}}),n=function(i){var e=t.list_coord[i];o='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12">',o+='<span class="material-icons duration-300 text-indigo-600 hover:text-indigo-900 " style="font-size:50px;color:'.concat(e.cat_color,'"> place </span>'),o+="</div>",'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12">','<span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span>',"</div>";var n=l.divIcon({className:"custom-div-icon",html:o,iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),r=l.divIcon({className:"custom-div-icon",html:'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12"><span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span></div>',iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),c=l.marker([e.lieu_lat,e.lieu_lng],{icon:n});t.mymap.on("click",(function(){t.index_selected=-1,t.markers.eachLayer((function(t){t.setIcon(n)}))}));var d=t;c.on("click",(function(){d.markers.eachLayer((function(t){t.setIcon(n)})),d.index_selected=i,this.setIcon(r)})),t.markers.addLayer(c)},i=0;i<t.list_coord.length;i++)n(i);t.mymap.addLayer(t.markers);case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;l=n(363),n(375),this.load_data&&setTimeout((function(){t.initMap()}),500)}},c=(n(366),n(7)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative",staticStyle:{height:"500px",width:"100%"}},[n("div",{staticStyle:{height:"100%",width:"100%","border-radius":"8px"},attrs:{id:"map"}}),t._v(" "),n("div",{staticClass:"bg-gray-100 flex w-72 rounded-lg absolute top-5 right-5 duration-300",class:-1==t.index_selected?"h-16":"h-48",staticStyle:{"z-index":"1002"}},[-1!=t.index_selected?n("div",{staticClass:"cursor-pointer p-2 flex w-full relative flex-col justify-start items-start",on:{click:function(){"a-search-place"==t.$route.name?t.$router.push("/a/search-place/"+t.list_coord[t.index_selected].pan_id):t.$router.push("/"+t.setLinkPan()+"panneau/"+t.list_coord[t.index_selected].pan_id)}}},[n("div",{staticClass:"flex absolute top-4 left-4"},[n("span",{staticClass:"p-2 rounded-full bg-indigo-600 text-white"},[t._v(" "+t._s(t.list_coord[t.index_selected].pan_publoc_ref)+" ")])]),t._v(" "),null!=t.list_coord[t.index_selected].name_file?n("div",{staticClass:"h-full w-full flex rounded-t"},[n("img",{staticClass:"object-cover flex-grow rounded",attrs:{src:"/api/p/media/"+t.list_coord[t.index_selected].name_min_file,loading:"lazy",crossorigin:"anonymous"}})]):t._e(),t._v(" "),n("div",{staticClass:"flex justify-end items-end font-bold absolute p-2 w-full h-16 bg-gradient-to-t rounded-b-lg from-gray-700 to-transparent via-gray-700 left-0 bottom-0"},[n("span",{staticClass:"py-2 text-gray-200 block w-full"},[t._v(" "+t._s(t.list_coord[t.index_selected].lieu_label)+" ")])])]):n("div",{staticClass:"p-2 flex justify-center items-center text-gray-400"},[n("span",[t._v(" Cliquez sur un marqueur pour plus de détails ")])])])])}),[],!1,null,null,null);e.default=component.exports},512:function(t,e,n){"use strict";n.r(e);var o=n(3),l=(n(25),{watch:{search_input:function(a){this.getPanel()}},data:function(){return{panels:[],label_list:[{label:"Régisseur",key:"reg_label"},{label:"Ref. Régisseur",key:"pan_ref"},{label:"Surface",key:"pan_surface"},{label:"Catégorie",key:"parent_cat_label"},{label:"Format",key:"cat_label"},{label:"Num d'autorisation",key:"pan_num_auth_cu"},{label:"Date d'autorisation",key:"pan_date_auth_cu"},{label:"Lumineux",key:"pan_lumineux"}],cur_view:"liste",loaded:!1,search_input:"",sum_surface:0}},methods:{getPanel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaded=!1,e.prev=1,e.next=4,t.$axios.$get("api/a/cu/panel",{params:{search:t.search_input}});case 4:(n=e.sent).status?(t.panels=n.panels,t.sum_surface=n.sum,t.loaded=!0):t.showNotif("Erreur",n.message,!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.showErrorConnexion();case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()}},mounted:function(){this.getPanel()}}),r=n(7),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full"},[n("div",{},[n("div",{staticClass:"m-2 border rounded-lg p-2 flex items-end sticky top-5 bg-white"},[n("div",{},[n("span",{},[t._v(" Total : "+t._s(t.panels.length)+" ")])]),t._v(" "),n("div",{staticClass:"ml-5"},[n("custom-input",{attrs:{label:"Nom du régisseur ou num authorisation ..."},model:{value:t.search_input,callback:function(e){t.search_input=e},expression:"search_input"}})],1),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("div",{},[n("div",{staticClass:"flex border rounded"},[n("button",{staticClass:"p-2 bg-gray-50 hover:bg-gray-100 flex justify-center items-center rounded-l",class:"carte"==t.cur_view?"bg-indigo-600 hover:bg-indigo-600 text-white":"",on:{click:function(e){t.cur_view="carte"}}},[n("span",{staticClass:"material-icons"},[t._v(" place ")])]),t._v(" "),n("button",{staticClass:"p-2 bg-gray-50 hover:bg-gray-100 rounded-r flex justify-center items-center",class:"liste"==t.cur_view?"bg-indigo-600 hover:bg-indigo-600 text-white":"",on:{click:function(e){t.cur_view="liste"}}},[n("span",{staticClass:"material-icons"},[t._v(" list  ")])])])])]),t._v(" "),n("div",{staticClass:"dsqsdfkjqskqjsf"}),t._v(" "),t.panels.length>0?n("div",{},["liste"==t.cur_view?n("div",{staticClass:"p-2 border rounded-lg m-2 text-sm"},[n("table",{staticClass:"w-full text-left table-auto "},[n("thead",{staticClass:"rounded-t"},[n("tr",{staticClass:"bg-gray-50 text-gray-700"},t._l(t.label_list,(function(e){return n("th",{key:e.key,staticClass:"p-2"},[t._v(" "+t._s(e.label)+" ")])})),0)]),t._v(" "),n("tbody",[t._l(t.panels,(function(p){return n("tr",{key:p.pan_id,staticClass:"border-b"},t._l(t.label_list,(function(e){return n("td",{key:e.key,staticClass:"p-2"},["pan_date_auth_cu"==e.key?n("span",{},[t._v(" "+t._s(p.pan_date_auth_cu?t.dateToText(p.pan_date_auth_cu):"-")+" ")]):"pan_lumineux"==e.key?n("span",{class:{"p-1 rounded-lg bg-indigo-600 bg-opacity-10 border border-indigo-600":p.pan_lumineux}},[t._v("  "+t._s(p.pan_lumineux?"Oui":"Non")+" ")]):n("span",{},[t._v(" "+t._s(p[e.key]?p[e.key]:"-")+"  ")])])})),0)})),t._v(" "),n("tr",{staticClass:"sticky bottom-5 border rounded-lg bg-white mt-2 shadow-lg"},[n("td",{staticClass:"p-2",attrs:{colspan:t.label_list.length}},[t._v(" Totale Surface : "+t._s(t.sum_surface)+" ")])])],2)])]):t._e(),t._v(" "),"carte"==t.cur_view?n("div",{staticClass:"m-2"},[n("client-only",[n("map-accueil",{attrs:{list_coord:t.panels,load_data:t.loaded}})],1)],1):t._e()]):n("div",{staticClass:"m-5 flex justify-center items-center"},[t._m(0)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex rounded-lg border p-2 "},[n("span",{staticClass:"text-gray-600"},[t._v(" Aucun panneau dans  votre Commune pour le moment ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{CustomInput:n(358).default,MapAccueil:n(370).default})}}]);
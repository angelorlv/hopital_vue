(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{547:function(e,t,l){"use strict";l.r(t);var n=l(3),r=(l(25),{data:function(){return{panels:[],label_list:[{label:"Ref. Régisseur",key:"pan_ref"},{label:"Régisseur",key:"reg_label"},{label:"Annonceur",key:"ann_label"},{label:"Catégorie",key:"parent_cat_label"},{label:"Format",key:"cat_label"},{label:"Date de début",key:"spp_date_debut"},{label:"Date de Fin",key:"spp_date_fin"},{label:"Date de Contrôle",key:"spp_date_control"},{label:"Type",key:"spp_type"},{label:"Nb. Photo",key:"pan_list_photo_solarpro"},{label:"Nb. Lumière",key:"spp_nb_light"}],nb_light_total:0}},methods:{getListPan:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/solarpro/reg/"+e.$route.params.id);case 3:(l=t.sent).status?(e.panels=l.panels,e.nb_light_total=l.nb_light_total):e.showNotif("Erreur",l.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){this.getListPan()}}),_=l(7),component=Object(_.a)(r,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"p-2 flex"},[l("span",[e._v(" Liste des panneaux du Régisseur : "),e.panels.length?l("span",{staticClass:"font-bold underline"},[e._v(" "+e._s(e.panels[0].reg_label)+"  ")]):e._e()]),e._v(" "),l("span",{staticClass:"ml-2"},[e._v(" Total : "),l("span",{staticClass:"underline font-bold"},[e._v(" "+e._s(e.panels.length)+" ")])]),e._v(" "),l("nuxt-link",{staticClass:"underline mx-5 text-blue-500",attrs:{to:"/solarpro/regisseur/rapport?reg_id="+e.$route.params.id}},[e._v(" Rapport ")])],1),e._v(" "),l("div",[l("table",{staticClass:"w-full text-left table-auto "},[l("thead",{staticClass:"rounded-t"},[l("tr",{staticClass:"bg-gray-50 text-gray-700"},e._l(e.label_list,(function(t){return l("th",{key:t.key,staticClass:"p-2"},[e._v(" "+e._s(t.label)+" ")])})),0)]),e._v(" "),l("tbody",[e._l(e.panels,(function(p){return l("tr",{key:p.pan_id,staticClass:"border-b"},e._l(e.label_list,(function(t){return l("td",{key:t.key,staticClass:"p-2 relative",class:{"border border-red-300 bg-opacity-10":e.dateDiff(new Date,new Date(p.spp_date_fin)).day<5&&"spp_date_fin"==t.key}},["pan_ref"==t.key?l("nuxt-link",{staticClass:"underline hover:text-gray-600",attrs:{to:"/solarpro/"+p.pan_id}},[e._v(" "+e._s(p.pan_ref)+" ")]):"date"==t.key.split("_")[1]?l("div",{staticClass:"flex flex-col"},[l("span",{},[e._v(e._s(p[t.key]?new Date(p[t.key]).toLocaleDateString():"-"))]),e._v(" "),p[t.key]&&"spp_date_fin"==t.key?l("span",{staticClass:"text-xs"},[e._v(" Expire dans "+e._s(e.dateDiff(new Date,new Date(p[t.key])).day)+" jrs ")]):e._e()]):"pan_list_photo_solarpro"==t.key?l("span",{},[e._v(" "+e._s(p[t.key]?p[t.key].split(",").length:0)+" ")]):"spp_type"==t.key?l("span",{},[e._v(" "+e._s(e._f("capitalising")(p.spp_type?p.spp_type:"-"))+" ")]):l("span",{},[e._v(" "+e._s(p[t.key]?p[t.key]:"-")+"  ")])],1)})),0)})),e._v(" "),l("tr",{staticClass:"border sticky bottom-5 bg-white shadow-lg"},[l("td",{staticClass:"p-2",attrs:{colspan:e.label_list.length-1}},[e._v("Total lumière")]),e._v(" "),l("td",{staticClass:"p-2"},[e._v(" "+e._s(e.nb_light_total)+" ")])])],2)])])])}),[],!1,null,null,null);t.default=component.exports}}]);
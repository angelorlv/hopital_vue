(window.webpackJsonp=window.webpackJsonp||[]).push([[18,17,23],{358:function(t,e,n){"use strict";n.r(e);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},o=n(7),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},359:function(t,e,n){var content=n(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("2d1dc0a2",content,!0,{sourceMap:!1})},360:function(t,e,n){"use strict";n(359)},361:function(t,e,n){var l=n(26)((function(i){return i[1]}));l.push([t.i,"/*purgecss start ignore*/\n.fade-enter-active,.fade-leave-active{\n  transition:opacity .3s\n}\n.fade-enter,.fade-leave-to{\n  opacity:0\n}\n\n/*purgecss end ignore*/",""]),l.locals={},t.exports=l},362:function(t,e,n){"use strict";n.r(e);var l={props:["value","datas","label","code","placeholder","padding","width"],watch:{datas:function(a){this.$emit("input",void 0===a[0]?null:a[0][this.code])}},data:function(){return{}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)}},mounted:function(){}},o=(n(360),n(7)),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative flex flex-col"},[t.placeholder?n("div",{staticClass:"text-xs duration-300 flex items-center font-bold",class:t.datas.length>0?" h-4":"h-0"},[t.datas.length>0?n("label",{staticClass:"z-10 px-1 text-indigo-600"},[t._v(" "+t._s(t.placeholder)+" ")]):t._e()]):t._e(),t._v(" "),n("div",[n("select",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",on:{change:function(e){return t.updateInput()}}},t._l(t.datas,(function(e){return n("option",{key:e[t.code],domProps:{value:e[t.code],selected:t.value==e[void 0===t.code?"code":t.code]}},[t._v(" "+t._s(e[void 0===t.label?"label":t.label])+" ")])})),0)])])}),[],!1,null,null,null);e.default=component.exports},428:function(t,e,n){"use strict";n.r(e);var l=n(3),o=(n(25),{watch:{in_locate:function(a){a&&this.ann_list.length<=0&&this.getListAnn()}},props:["pan"],data:function(){return{in_locate:!1,panel:{},ann_list:[],location:{ann_id:null,date_debut:"",month:1}}},methods:{changePanState:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=t||3!=e.panel.pan_state){n.next=4;break}if(confirm("Voulez-vous vraiment annuler la location ?")){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,n.next=7,e.$axios.$put("api/a/ad/panel/change-state",{state:t,pan_id:e.panel.pan_id,state_old:e.panel.pan_state});case 7:(l=n.sent).status?(e.panel.pan_state=t,e.$emit("change_state")):e.showNotif("Erreur",l.message,!0),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),e.showErrorConnexion();case 14:case"end":return n.stop()}}),n,null,[[4,11]])})))()},getListAnn:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/annonceur");case 3:(n=e.sent).status?t.ann_list=n.annonceurs:t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},validateLocation:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("api/a/ad/panel/location/validate",{location:t.location,panel:t.panel});case 3:(n=e.sent).status?(t.showNotif("Validation de location","Validation de location avec succès"),t.$emit("change_state"),t.$emit("close")):t.showNotif("Erreur de validation de la location",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.panel=this.pan,console.log(this.panel)}}),c=n(7),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fixed top-0 left-0 flex justify-center items-center w-screen h-screen bg-white bg-opacity-80 z-30"},[n("div",{staticClass:"border rounded-lg bg-white  shadow-lg ",staticStyle:{width:"600px"}},[n("div",{staticClass:"flex p-1 items-center border-b"},[n("span",[t._v(" Changement d'Etat du panneau "),n("strong",[t._v(" "+t._s(t.panel.pan_publoc_ref)+" / "+t._s(t.panel.pan_ref)+" ")])]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(e){return t.$emit("close")}}},[n("span",{staticClass:"material-icons"},[t._v(" clear ")])])]),t._v(" "),n("div",{},[n("div",{staticClass:"p-1 border-b bg-gray-50"},[3==t.panel.pan_state?n("span",{},[t._v(" Ce Panneau est actuellement en "),n("strong",{staticClass:"text-blue-500"},[t._v("Location")])]):t._e(),t._v(" "),1==t.panel.pan_state||2==t.panel.pan_state?n("span",{},[t._v(" Ce Panneau est actuellement "),n("strong",{staticClass:"text-green-500"},[t._v("Disponible")])]):t._e(),t._v(" "),4==t.panel.pan_state?n("span",{},[t._v(" Ce Panneau est actuellement "),n("strong",{staticClass:"text-red-500"},[t._v(" Indisponible ")])]):t._e()]),t._v(" "),n("div",[1==t.panel.pan_state||2==t.panel.pan_state?n("div",{},[t.in_locate?n("div",{},[n("div",{staticClass:"flex p-1 border-b items-center"},[n("span",{},[t._v("Choix de l'annonceur")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt-back",on:{click:function(e){t.in_locate=!1}}},[t._v(" Annuler ")])]),t._v(" "),n("div",{staticClass:" flex flex-col"},[n("div",{staticClass:"flex items-end border-b p-2"},[n("c-select",{attrs:{datas:t.ann_list,label:"ann_label",code:"ann_id",placeholder:"Annonceur ..."},model:{value:t.location.ann_id,callback:function(e){t.$set(t.location,"ann_id",e)},expression:"location.ann_id"}}),t._v(" "),n("span",{staticClass:"w-6"}),t._v(" "),n("custom-input",{attrs:{label:"Date de début ...",type:"date"},model:{value:t.location.date_debut,callback:function(e){t.$set(t.location,"date_debut",e)},expression:"location.date_debut"}}),t._v(" "),n("span",{staticClass:"w-6"}),t._v(" "),n("custom-input",{attrs:{label:"Nombre de  mois ...",type:"number"},model:{value:t.location.month,callback:function(e){t.$set(t.location,"month",e)},expression:"location.month"}})],1),t._v(" "),n("div",{staticClass:"p-2 flex"},[n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt",on:{click:t.validateLocation}},[t._v(" Valider ")])])])]):n("div",{staticClass:"p-2 flex"},[n("button",{staticClass:"bt-cancel",attrs:{type:"button"},on:{click:function(){t.changePanState(4)}}},[t._v(" Mettre en indisponible ")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt",attrs:{type:"button"},on:{click:function(){t.in_locate=!0}}},[t._v(" Louer le panneau ")])])]):t._e(),t._v(" "),4==t.panel.pan_state?n("div",[t.in_locate?n("div",{},[n("div",{staticClass:"flex p-2 border-b"},[n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(e){t.in_locate=!1}}},[n("span",{staticClass:"material-icons"},[t._v(" clear ")])])])]):n("div",{staticClass:"p-2 flex"},[n("button",{staticClass:"bt",attrs:{type:"button"},on:{click:function(){t.changePanState(1)}}},[t._v(" Mettre en disponible ")])])]):t._e(),t._v(" "),3==t.panel.pan_state?n("div",{},[n("div",{staticClass:"p-2 flex"},[n("div",{staticClass:"flex flex-col p-2 rounded-lg bg-gray-50 cursor-pointer hover:shadow-lg duration-300"},[n("span",{staticClass:"text-xs font-bold"},[t._v(" Régisseur ")]),t._v(" "),n("span",{staticClass:"text-lg"},[t._v(" "+t._s(t.panel.reg_label)+" ")])]),t._v(" "),n("span",{staticClass:"w-10"}),t._v(" "),n("div",{staticClass:"flex flex-col p-2 rounded-lg bg-gray-50 cursor-pointer hover:shadow-lg duration-300"},[n("span",{staticClass:"text-xs font-bold"},[t._v(" Annonceur ")]),t._v(" "),n("span",{staticClass:"text-lg"},[t._v(" "+t._s(t.panel.ann_label)+" ")])])]),t._v(" "),n("div",{staticClass:"p-2"},[n("button",{staticClass:"bt-cancel",on:{click:function(){t.changePanState(1)}}},[t._v(" Annuler la location ")])])]):t._e()])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CSelect:n(362).default,CustomInput:n(358).default})}}]);
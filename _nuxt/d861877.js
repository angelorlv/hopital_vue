(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{381:function(e,t,r){"use strict";r.r(t);var n=r(3),o=(r(25),r(43),r(37),r(156),{props:["mode","image_list"],data:function(){return{size:{w:600},tmp_list_image:[],overlay_style:{},on_load:!1,ids_image_to_delete:[]}},methods:{init:function(){this.overlay_style={width:this.size.w+"px"},this.tmp_list_image=this.image_list.slice()},add_im:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.on_load=!0,r.next=3,t.up_image(e);case 3:(n=r.sent).status&&(t.tmp_list_image.push({dimension_min_file:n.opt.dim_min_file,dimension_file:n.opt.dim_file,file_id:n.file_id,name_file:n.opt.name,name_min_file:n.opt.name+"_min"}),t.on_load=!1);case 5:case"end":return r.stop()}}),r)})))()},del_im:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.ids_image_to_delete.push(t.tmp_list_image[e].file_id),t.tmp_list_image.splice(e,1);case 2:case"end":return r.stop()}}),r)})))()},validate_images:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$route.params.id?e.$route.params.id:e.$route.query.p_id,t.next=4,e.$axios.put("api/a/panel/ims/other",{ims:e.tmp_list_image,ims_del:e.ids_image_to_delete,mode:e.mode,pan_id:r});case 4:(n=t.sent).status?e.$emit("validate"):e.showNotif("Erreur de validation",n.message,!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.shwoErrorConnexion();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},mounted:function(){this.init()}}),l=r(7),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"top-0 left-0 w-screen h-screen bg-white bg-opacity-80 fixed flex justify-center items-center",staticStyle:{"z-index":"1010"}},[r("div",{staticClass:"border rounded-lg  bg-white shadow-lg",style:e.overlay_style},[r("div",{staticClass:"h-10 border-b flex items-center px-2"},[r("span",{staticClass:"text-sm"},[e._v(" Ajout/suppression images ")]),e._v(" "),r("span",{staticClass:"flex-grow"}),e._v(" "),r("button",{staticClass:"bt-prev-next",on:{click:function(t){return e.$emit("close")}}},[r("span",{staticClass:"material-icons"},[e._v(" clear ")])])]),e._v(" "),r("div",{staticClass:"p-2 border-b"},[r("div",{staticClass:"flex flex-wrap"},[e._l(e.tmp_list_image,(function(t,i){return r("div",{key:t.name_file,staticClass:"relative w-28 h-28 rounded-lg flex justify-center items-center overflow-hidden bg-gray-50 border hover:border-indigo-600 m-2"},[t.name_file?r("img",{staticStyle:{width:"112px"},attrs:{src:"/api/p/media/"+t.name_file+"_min",alt:"",srcset:""}}):r("span",{staticClass:"text-6xl  material-icons"},[e._v(" perm_media ")]),e._v(" "),r("button",{staticClass:" top-1 right-1 absolute bt-prev-next text-xs",on:{click:function(t){return e.del_im(i)}}},[r("span",{staticClass:"material-icons"},[e._v(" clear ")])])])})),e._v(" "),e.on_load?r("div",{staticClass:"cursor-pointer  flex-col  w-28 h-28 rounded-lg flex justify-center items-center overflow-hidden bg-gray-50 border hover:border-indigo-600 m-2"},[r("span",{staticClass:"material-icons text-6xl animate-pulse text-indigo-500"},[e._v(" hourglass_bottom ")]),e._v(" "),r("span",{staticClass:" text-indigo-500 text-xs"},[e._v("Upload ...")])]):e._e(),e._v(" "),e._m(0),e._v(" "),r("input",{staticClass:"hidden",attrs:{accept:"image/*",id:"im",type:"file"},on:{change:function(t){return e.add_im(t)}}})],2)]),e._v(" "),r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"p-2 border-b bg-gray-50 text-gray-600"},["dispo"==e.mode?r("p",{staticClass:"text-xs"},[e._v(" Images du panneau en  "),r("strong",[e._v("mode disponible")]),e._v(" , ces images seront vu par tout le monde.")]):e._e(),e._v(" "),"pose"==e.mode?r("p",{staticClass:"text-xs"},[e._v(" Images du panneau en "),r("strong",[e._v(" mode Pose ")]),e._v(" , ces images seront visible par l'annonceur qui a louer le panneau.")]):e._e(),e._v(" "),"solarpro"==e.mode&&"spro"!=e.$store.state.profil.pr_type?r("p",{staticClass:"text-xs"},[e._v(" Images du panneau "),r("strong",[e._v(" illuminé par Solarpro ")]),e._v(", images visibles si vous donnez accès à Solarpro.")]):e._e(),e._v(" "),"solarpro"==e.mode&&"spro"==e.$store.state.profil.pr_type?r("p",{staticClass:"text-xs"},[e._v(" Images du panneau "),r("strong",[e._v(" illuminé par Solarpro ")])]):e._e(),e._v(" "),r("p",{staticClass:"text-xs mt-2 text-red-500"},[e._v("Vous devez appuyez sur le bouton valider pour valider les modifications")])]),e._v(" "),r("div",{staticClass:"p-2 flex "},[r("span",{staticClass:"flex-grow"}),e._v(" "),r("button",{staticClass:"bt text-sm",on:{click:e.validate_images}},[e._v(" Valider ")])])])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:" cursor-pointer w-28 h-28 rounded-lg flex justify-center items-center overflow-hidden bg-gray-50 border hover:border-indigo-600 m-2",attrs:{for:"im"}},[r("span",{staticClass:"material-icons text-6xl"},[e._v(" add ")])])}],!1,null,null,null);t.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[92,19,23,39],{358:function(t,e,n){"use strict";n.r(e);var o={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},l=n(7),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},418:function(t,e,n){"use strict";n.r(e);var o=n(3),l=(n(25),{data:function(){return{list_pan:[]}},methods:{getList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/panel/list-by");case 3:(n=e.sent).status?t.list_pan=n.list:t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.getList()}}),c=n(7),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fixed z-50 w-screen p-2 h-screen top-0 left-0 bg-white bg-opacity-80 flex justify-center items-center"},[n("div",{staticClass:"border bg-white rounded-lg shadow-lg",style:{width:"600px"}},[n("div",{staticClass:"mb-2 border-b p-2 flex items-center"},[n("span",{},[t._v(" Choisissez un panneau ")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt text-sm",on:{click:function(e){return t.$emit("close")}}},[t._v(" Retour ")])]),t._v(" "),n("div",{staticClass:"h-72 overflow-auto max-h-content"},[t.list_pan.length>0?n("div",{},t._l(t.list_pan,(function(p,i){return n("div",{key:p.pan_id,staticClass:"flex m-2 border rounded-lg hover:bg-gray-100 p-2"},[n("div",{staticClass:"flex flex-col"},[n("span",{staticClass:"font-bold"},[t._v(" "+t._s(p.pan_publoc_ref)+" ")]),t._v(" "),n("span",{staticClass:"text-sm text-gray-600"},[t._v(" "+t._s(p.lieu_label)+" ")])]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("div",{},[n("button",{staticClass:"bt-prev-next",on:{click:function(e){return t.$emit("selected",t.list_pan[i])}}},[n("span",{staticClass:"material-icons"},[t._v(" navigate_next ")])])])])})),0):n("div",{staticClass:"flex h-72  w-full justify-center items-center"},[n("span",{},[t._v(" Aucun panneau Disponible ")])])])])])}),[],!1,null,null,null);e.default=component.exports},419:function(t,e,n){"use strict";n.r(e);var o=n(3),l=(n(25),{watch:{s:function(a){this.on_search?this.to_search=!0:this.searchAnn()},on_search:function(a){a||this.to_search&&(this.to_search=!1,this.searchAnn())}},data:function(){return{list_ann:[],s:"",to_search:!1,on_search:!1}},methods:{searchAnn:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.on_search=!0,e.next=4,t.$axios.$get("api/a/annonceur/other",{params:{search:t.s}});case 4:(n=e.sent).status?(t.list_ann=n.list,t.on_search=!1):t.showNotif("Erreur",n.message,!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.showErrorConnexion();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},mounted:function(){}}),c=n(7),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fixed z-50 w-screen p-2 h-screen top-0 left-0 bg-white bg-opacity-80 flex justify-center items-center"},[n("div",{staticClass:"border bg-white rounded-lg shadow-lg",style:{width:"600px"}},[n("div",{staticClass:"mb-2 border-b p-2 flex items-center"},[n("span",{},[t._v(" Recherhez une société ")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt text-sm",on:{click:function(e){return t.$emit("close")}}},[t._v(" Retour ")])]),t._v(" "),n("div",{staticClass:"px-2"},[n("custom-input",{attrs:{label:"Le nom de la société ... "},model:{value:t.s,callback:function(e){t.s="string"==typeof e?e.trim():e},expression:"s"}})],1),t._v(" "),n("div",{staticClass:"h-72 overflow-auto max-h-content"},[t.list_ann.length>0?n("div",{},t._l(t.list_ann,(function(a,i){return n("div",{key:a.ann_id,staticClass:"flex items-center m-2 border rounded-lg hover:bg-gray-100 p-2"},[n("div",{staticClass:"flex flex-col"},[n("span",{staticClass:"font-bold"},[t._v(" "+t._s(a.ann_label)+" ")])]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("div",{},[n("button",{staticClass:"bt-prev-next",on:{click:function(e){return t.$emit("selected",t.list_ann[i])}}},[n("span",{staticClass:"material-icons"},[t._v(" navigate_next ")])])])])})),0):n("div",{staticClass:"flex h-72  w-full justify-center items-center"},[n("span",{},[t._v(" Aucune société Disponible ")])])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CustomInput:n(358).default})},505:function(t,e,n){"use strict";n.r(e);var o=n(3),l=(n(25),{data:function(){return{list_loc:[],in_edit_location:!1,show_select_pan:!1,show_select_ann:!1,pan_selected:null,ann_selected:null,location_model:{saloc_pan_id:null,saloc_sous_ann_id:null,saloc_month:1,saloc_date_debut:new Date,saloc_date_validation:new Date}}},methods:{getStatsSousAnn:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("api/a/annonceur/sous-ann/stats");case 3:(n=e.sent).status?t.list_loc=n.list:t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},validLocation:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("api/a/annonceur/sous-ann/location",t.location_model);case 3:(n=e.sent).status?(t.getStatsSousAnn(),t.init(),t.in_edit_location=!1):t.showNotif("Erreur",n.message,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showErrorConnexion();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},delLocation:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$delete("api/a/annonceur/sous-ann/location/"+t);case 3:(o=n.sent).status?e.getStatsSousAnn():e.showNotif("Erreur",o.message,!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},init:function(){this.location_model.saloc_pan_id=null,this.location_model.saloc_sous_ann_id=null,this.location_model.saloc_month=1,this.location_model.saloc_date_debut=new Date,this.location_model.saloc_date_validation=new Date,this.pan_selected=null,this.ann_selected=null}},beforeMount:function(){this.$store.state.profil.ann_is_agence_com||this.$router.go(-1)},mounted:function(){this.getStatsSousAnn()}}),c=n(7),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-5 mx-2"},[n("span",{staticClass:"text-xl"},[t._v(" Gestion de sous-annonceurs ")]),t._v(" "),n("div",{staticClass:"mt-2 border bg-gray-50 rounded p-2"},[n("span",{staticClass:"font-bold pb-2"},[t._v("Liste des locations")]),t._v(" "),t.list_loc.length>0?n("div",{staticClass:"flex flex-col"},t._l(t.list_loc,(function(e){return n("div",{key:e.saloc_id,staticClass:"flex p-2 mb-1 rounded border hover:shadow-lg"},[n("div",{staticClass:" h-14 w-14 mr-2 flex justify-center items-center border rounded"},[e.name_min_file?n("img",{attrs:{src:"/api/p/media/"+e.name_min_file,alt:"",srcset:""}}):n("span",{staticClass:"material-icons"},[t._v(" image ")])]),t._v(" "),n("div",{staticClass:"flex flex-col"},[n("span",{staticClass:"font-bold"},[t._v(" "+t._s(e.pan_publoc_ref)+" ")]),t._v(" "),n("span",{staticClass:"text-sm"},[t._v(" "+t._s(e.lieu_label)+" ")]),t._v(" "),n("div",{},[n("span",{},[t._v("Société : ")]),t._v(" "),n("span",{staticClass:"text-sm font-bold"},[t._v(" "+t._s(e.sous_ann_label)+" ")])])]),t._v(" "),n("div",[n("span",[t._v("Du ")]),t._v(" "),n("span",{staticClass:"text-xs"},[t._v(" "+t._s(t.dateToText(e.saloc_date_debut))+" ")]),t._v(" "),n("span",{},[t._v(" à ")]),t._v(" "),n("span",{staticClass:"text-xs"},[t._v(" \n                        "+t._s((o=new Date(e.saloc_date_debut),t.dateToText(o.setMonth(o.getMonth()+parseInt(e.saloc_month)))))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"flex-grow flex justify-end"},[n("button",{staticClass:"bt-prev-next",on:{click:function(n){return t.delLocation(e.saloc_id)}}},[n("span",{staticClass:"material-icons"},[t._v(" clear ")])])])]);var o})),0):n("div",{staticClass:"flex border-t  h-72  w-full justify-center items-center"},[n("span",{},[t._v(" Aucune location pour vos panneaux ")])])]),t._v(" "),n("div",{staticClass:"mt-5 border bg-gray-50 rounded p-2"},[n("div",{staticClass:"flex items-center "},[n("span",{staticClass:"font-bold"},[t._v("Location de panneau")]),t._v(" "),n("span",{staticClass:"w-16"}),t._v(" "),t.in_edit_location?t._e():n("button",{staticClass:"bt text-sm",on:{click:function(e){t.in_edit_location=!0}}},[t._v("Louer un  de vos panneaux ")]),t._v(" "),t.in_edit_location?n("button",{staticClass:"bt text-sm",on:{click:function(e){t.in_edit_location=!1}}},[t._v("Annuler ")]):t._e()]),t._v(" "),t.in_edit_location?n("div",{staticClass:"flex items-end flex-wrap"},[n("div",{staticClass:"flex items-end m-2"},[null!=t.pan_selected?n("div",{staticClass:"flex flex-col text-sm p-2 border rounded-lg"},[n("span",{staticClass:"text-xs text-indigo-600"},[t._v(" Panneau ... ")]),t._v(" "),n("span",{staticClass:"font-bold"},[t._v(" "+t._s(t.pan_selected.pan_ref)+" ")]),t._v(" "),n("span",{staticClass:"text-xs"},[t._v(" "+t._s(t.pan_selected.lieu_label)+" ")])]):n("div",{staticClass:"flex justify-center items-center text-sm p-2 border rounded-lg"},[n("span",{},[t._v(" Aucun panneau ")])]),t._v(" "),n("button",{staticClass:"ml-2 bt-prev-next text-sm",on:{click:function(e){t.show_select_pan=!0}}},[n("span",{staticClass:"material-icons"},[t._v(" edit ")])])]),t._v(" "),n("div",{staticClass:"flex items-end m-2"},[null!=t.ann_selected?n("div",{staticClass:"flex flex-col text-sm p-2 border rounded-lg"},[n("span",{staticClass:"text-xs text-indigo-600"},[t._v(" Société ... ")]),t._v(" "),n("span",{staticClass:"font-bold"},[t._v(" "+t._s(t.ann_selected.ann_label)+" ")])]):n("div",{staticClass:"flex justify-center items-center text-sm p-2 border rounded-lg"},[n("span",{},[t._v(" Aucune société ")])]),t._v(" "),n("button",{staticClass:"ml-2 bt-prev-next text-sm",on:{click:function(e){t.show_select_ann=!0}}},[n("span",{staticClass:"material-icons"},[t._v(" edit ")])])]),t._v(" "),n("div",{staticClass:"m-1 p-2"},[n("custom-input",{attrs:{type:"number",label:"Nombre de mois ..."},model:{value:t.location_model.saloc_month,callback:function(e){t.$set(t.location_model,"saloc_month",e)},expression:"location_model.saloc_month"}})],1),t._v(" "),n("div",{staticClass:"m-1 p-2"},[n("custom-input",{attrs:{type:"date",label:"Date de début prvisionnelle ..."},model:{value:t.location_model.saloc_date_debut,callback:function(e){t.$set(t.location_model,"saloc_date_debut",e)},expression:"location_model.saloc_date_debut"}})],1)]):t._e(),t._v(" "),t.in_edit_location?n("div",{staticClass:"p-2 border-t mt-2"},[n("button",{staticClass:"bt text-sm",on:{click:t.validLocation}},[t._v("Valider la location")])]):t._e()]),t._v(" "),t.show_select_pan?n("list-pan",{on:{selected:function(p){t.pan_selected=p,t.show_select_pan=!1,t.location_model.saloc_pan_id=p.pan_id},close:function(e){t.show_select_pan=!1}}}):t._e(),t._v(" "),t.show_select_ann?n("choose-ann",{on:{selected:function(a){t.ann_selected=a,t.show_select_ann=!1,t.location_model.saloc_sous_ann_id=a.ann_id},close:function(e){t.show_select_ann=!1}}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CustomInput:n(358).default,ListPan:n(418).default,ChooseAnn:n(419).default})}}]);
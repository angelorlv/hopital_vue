(window.webpackJsonp=window.webpackJsonp||[]).push([[78,20,48],{384:function(e,t,n){var content=n(390);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(27).default)("2aa765fa",content,!0,{sourceMap:!1})},389:function(e,t,n){"use strict";n(384)},390:function(e,t,n){var o=n(26)((function(i){return i[1]}));o.push([e.i,"/*purgecss start ignore*/\n.leaflet-popup .leaflet-popup-content-wrapper{\n  background-color:transparent;\n  box-shadow:none;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-content{\n  width:200px;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-tip-container{\n  top:0;\n  display:none\n}\n\n/*purgecss end ignore*/",""]),o.locals={},e.exports=o},413:function(e,t,n){"use strict";n.r(t);var o=n(3),r=(n(25),n(37),n(61),n(363)),l=n.n(r),c=(n(375),n(373),n(374),n(376),n(377),{props:["list_panel","ann_color"],watch:{load_data:function(a){a&&this.initMap()}},data:function(){return{mymap:{},accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",layerGroup:{},markers:{},index_selected:-1}},methods:{setLinkPan:function(){return"r-panneau"==this.$route.name?"r/":"a-panneau"==this.$route.name?"a/":"admin-panneau"==this.$route.name?"admin/":""},initMap:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e.mymap=l.a.map("map",{zoomControl:!0}).setView([-19.002846,46.460938],5),l.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(e.mymap),l.a.Control.geocoder({defaultMarkGeocode:!1}).addTo(e.mymap).on("markgeocode",(function(t){e.mymap.setView([t.geocode.center.lat,t.geocode.center.lng],12)})),e.markers=new l.a.MarkerClusterGroup({iconCreateFunction:function(e){var html='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-30 bg-indigo-600 w-12 h-12">';return html+='<div class="bg-indigo-600 h-10 w-10 text-gray-100 flex rounded-full justify-center items-center font-bold">'+e.getAllChildMarkers().length+"</div>",html+="</div>",l.a.divIcon({html:html,className:"mycluster",iconSize:l.a.point(32,32)})}}),i=0;i<e.list_panel.length;i++)n=e.list_panel[i],o='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-0 bg-indigo-600 w-12 h-12">\n                <span class="material-icons duration-300 text-indigo-600 hover:text-indigo-900 " style="font-size:50px;color:'.concat(e.ann_color[n.ann_id],'"> place </span>\n                </div>'),'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12">','<span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span>',"</div>",r=l.a.divIcon({className:"custom-div-icon",html:o,iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),l.a.divIcon({className:"custom-div-icon",html:'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12"><span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span></div>',iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),{className:"custom-popup"},c=l.a.marker([n.lieu_lat,n.lieu_lng],{icon:r}),e.markers.addLayer(c);e.mymap.addLayer(e.markers);case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.initMap()}}),d=(n(389),n(7)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"relative",staticStyle:{height:"500px",width:"100%"}},[t("div",{staticStyle:{height:"100%",width:"100%","border-radius":"8px"},attrs:{id:"map"}})])}],!1,null,null,null);t.default=component.exports},414:function(e,t,n){"use strict";n.r(t);n(156);var o={props:["list_ann","list_ann_selected","ann_color"],data:function(){return{}},computed:{},methods:{sChange:function(e){var t=this.list_ann_selected.indexOf(e);-1!=t?this.list_ann_selected.splice(t,1):this.list_ann_selected.push(e)}}},r=n(7),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fixed z-50 w-screen p-2 h-screen top-0 left-0 bg-white bg-opacity-80 flex justify-center items-center",style:{"z-index":1050}},[n("div",{staticClass:"border bg-white rounded-lg shadow-lg",style:{width:"600px","z-index":1050}},[n("div",{staticClass:"border-b p-2 flex items-center"},[n("span",{staticClass:"font-bold"},[e._v(" Choix annonceur ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm",on:{click:function(t){return e.$emit("close")}}},[e._v(" Retour ")])]),e._v(" "),n("div",{},[e._m(0),e._v(" "),n("div",{staticClass:"h-80 overflow-auto flex flex-col"},e._l(e.list_ann,(function(a){return n("div",{key:a.ann_id,staticClass:"flex justify-center items-center p-2 border-t border-b hover:bg-gray-50"},[n("input",{staticClass:"mx-2",attrs:{id:a.ann_id,type:"checkbox"},domProps:{checked:-1!=e.list_ann_selected.indexOf(a.ann_id)},on:{change:function(t){return e.sChange(a.ann_id)}}}),e._v(" "),n("label",{staticClass:"flex-grow",attrs:{for:a.ann_id}},[e._v(" "+e._s(a.ann_label)+" ")]),e._v(" "),n("span",{staticClass:"w-10 h-10 border rounded",style:{backgroundColor:e.ann_color[a.ann_id]}})])})),0),e._v(" "),n("div",{staticClass:"flex items-end p-2"},[n("button",{staticClass:"bt text-xs",on:{click:function(t){return e.$emit("validate")}}},[e._v(" Valider ")])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 border-b bg-gray-50"},[n("span",{staticClass:"text-xs"},[e._v(" Choisissez les annonceurs que vous voulez voir sur la carte ")])])}],!1,null,null,null);t.default=component.exports},489:function(e,t,n){"use strict";n.r(t);var o=n(3),r=(n(25),{data:function(){return{list_ann:[],in_choose_ann:!1,list_ann_selected:[],ann_color:{},list_panel:[],loaded:!0,this_ann_id:-1}},methods:{init:function(){this.recupDataPige(),console.log(this.$store.state.profil)},recupDataPige:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur/pige/all-data-utils");case 3:if(!(n=t.sent).status){t.next=13;break}return e.list_ann=n.list_ann,e.this_ann_id=n.this_ann_id,e.list_ann_selected.push(e.this_ann_id),e.setRandomColor(),t.next=11,e.recupPanAnn();case 11:t.next=14;break;case 13:e.showNotif("Erreur",n.message,!0);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),e.showConnexionError();case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},recupPanAnn:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loaded=!1,t.prev=1,t.next=4,e.$axios.$get("../api/a/annonceur/pige/ann-panel",{params:{anns_id:e.list_ann_selected}});case 4:(n=t.sent).status?e.list_panel=n.list_panel:e.showNotif("Erreur",n.message,!0),e.loaded=!0,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.showConnexionError();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},setRandomColor:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n={},i=0;i<e.list_ann.length;i++)n=e.list_ann[i],e.ann_color[n.ann_id]=e.generateRandomColor();return e.ann_color[e.this_ann_id]=e.generateRandomColor(),t.next=5,e.recupPanAnn();case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.init()}}),l=n(7),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-2"},[n("div",{},[e._m(0),e._v(" "),n("div",{staticClass:"flex flex-col p-2 "},[n("div",{staticClass:"flex flex-wrap mb-2"},[n("button",{staticClass:"text-xs bt mx-2",on:{click:function(t){e.in_choose_ann=!0}}},[e._v(" Sélectionnez les annonceurs ")]),e._v(" "),n("span",{staticClass:"mx-2"},[e._v(" Annonceurs séléctionnés : "+e._s(e.list_ann_selected.length)+" ")]),e._v(" "),n("button",{staticClass:"bt-back text-xs",on:{click:function(t){return e.setRandomColor()}}},[e._v(" Réinitialiser les couleurs ")])]),e._v(" "),e.loaded?n("div",{staticClass:"flex flex-wrap"},[n("div",{staticClass:"flex rounded border bg-white justify-center items-center p-1"},[n("span",{staticClass:"mx-2 text-xs "},[e._v(" Vous ")]),e._v(" "),n("span",{staticClass:"w-6 h-6 mx-2 rounded-full",style:{backgroundColor:e.ann_color[e.this_ann_id]}})]),e._v(" "),e._l(e.list_ann,(function(a){return n("div",{directives:[{name:"show",rawName:"v-show",value:-1!=e.list_ann_selected.indexOf(a.ann_id),expression:" list_ann_selected.indexOf(a.ann_id) != -1 "}],key:a.ann_id,staticClass:"flex rounded border bg-white justify-center items-center p-1"},[n("span",{staticClass:"mx-2 text-xs "},[e._v(" "+e._s(a.ann_label)+" ")]),e._v(" "),n("span",{staticClass:"w-6 h-6 mx-2 rounded-full",style:{backgroundColor:e.ann_color[a.ann_id]}})])}))],2):e._e()])]),e._v(" "),e.list_panel.length>0&&e.loaded?n("div",{staticClass:"p-5 flex items-start justify-center"},[n("map-pige",{attrs:{ann_color:e.ann_color,list_panel:e.list_panel}})],1):e._e(),e._v(" "),e.in_choose_ann?n("choose-ann-pige",{attrs:{ann_color:e.ann_color,list_ann_selected:e.list_ann_selected,list_ann:e.list_ann},on:{close:function(t){e.in_choose_ann=!1},validate:function(){e.in_choose_ann=!1,e.recupPanAnn()}}}):e._e()],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2"},[n("span",{staticClass:"text-xs"},[e._v(" La gestion des maps est en cours de construction ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{MapPige:n(413).default,ChooseAnnPige:n(414).default})}}]);
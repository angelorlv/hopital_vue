(window.webpackJsonp=window.webpackJsonp||[]).push([[103,17,23,26],{358:function(t,e,n){"use strict";n.r(e);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},c=n(7),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:t.autofocus,id:t.id,type:t.type,placeholder:t.label},domProps:{value:t.value},on:{input:function(e){return t.updateInput()},focus:function(){t.on_focus=!0,t.$emit("focus")},blur:function(){t.on_focus=!1,t.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);e.default=component.exports},359:function(t,e,n){var content=n(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("2d1dc0a2",content,!0,{sourceMap:!1})},360:function(t,e,n){"use strict";n(359)},361:function(t,e,n){var l=n(26)((function(i){return i[1]}));l.push([t.i,"/*purgecss start ignore*/\n.fade-enter-active,.fade-leave-active{\n  transition:opacity .3s\n}\n.fade-enter,.fade-leave-to{\n  opacity:0\n}\n\n/*purgecss end ignore*/",""]),l.locals={},t.exports=l},362:function(t,e,n){"use strict";n.r(e);var l={props:["value","datas","label","code","placeholder","padding","width"],watch:{datas:function(a){this.$emit("input",void 0===a[0]?null:a[0][this.code])}},data:function(){return{}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)}},mounted:function(){}},c=(n(360),n(7)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative flex flex-col"},[t.placeholder?n("div",{staticClass:"text-xs duration-300 flex items-center font-bold",class:t.datas.length>0?" h-4":"h-0"},[t.datas.length>0?n("label",{staticClass:"z-10 px-1 text-indigo-600"},[t._v(" "+t._s(t.placeholder)+" ")]):t._e()]):t._e(),t._v(" "),n("div",[n("select",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",on:{change:function(e){return t.updateInput()}}},t._l(t.datas,(function(e){return n("option",{key:e[t.code],domProps:{value:e[t.code],selected:t.value==e[void 0===t.code?"code":t.code]}},[t._v(" "+t._s(e[void 0===t.label?"label":t.label])+" ")])})),0)])])}),[],!1,null,null,null);e.default=component.exports},388:function(t,e,n){"use strict";n.r(e);var l={props:["dialog"],data:function(){return{}}},c=n(7),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.dialog.show?n("div",{staticClass:"w-screen z-40 h-screen bg-white bg-opacity-70 fixed top-0 left-0 flex justify-center items-center"},[n("div",{staticClass:"rounded-lg border relative shadow-lg bg-white flex flex-col ",staticStyle:{width:"500px","min-height":"200px border"}},[n("button",{staticClass:"absolute top-2 right-2 bt-prev-next",on:{click:function(e){return t.$emit("close")}}},[n("span",{staticClass:"material-icons"},[t._v(" clear ")])]),t._v(" "),n("div",{staticClass:"p-2"},[n("span",{staticClass:"text-lg"},[t._v(" "+t._s(t.dialog.title)+" ")])]),t._v(" "),n("div",{staticClass:"py-5 px-2 border-t border-b"},[n("span",{domProps:{innerHTML:t._s(t.dialog.content)}})]),t._v(" "),void 0===t.dialog.show_bt||1==t.dialog.show_bt?n("div",{staticClass:"flex justify-end items-end p-2"},[n("button",{staticClass:"text-sm bt mx-2",on:{click:function(e){return t.$emit("dclick",{res:"no",state:t.dialog.type})}}},[t._v("Non")]),t._v(" "),n("button",{staticClass:"text-sm bt",on:{click:function(e){return t.$emit("dclick",{res:"yes",state:t.dialog.type})}}},[t._v("Oui")])]):t._e()])]):t._e()])}),[],!1,null,null,null);e.default=component.exports},553:function(t,e,n){"use strict";n.r(e);var l=n(3),c=(n(156),n(56),n(229),n(21),n(82),n(230),n(25),{layout:"espace",watch:{},data:function(){return{nb_cat:0,cur_state:"list",cat:{list:[]},cat_id:-1,label_list:[{label:"Libellé",width:200,key:"cat_label"},{label:"Couleur",width:100,key:"cat_color"},{label:"Icône",width:100,key:"cat_icon"},{label:"Nb. Panneau",width:120,key:"nb_panel"}],pan_selected_index_list:[],dialog:{show:!1,title:"Titre",content:"Contenu",type:""},load:!1,col_search:"cat_label",list_col_search:[{label:"Libellé",code:"cat_label"}],input_search:"",cur_sub_cat_list:[],cur_id_selected:-1}},methods:{getListCategory:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.load=!1,e.next=3,t.$axios.$get("api/a/category").then((function(t){return t}));case 3:(n=e.sent).status?(t.cat.list=n.categories,t.load=!0):alert(n.message);case 5:case"end":return e.stop()}}),e)})))()},addSpliceSelected:function(i){var t=this.pan_selected_index_list.indexOf(i);-1==t?this.pan_selected_index_list.push(i):this.pan_selected_index_list.splice(t,1)},countCat:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("api/a/category/count").then((function(t){return t}));case 2:(n=e.sent).status?t.nb_cat=n.nb:alert(n.message);case 4:case"end":return e.stop()}}),e)})))()},viewCat:function(i){this.$router.push({name:"admin-category-id",params:{id:i}})},showDialog:function(t,e){this.dialog.show=!0,this.dialog.title=t,this.dialog.content=e},delDialog:function(){var t='<div class=""> <span>Nombre de catégorie qui seront Supprimées</span> <span class="font-bold">('+this.pan_selected_index_list.length+")</span> </div>";t+="<span>Toutes les sous catégories seront supprimées.</span> ",t+='<span class="whitespace-pre-wrap font-bold text-indigo-600">Voulez-vous continuer ? </span>',this.showDialog("Suppression de Catégorie",t)},resDialog:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("no"!=t.res){n.next=4;break}e.dialog.show=!1,n.next=9;break;case 4:return e.dialog.content="<span class='animate-bounce'>Suppression en cours ...</span>",n.next=7,e.deleteCategories();case 7:(l=n.sent).status?(e.dialog.content="<span class='text-green-600 font-bold'>Suppression Terminée avec Succés </span>",e.countCat(),e.getListCategory(),e.pan_selected_index_list=[],setTimeout((function(){e.dialog.show=!1}),1e3)):e.dialog.content="<span class='text-red-500 font-bold'>Erreur pendant la suppression. Etat : "+(l.state?l.state:"-")+" </span>";case 9:case"end":return n.stop()}}),n)})))()},deleteCategories:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],i=0;i<t.pan_selected_index_list.length;i++)l=t.cat.list[t.pan_selected_index_list[i]],n.push({cat_id:l.cat_id,parent_cat_id:l.parent_cat_id});return e.abrupt("return",t.$axios.$delete("api/a/category",{data:n}));case 3:case"end":return e.stop()}}),e)})))()},getSubCatByIdParent:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$get("api/a/category/sous/".concat(t));case 3:l=n.sent,e.cur_sub_cat_list=l.list,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showErrorConnexion();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},match_search:function(t){if(""==this.col_search)return!0;if(null==t[this.col_search])return!1;if(null!=this.input_search&&""!=this.input_search){var e=new RegExp(".?"+this.input_search+".?","gi");return null!=t[this.col_search].match(e)}return!0},selectAll:function(){var t=this.cat.list.length;this.pan_selected_index_list=[];for(var i=0;i<t;i++)this.pan_selected_index_list.push(i)},deselectAll:function(){this.pan_selected_index_list=[]},toggleCheck:function(t){this.pan_selected_index_list.length>0?this.deselectAll():this.selectAll()}},mounted:function(){this.countCat(),this.getListCategory()}}),r=n(7),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col w-full"},[n("div",{staticClass:"flex w-full h-16 px-2 border-b sticky top-0 bg-white z-20"},[n("div",{staticClass:"flex justify-center w-full items-center"},[n("span",{staticClass:"text-2xl"},[t._v("Catégories")]),t._v(" "),n("span",{staticClass:"text-xs p-1 px-3 rounded ml-1 flex  text-center bg-indigo-500 text-gray-100"},[t._v(t._s(t.nb_cat))]),t._v(" "),n("div",{staticClass:"flex-grow flex justify-center items-center"},[n("transition",{attrs:{name:"fade"}},[t.pan_selected_index_list.length>0?n("div",{staticClass:"w-full flex items-center justify-center"},[n("button",{staticClass:"bt text-sm mr-2",on:{click:t.delDialog}},[t._v("Supprimer")])]):n("div",{staticClass:"flex items-end"},[n("custom-input",{staticClass:"mr-2 ",attrs:{type:"text",label:"Recherche ..."},model:{value:t.input_search,callback:function(e){t.input_search=e},expression:"input_search"}}),t._v(" "),n("c-select",{attrs:{datas:t.list_col_search,label:"label",code:"code",placeholder:"Tout",padding:"p-1",width:"100px"},model:{value:t.col_search,callback:function(e){t.col_search=e},expression:"col_search"}})],1)])],1),t._v(" "),n("button",{staticClass:"bt",on:{click:function(e){return t.$router.push("/admin/category/add")}}},[n("span",[t._v("Ajouter une catégorie")])])])]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.load?n("div",{staticClass:"flex flex-col items-center justify-center mt-5"},t._l(t.cat.list,(function(e){return n("div",{key:e.cat_id,staticClass:" border flex-col bg-gray-50 flex rounded-lg mb-1",class:{"border-indigo-600 shadow-lg":t.cur_id_selected==e.cat_id},staticStyle:{width:"500px"}},[n("div",{staticClass:"flex items-center p-1"},[n("div",{staticClass:"p-2 relative flex justify-center items-center mr-2 border rounded-lg w-11",class:" font-bold",style:{borderColor:e.cat_color,color:e.cat_color}},[n("div",{staticClass:"w-full h-full rounded-lg opacity-20 absolute top-0",style:{backgroundColor:e.cat_color}}),t._v(" "),e.cat_icon?n("span",{staticClass:"material-icons"},[t._v(" "+t._s(e.cat_icon)+" ")]):n("span",{staticClass:"font-bold text-lg"},[t._v(" "+t._s(e.cat_label.toUpperCase()[0])+" ")])]),t._v(" "),n("nuxt-link",{staticClass:"font-bold mr-2 hover:underline",attrs:{to:"/admin/category/"+e.cat_id+" "}},[t._v(" "+t._s(e.cat_label)+" ")]),t._v(" "),n("span",{staticClass:"text-xs"},[t._v(" [ Sous-catégories "+t._s(e.nb_sous_cat)+" ]")]),t._v(" "),n("span",{staticClass:"flex-grow"}),t._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(){t.cur_id_selected!=e.cat_id?(t.cur_id_selected=e.cat_id,t.cur_sub_cat_list=[],t.getSubCatByIdParent(e.cat_id)):t.cur_id_selected=-1}}},[n("span",{staticClass:"material-icons"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.cur_id_selected==e.cat_id?"expand_less":"expand_more")+"\n\t\t\t\t\t\t\t")])])],1),t._v(" "),t.cur_id_selected==e.cat_id?n("div",{staticClass:"border-t flex flex-col mt-1 p-1 px-2 duration-300 overflow-auto",style:{maxHeight:"200px"}},t._l(t.cur_sub_cat_list,(function(e){return n("nuxt-link",{key:e.cat_id,staticClass:"text-xs my-1 hover:underline",attrs:{to:"/admin/category/"+e.cat_id}},[t._v(" "+t._s(e.cat_label)+" ")])})),1):t._e()])})),0):t._e()]),t._v(" "),n("dialog-confirm",{attrs:{dialog:t.dialog},on:{dclick:t.resDialog,close:function(e){t.dialog.show=!1}}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CustomInput:n(358).default,CSelect:n(362).default,DialogConfirm:n(388).default})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[118,14,17,18,23,30,45,47,49,50,54],{358:function(e,t,n){"use strict";n.r(t);var l={props:["label","type","id","autofocus","width","value"],data:function(){return{on_focus:!1,style:{height:40},input:{style:{},model:""}}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)},focusInput:function(){this.$refs.cinput.focus()}},mounted:function(){},created:function(){}},o=n(7),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.input.style},[n("div",{staticClass:"text-xs duration-300 flex items-center font-bold h-4"},[n("label",{staticClass:"z-10 px-1 text-indigo-600",attrs:{for:e.id}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",attrs:{autofocus:e.autofocus,id:e.id,type:e.type,placeholder:e.label},domProps:{value:e.value},on:{input:function(t){return e.updateInput()},focus:function(){e.on_focus=!0,e.$emit("focus")},blur:function(){e.on_focus=!1,e.$emit("blur")}}})])}),[],!1,null,"a221d83e",null);t.default=component.exports},359:function(e,t,n){var content=n(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(27).default)("2d1dc0a2",content,!0,{sourceMap:!1})},360:function(e,t,n){"use strict";n(359)},361:function(e,t,n){var l=n(26)((function(i){return i[1]}));l.push([e.i,"/*purgecss start ignore*/\n.fade-enter-active,.fade-leave-active{\n  transition:opacity .3s\n}\n.fade-enter,.fade-leave-to{\n  opacity:0\n}\n\n/*purgecss end ignore*/",""]),l.locals={},e.exports=l},362:function(e,t,n){"use strict";n.r(t);var l={props:["value","datas","label","code","placeholder","padding","width"],watch:{datas:function(a){this.$emit("input",void 0===a[0]?null:a[0][this.code])}},data:function(){return{}},methods:{updateInput:function(){this.$emit("input",this.$refs.cinput.value)}},mounted:function(){}},o=(n(360),n(7)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative flex flex-col"},[e.placeholder?n("div",{staticClass:"text-xs duration-300 flex items-center font-bold",class:e.datas.length>0?" h-4":"h-0"},[e.datas.length>0?n("label",{staticClass:"z-10 px-1 text-indigo-600"},[e._v(" "+e._s(e.placeholder)+" ")]):e._e()]):e._e(),e._v(" "),n("div",[n("select",{ref:"cinput",staticClass:"input-alt w-full duration-300 text-xs",on:{change:function(t){return e.updateInput()}}},e._l(e.datas,(function(t){return n("option",{key:t[e.code],domProps:{value:t[e.code],selected:e.value==t[void 0===e.code?"code":e.code]}},[e._v(" "+e._s(t[void 0===e.label?"label":e.label])+" ")])})),0)])])}),[],!1,null,null,null);t.default=component.exports},364:function(e,t,n){var content=n(367);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(27).default)("66a93922",content,!0,{sourceMap:!1})},366:function(e,t,n){"use strict";n(364)},367:function(e,t,n){var l=n(26)((function(i){return i[1]}));l.push([e.i,"/*purgecss start ignore*/\n.leaflet-popup .leaflet-popup-content-wrapper{\n  background-color:transparent;\n  box-shadow:none;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-content{\n  width:200px;\n  padding:0\n}\n.leaflet-popup .leaflet-popup-tip-container{\n  top:0;\n  display:none\n}\n\n/*purgecss end ignore*/",""]),l.locals={},e.exports=l},370:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(25),n(37),n(61),n(56),n(373),n(374),{}),r={props:["list_coord","load_data"],watch:{load_data:function(a){a&&this.initMap()}},data:function(){return{mymap:{},accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",layerGroup:{},markers:{},index_selected:-1}},methods:{setLinkPan:function(){return"r-panneau"==this.$route.name?"r/":"a-panneau"==this.$route.name?"a/":"admin-panneau"==this.$route.name?"admin/":""},initMap:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,i,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e.mymap=o.map("map",{zoomControl:!0}).setView([-19.002846,46.460938],5),o.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(e.mymap),e.markers=new o.MarkerClusterGroup({iconCreateFunction:function(e){var html='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-30 bg-indigo-600 w-12 h-12">';return html+='<div class="bg-indigo-600 h-10 w-10 text-gray-100 flex rounded-full justify-center items-center font-bold">'+e.getAllChildMarkers().length+"</div>",html+="</div>",o.divIcon({html:html,className:"mycluster",iconSize:o.point(32,32)})}}),n=function(i){var t=e.list_coord[i];l='<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12">',l+='<span class="material-icons duration-300 text-indigo-600 hover:text-indigo-900 " style="font-size:50px;color:'.concat(t.cat_color,'"> place </span>'),l+="</div>",'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12">','<span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span>',"</div>";var n=o.divIcon({className:"custom-div-icon",html:l,iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),r=o.divIcon({className:"custom-div-icon",html:'<div style="font-family: \'Roboto Mono\';" class="flex duration-300 hover:w-14 hover:h-14 justify-center rounded-full text-lg items-center bg-opacity-10 bg-indigo-600 w-12 h-12"><span class="material-icons duration-300 text-red-600 hover:text-red-900 " style="font-size:50px;"> place </span></div>',iconSize:[30,42],iconAnchor:[30,35],popupAnchor:[0,-30]}),c=o.marker([t.lieu_lat,t.lieu_lng],{icon:n});e.mymap.on("click",(function(){e.index_selected=-1,e.markers.eachLayer((function(e){e.setIcon(n)}))}));var d=e;c.on("click",(function(){d.markers.eachLayer((function(e){e.setIcon(n)})),d.index_selected=i,this.setIcon(r)})),e.markers.addLayer(c)},i=0;i<e.list_coord.length;i++)n(i);e.mymap.addLayer(e.markers);case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;o=n(363),n(375),this.load_data&&setTimeout((function(){e.initMap()}),500)}},c=(n(366),n(7)),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative",staticStyle:{height:"500px",width:"100%"}},[n("div",{staticStyle:{height:"100%",width:"100%","border-radius":"8px"},attrs:{id:"map"}}),e._v(" "),n("div",{staticClass:"bg-gray-100 flex w-72 rounded-lg absolute top-5 right-5 duration-300",class:-1==e.index_selected?"h-16":"h-48",staticStyle:{"z-index":"1002"}},[-1!=e.index_selected?n("div",{staticClass:"cursor-pointer p-2 flex w-full relative flex-col justify-start items-start",on:{click:function(){"a-search-place"==e.$route.name?e.$router.push("/a/search-place/"+e.list_coord[e.index_selected].pan_id):e.$router.push("/"+e.setLinkPan()+"panneau/"+e.list_coord[e.index_selected].pan_id)}}},[n("div",{staticClass:"flex absolute top-4 left-4"},[n("span",{staticClass:"p-2 rounded-full bg-indigo-600 text-white"},[e._v(" "+e._s(e.list_coord[e.index_selected].pan_publoc_ref)+" ")])]),e._v(" "),null!=e.list_coord[e.index_selected].name_file?n("div",{staticClass:"h-full w-full flex rounded-t"},[n("img",{staticClass:"object-cover flex-grow rounded",attrs:{src:"/api/p/media/"+e.list_coord[e.index_selected].name_min_file,loading:"lazy",crossorigin:"anonymous"}})]):e._e(),e._v(" "),n("div",{staticClass:"flex justify-end items-end font-bold absolute p-2 w-full h-16 bg-gradient-to-t rounded-b-lg from-gray-700 to-transparent via-gray-700 left-0 bottom-0"},[n("span",{staticClass:"py-2 text-gray-200 block w-full"},[e._v(" "+e._s(e.list_coord[e.index_selected].lieu_label)+" ")])])]):n("div",{staticClass:"p-2 flex justify-center items-center text-gray-400"},[n("span",[e._v(" Cliquez sur un marqueur pour plus de détails ")])])])])}),[],!1,null,null,null);t.default=component.exports},382:function(e,t,n){"use strict";n.r(t);n(56);var l={props:["is_top"],data:function(){return{open:!1,style:{}}},methods:{delOnBlur:function(){var e=this;this.style.opacity=0,setTimeout((function(){e.open=!1,e.style.opacity=100}),300)},toggleOpen:function(){this.open?this.open=!1:this.open=!0},init:function(){this.style={opacity:100}}},mounted:function(){this.init()}},o=n(7),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-2",staticStyle:{"z-index":"1011"},attrs:{tabindex:"0"}},[n("button",{staticClass:"bt-prev-next",on:{click:e.toggleOpen,blur:e.delOnBlur}},[n("span",{staticClass:"material-icons"},[e._v("more_vert")])]),e._v(" "),e.open?n("div",{staticClass:"absolute text-xs rounded mt-2 w-48 flex py-1 flex-col border right-0 bg-white shadow-lg",class:{"bottom-12":e.is_top},staticStyle:{"z-index":"1011"},style:e.style},[e._t("default")],2):e._e()])}),[],!1,null,null,null);t.default=component.exports},395:function(e,t,n){"use strict";var l=n(3);n(13),n(82),n(25);t.a={data:function(){return{panel:{list:[]},nbPage:1,nbPanel:0,filters:{page:1,limit:150}}},methods:{checkStatePanel:function(s){switch(s){case 1:return"Dispo";case 2:return"En Réservation";case 3:return"En location";case 4:return"Inactif"}},getListPanneau:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loaded=!1,t.next=4,e.$axios.$get("api/a/panel/admin/filters",{params:e.filters});case 4:(n=t.sent).status?(e.panel.list=n.panels,l=Math.ceil(n.countPanel/e.filters.limit),e.nbPage=l<=0?1:l,e.nbPanel=n.countPanel,e.loaded=!0):e.showNotif("Erreur de récupération des donnée",n.message,!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.showNotif("Erreur de récupération des donnée","Connexion pas établie avec le serveur.",!0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},computed:{tabNbPage:function(){for(var e=[],i=0;i<this.nbPage;i++)e.push({label:(i+1).toString(),code:i+1});return e}}}},426:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(25),{props:["pans","pans_id"],watch:{agent_model_search:function(a){a&&this.getAgent()}},data:function(){return{view_list_panel:!1,in_pan_is_in_location:!1,loc:{},ann_selected:null,ann_model_search:"",in_select_ann:!1,in_select_agent:!1,agent_model_search:"",agent_selected:null,agent:[],panel_post:[],ann:[],nullReg:!1}},methods:{init:function(){},check_in_location:function(){for(var e=0,i=0;i<this.pans.length;i++)if(-1!=(e=this.pans_id.indexOf(this.pans[i].pan_id))&&this.panel_post.push({pan_id:this.pans[i].pan_id,reg_id:this.pans[i].reg_id}),-1!=e&&"3"==this.pans[i].pan_state){this.in_pan_is_in_location=!0;break}},getAgent:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/mobile/agt",{params:{search:e.agent_model_search}});case 3:(n=t.sent).status?e.agent=n.agent:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validateAssignAgent:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.agent_selected){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$axios.$post("api/a/mobile/agt/assign/panel",{pans_id:e.pans_id,agt:e.agent_selected,nullReg:e.nullReg});case 5:(n=t.sent).status?e.$emit("validate"):e.showNotif("Erreur",n.message,!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},mounted:function(){}}),r=n(7),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center top-0 left-0 fixed w-screen h-screen bg-white bg-opacity-75"},[n("div",{staticClass:"bg-white rounded-lg border shadow-lg ",style:{width:"500px"}},[n("div",{staticClass:"p-2 flex border-b items-center"},[n("span",[e._v(" Assigner "),n("strong",[e._v(" "+e._s(e.pans_id.length)+" ")]),e._v(" panneaux à un agent ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm",on:{click:function(t){return e.$emit("close")}}},[e._v(" Retour ")])]),e._v(" "),n("div",{staticClass:"flex flex-wrap items-end p-2 text-xs "},[n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-xs text-indigo-600 font-bold"},[e._v(" Agent ")]),e._v(" "),n("span",{staticClass:"p-2 rounded-lg border cursor-pointer",on:{click:function(){e.in_select_agent=!0}}},[e._v(" "+e._s(e.agent_selected?e.agent_selected.pr_login:"-")+" ")]),e._v(" "),e.in_select_agent?n("div",{staticClass:"z-50 w-screen h-screen absolute top-0 left-0 flex justify-center items-center ",on:{click:function(t){e.in_select_ann=!1}}},[n("div",{staticClass:"shadow-lg bg-white rounded-lg border",staticStyle:{width:"250px"},on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"p-1 border-b"},[n("custom-input",{attrs:{label:"Login de l'agent ..."},model:{value:e.agent_model_search,callback:function(t){e.agent_model_search=t},expression:"agent_model_search"}})],1),e._v(" "),n("div",{staticClass:"flex flex-col overflow-auto",staticStyle:{"max-height":"200px",height:"200px"}},e._l(e.agent,(function(a){return n("span",{key:a.pr_id,staticClass:"p-2 border-b cursor-pointer hover:bg-gray-100",on:{click:function(){e.agent_selected=a,e.in_select_agent=!1}}},[e._v(" \n                                "+e._s(a.pr_login)+"\n                            ")])})),0)])]):e._e()])]),e._v(" "),n("div",{staticClass:"flex justify-center items-center p-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.nullReg,expression:"nullReg"}],staticClass:"mx-2",attrs:{type:"checkbox",id:"nullReg"},domProps:{checked:Array.isArray(e.nullReg)?e._i(e.nullReg,null)>-1:e.nullReg},on:{change:function(t){var n=e.nullReg,l=t.target,o=!!l.checked;if(Array.isArray(n)){var r=e._i(n,null);l.checked?r<0&&(e.nullReg=n.concat([null])):r>-1&&(e.nullReg=n.slice(0,r).concat(n.slice(r+1)))}else e.nullReg=o}}}),e._v(" "),n("label",{staticClass:"mx-2",attrs:{for:"nullReg"}},[e._v(" Effacer le régisseur ")])]),e._v(" "),e.in_pan_is_in_location?e._e():n("div",{staticClass:"flex p-2 border-t"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt text-xs",on:{click:e.validateAssignAgent}},[e._v("Valider")])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})},427:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(25),{watch:{in_locate:function(a){a&&this.ann_list.length<=0&&this.getListAnn()}},props:["pan"],data:function(){return{in_locate:!1,panel:{},ann_list:[],location:{ann_id:null,date_debut:"",month:1}}},methods:{changePanState:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=e||3!=t.panel.pan_state){n.next=4;break}if(confirm("Voulez-vous vraiment annuler la location ?")){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,n.next=7,t.$axios.$put("api/a/ad/panel/change-state",{state:e,pan_id:t.panel.pan_id,state_old:t.panel.pan_state});case 7:(l=n.sent).status?(t.panel.pan_state=e,t.$emit("change_state")):t.showNotif("Erreur",l.message,!0),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),t.showErrorConnexion();case 14:case"end":return n.stop()}}),n,null,[[4,11]])})))()},getListAnn:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur");case 3:(n=t.sent).status?e.ann_list=n.annonceurs:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validateLocation:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$post("api/a/ad/panel/location/validate",{location:e.location,panel:e.panel});case 3:(n=t.sent).status?(e.showNotif("Validation de location","Validation de location avec succès"),e.$emit("change_state"),e.$emit("close")):e.showNotif("Erreur de validation de la location",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){this.panel=this.pan,console.log(this.panel)}}),r=n(7),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fixed top-0 left-0 flex justify-center items-center w-screen h-screen bg-white bg-opacity-80 z-30"},[n("div",{staticClass:"border rounded-lg bg-white  shadow-lg ",staticStyle:{width:"600px"}},[n("div",{staticClass:"flex p-1 items-center border-b"},[n("span",[e._v(" Changement d'Etat du panneau "),n("strong",[e._v(" "+e._s(e.panel.pan_publoc_ref)+" / "+e._s(e.panel.pan_ref)+" ")])]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(t){return e.$emit("close")}}},[n("span",{staticClass:"material-icons"},[e._v(" clear ")])])]),e._v(" "),n("div",{},[n("div",{staticClass:"p-1 border-b bg-gray-50"},[3==e.panel.pan_state?n("span",{},[e._v(" Ce Panneau est actuellement en "),n("strong",{staticClass:"text-blue-500"},[e._v("Location")])]):e._e(),e._v(" "),1==e.panel.pan_state||2==e.panel.pan_state?n("span",{},[e._v(" Ce Panneau est actuellement "),n("strong",{staticClass:"text-green-500"},[e._v("Disponible")])]):e._e(),e._v(" "),4==e.panel.pan_state?n("span",{},[e._v(" Ce Panneau est actuellement "),n("strong",{staticClass:"text-red-500"},[e._v(" Indisponible ")])]):e._e()]),e._v(" "),n("div",[1==e.panel.pan_state||2==e.panel.pan_state?n("div",{},[e.in_locate?n("div",{},[n("div",{staticClass:"flex p-1 border-b items-center"},[n("span",{},[e._v("Choix de l'annonceur")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back",on:{click:function(t){e.in_locate=!1}}},[e._v(" Annuler ")])]),e._v(" "),n("div",{staticClass:" flex flex-col"},[n("div",{staticClass:"flex items-end border-b p-2"},[n("c-select",{attrs:{datas:e.ann_list,label:"ann_label",code:"ann_id",placeholder:"Annonceur ..."},model:{value:e.location.ann_id,callback:function(t){e.$set(e.location,"ann_id",t)},expression:"location.ann_id"}}),e._v(" "),n("span",{staticClass:"w-6"}),e._v(" "),n("custom-input",{attrs:{label:"Date de début ...",type:"date"},model:{value:e.location.date_debut,callback:function(t){e.$set(e.location,"date_debut",t)},expression:"location.date_debut"}}),e._v(" "),n("span",{staticClass:"w-6"}),e._v(" "),n("custom-input",{attrs:{label:"Nombre de  mois ...",type:"number"},model:{value:e.location.month,callback:function(t){e.$set(e.location,"month",t)},expression:"location.month"}})],1),e._v(" "),n("div",{staticClass:"p-2 flex"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt",on:{click:e.validateLocation}},[e._v(" Valider ")])])])]):n("div",{staticClass:"p-2 flex"},[n("button",{staticClass:"bt-cancel",attrs:{type:"button"},on:{click:function(){e.changePanState(4)}}},[e._v(" Mettre en indisponible ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt",attrs:{type:"button"},on:{click:function(){e.in_locate=!0}}},[e._v(" Louer le panneau ")])])]):e._e(),e._v(" "),4==e.panel.pan_state?n("div",[e.in_locate?n("div",{},[n("div",{staticClass:"flex p-2 border-b"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-prev-next",on:{click:function(t){e.in_locate=!1}}},[n("span",{staticClass:"material-icons"},[e._v(" clear ")])])])]):n("div",{staticClass:"p-2 flex"},[n("button",{staticClass:"bt",attrs:{type:"button"},on:{click:function(){e.changePanState(1)}}},[e._v(" Mettre en disponible ")])])]):e._e(),e._v(" "),3==e.panel.pan_state?n("div",{},[n("div",{staticClass:"p-2 flex"},[n("div",{staticClass:"flex flex-col p-2 rounded-lg bg-gray-50 cursor-pointer hover:shadow-lg duration-300"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Régisseur ")]),e._v(" "),n("span",{staticClass:"text-lg"},[e._v(" "+e._s(e.panel.reg_label)+" ")])]),e._v(" "),n("span",{staticClass:"w-10"}),e._v(" "),n("div",{staticClass:"flex flex-col p-2 rounded-lg bg-gray-50 cursor-pointer hover:shadow-lg duration-300"},[n("span",{staticClass:"text-xs font-bold"},[e._v(" Annonceur ")]),e._v(" "),n("span",{staticClass:"text-lg"},[e._v(" "+e._s(e.panel.ann_label)+" ")])])]),e._v(" "),n("div",{staticClass:"p-2"},[n("button",{staticClass:"bt-cancel",on:{click:function(){e.changePanState(1)}}},[e._v(" Annuler la location ")])])]):e._e()])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CSelect:n(362).default,CustomInput:n(358).default})},428:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(25),{props:["pans","pans_id"],watch:{ann_model_search:function(a){a&&this.getAnn()}},data:function(){return{view_list_panel:!1,in_pan_is_in_location:!1,loc:{},ann_selected:null,ann_model_search:"",in_select_ann:!1,panel_post:[],ann:[]}},methods:{init:function(){},check_in_location:function(){for(var e=0,i=0;i<this.pans.length;i++)if(-1!=(e=this.pans_id.indexOf(this.pans[i].pan_id))&&this.panel_post.push({pan_id:this.pans[i].pan_id,reg_id:this.pans[i].reg_id}),-1!=e&&"3"==this.pans[i].pan_state){this.in_pan_is_in_location=!0;break}},getAnn:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur/like/".concat(e.ann_model_search));case 3:(n=t.sent).status?e.ann=n.anns:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validateLocMultiple:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ann_selected){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$axios.$post("api/a/ad/panel/location/multiple",{pans:e.panel_post,pans_id:e.pans_id,loc:e.loc,ann:e.ann_selected});case 5:(n=t.sent).status?e.$emit("validate"):e.showNotif("Erreur",n.message,!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},mounted:function(){this.check_in_location()}}),r=n(7),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center top-0 left-0 fixed w-screen h-screen bg-white bg-opacity-75"},[n("div",{staticClass:"bg-white rounded-lg border shadow-lg ",style:{width:"500px"}},[n("div",{staticClass:"p-2 flex border-b items-center"},[n("span",[e._v(" Location multiple de "),n("strong",[e._v(" "+e._s(e.pans_id.length)+" ")]),e._v(" panneaux pour un annonceur ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm",on:{click:function(t){return e.$emit("close")}}},[e._v(" Retour ")])]),e._v(" "),e.in_pan_is_in_location?n("div",{staticClass:"p-2 flex items-center border-b rounded-b-lg bg-red-500 bg-opacity-10"},[n("span",{staticClass:"text-xs text-red-500"},[e._v(" Certains des panneaux sélectionnés sont actuellement en cours de locations, \n                impossible de faire la location multiple. ")])]):n("div",{staticClass:"flex flex-wrap items-end p-2 text-xs "},[n("custom-input",{staticClass:"m-2",attrs:{type:"date",label:"Date de début"},model:{value:e.loc.date_debut,callback:function(t){e.$set(e.loc,"date_debut",t)},expression:"loc.date_debut"}}),e._v(" "),n("custom-input",{staticClass:"m-2",attrs:{type:"number",label:"Nombre de mois ..."},model:{value:e.loc.month,callback:function(t){e.$set(e.loc,"month",t)},expression:"loc.month"}}),e._v(" "),n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-xs text-indigo-600 font-bold"},[e._v(" Annonceur ")]),e._v(" "),n("span",{staticClass:"p-2 rounded-lg border cursor-pointer",on:{click:function(){e.in_select_ann=!0}}},[e._v(" "+e._s(e.ann_selected?e.ann_selected.ann_label:"-")+" ")]),e._v(" "),e.in_select_ann?n("div",{staticClass:"z-50 w-screen h-screen absolute top-0 left-0 flex justify-center items-center ",on:{click:function(t){e.in_select_ann=!1}}},[n("div",{staticClass:"shadow-lg bg-white rounded-lg border",staticStyle:{width:"250px"},on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"p-1 border-b"},[n("custom-input",{attrs:{label:"Nom de l'annonceur ..."},model:{value:e.ann_model_search,callback:function(t){e.ann_model_search=t},expression:"ann_model_search"}})],1),e._v(" "),n("div",{staticClass:"flex flex-col overflow-auto",staticStyle:{"max-height":"200px",height:"200px"}},e._l(e.ann,(function(a){return n("span",{key:a.ann_id,staticClass:"p-2 border-b cursor-pointer hover:bg-gray-100",on:{click:function(){e.ann_selected=a,e.in_select_ann=!1}}},[e._v(" \n                                "+e._s(a.ann_label)+"\n                            ")])})),0)])]):e._e()])],1),e._v(" "),e.in_pan_is_in_location?e._e():n("div",{staticClass:"flex p-2 border-t"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt text-xs",on:{click:e.validateLocMultiple}},[e._v("Valider")])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})},429:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(25),{props:["pans_id"],data:function(){return{name_pdf:"",link_pdf:"",rapport_ann:!1,in_process:!1}},methods:{exportPdf:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.in_process=!0,t.prev=1,t.next=4,e.$axios.$post("api/a/pdf/generate",{name_pdf:e.name_pdf,pans_id:e.pans_id,rapport_ann:e.rapport_ann});case 4:(n=t.sent).status?e.link_pdf=n.link_pdf:e.showNotif("Erreur",n.message,!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.showErrorConnexion();case 11:e.in_process=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){}}),r=n(7),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center top-0 left-0 fixed w-screen h-screen bg-white bg-opacity-75"},[n("div",{staticClass:"bg-white rounded-lg border shadow-lg ",style:{width:"500px"}},[n("div",{staticClass:"p-2 flex border-b items-center"},[n("span",[e._v(" Exportation en pdf de "+e._s(e.pans_id.length)+" panneaux ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm",on:{click:function(t){return e.$emit("close")}}},[e._v(" Retour ")])]),e._v(" "),n("div",{staticClass:"flex flex-col p-2"},[n("div",{staticClass:"flex items-end"},[n("custom-input",{attrs:{label:"Nom du pdf ..."},model:{value:e.name_pdf,callback:function(t){e.name_pdf=t},expression:"name_pdf"}}),e._v(" "),n("button",{staticClass:"bt text-xs ml-2",on:{click:e.exportPdf}},[e._v("Exporter")])],1),e._v(" "),n("div",{staticClass:"flex items-center py-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.rapport_ann,expression:"rapport_ann"}],attrs:{type:"checkbox",name:"",id:"rapport_c"},domProps:{checked:Array.isArray(e.rapport_ann)?e._i(e.rapport_ann,null)>-1:e.rapport_ann},on:{change:function(t){var n=e.rapport_ann,l=t.target,o=!!l.checked;if(Array.isArray(n)){var r=e._i(n,null);l.checked?r<0&&(e.rapport_ann=n.concat([null])):r>-1&&(e.rapport_ann=n.slice(0,r).concat(n.slice(r+1)))}else e.rapport_ann=o}}}),e._v(" "),n("label",{staticClass:"ml-2",attrs:{for:"rapport_c"}},[e._v("Rapport annonceur")])])]),e._v(" "),e.link_pdf&&!e.in_process?n("div",{staticClass:"p-2 border-t"},[n("span",[e._v(" Le pdf est accessible "),n("a",{staticClass:"text-blue-500 underline",attrs:{target:"_blank",href:e.link_pdf}},[e._v(" ici ")])])]):e._e(),e._v(" "),e.in_process?n("div",{staticClass:"p-2 border-t"},[n("span",{staticClass:"text-blue-500"},[e._v(" Travail en cours .........")])]):e._e()])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})},430:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(25),{props:["pans","pans_id"],watch:{ann_model_search:function(a){a&&this.getAnn()}},data:function(){return{view_list_panel:!1,no_location:!1,loc:{},ann_selected:null,ann_model_search:"",in_select_ann:!1,panel_post:[],ann:[],in_process:!1}},methods:{init:function(){},check_in_location:function(){for(var i=0;i<this.pans.length;i++)if(-1!=this.pans_id.indexOf(this.pans[i].pan_id)&&"3"!=this.pans[i].pan_state){this.no_location=!0;break}},getAnn:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur/like/".concat(e.ann_model_search));case 3:(n=t.sent).status?e.ann=n.anns:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validateLocMultiple:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ann_selected){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$axios.$put("api/a/ad/panel/location/multiple",{pans:e.panel_post,pans_id:e.pans_id,loc:e.loc,ann:e.ann_selected});case 5:(n=t.sent).status?e.$emit("validate"):e.showNotif("Erreur",n.message,!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},mounted:function(){this.check_in_location()}}),r=n(7),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center top-0 left-0 fixed w-screen h-screen bg-white bg-opacity-75"},[n("div",{staticClass:"bg-white rounded-lg border shadow-lg ",style:{width:"500px"}},[n("div",{staticClass:"p-2 flex border-b items-center"},[n("span",[e._v(" Modification multiple de "),n("strong",[e._v(" "+e._s(e.pans_id.length)+" ")]),e._v(" panneaux pour un annonceur ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm",on:{click:function(t){return e.$emit("close")}}},[e._v(" Retour ")])]),e._v(" "),e.no_location?n("div",{staticClass:"p-2 flex items-center border-b rounded-b-lg bg-red-500 bg-opacity-10"},[n("span",{staticClass:"text-xs text-red-500"},[e._v(" Certains des panneaux sélectionnés ne sont pas des panneaux en location. ")])]):n("div",{staticClass:"flex flex-wrap items-end p-2 text-xs "},[n("custom-input",{staticClass:"m-2",attrs:{type:"date",label:"Date de début"},model:{value:e.loc.date_debut,callback:function(t){e.$set(e.loc,"date_debut",t)},expression:"loc.date_debut"}}),e._v(" "),n("custom-input",{staticClass:"m-2",attrs:{type:"number",label:"Nombre de mois ..."},model:{value:e.loc.month,callback:function(t){e.$set(e.loc,"month",t)},expression:"loc.month"}}),e._v(" "),n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-xs text-indigo-600 font-bold"},[e._v(" Annonceur ")]),e._v(" "),n("span",{staticClass:"p-2 rounded-lg border cursor-pointer",on:{click:function(){e.in_select_ann=!0}}},[e._v(" "+e._s(e.ann_selected?e.ann_selected.ann_label:"-")+" ")]),e._v(" "),e.in_select_ann?n("div",{staticClass:"z-50 w-screen h-screen absolute top-0 left-0 flex justify-center items-center ",on:{click:function(t){e.in_select_ann=!1}}},[n("div",{staticClass:"shadow-lg bg-white rounded-lg border",staticStyle:{width:"250px"},on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"p-1 border-b"},[n("custom-input",{attrs:{label:"Nom de l'annonceur ..."},model:{value:e.ann_model_search,callback:function(t){e.ann_model_search=t},expression:"ann_model_search"}})],1),e._v(" "),n("div",{staticClass:"flex flex-col overflow-auto",staticStyle:{"max-height":"200px",height:"200px"}},e._l(e.ann,(function(a){return n("span",{key:a.ann_id,staticClass:"p-2 border-b cursor-pointer hover:bg-gray-100",on:{click:function(){e.ann_selected=a,e.in_select_ann=!1}}},[e._v(" \n                                "+e._s(a.ann_label)+"\n                            ")])})),0)])]):e._e()])],1),e._v(" "),e.no_location||e.in_process?e._e():n("div",{staticClass:"flex p-2 border-t"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt text-xs",on:{click:e.validateLocMultiple}},[e._v("Valider")])]),e._v(" "),e.in_process?n("div",{staticClass:"text-xs text-blue-500 p-2"},[n("span",[e._v("En cours de traitement ")])]):e._e()])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})},431:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(25),{props:["pans","pans_id"],watch:{ann_model_search:function(a){a&&this.getAnn()}},data:function(){return{in_process:!1,ann_selected:{},ann:[],in_select_ann:!1,ann_model_search:""}},methods:{init:function(){},getAnn:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("api/a/annonceur/like/".concat(e.ann_model_search));case 3:(n=t.sent).status?e.ann=n.anns:e.showNotif("Erreur",n.message,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorConnexion();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validateProps:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.in_process=!0,t.prev=1,t.next=4,e.$axios.$post("api/a/props/ann",{ann:e.ann_selected,pans_id:e.pans_id});case 4:(n=t.sent).status?(e.$emit("validate"),e.showNotif("Proposition","Les propositions sont envoyées aux annonceurs sélectionnés.")):e.showNotif("Erreur",n.message,!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.showErrorConnexion();case 11:e.in_process=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){}}),r=n(7),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center top-0 left-0 fixed w-screen h-screen bg-white bg-opacity-75"},[n("div",{staticClass:"bg-white rounded-lg border shadow-lg ",style:{width:"500px"}},[n("div",{staticClass:"p-2 flex border-b items-center"},[n("span",[e._v(" Proposer "),n("strong",[e._v(" "+e._s(e.pans_id.length)+" ")]),e._v(" panneaux à des annonceurs ")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt-back text-sm",on:{click:function(t){return e.$emit("close")}}},[e._v(" Retour ")])]),e._v(" "),n("div",{staticClass:"flex-col items-end p-2 text-xs "},[n("div",{staticClass:"flex flex-col p-2"},[n("span",{staticClass:"text-xs text-indigo-600 font-bold"},[e._v(" Annonceur ")]),e._v(" "),n("span",{staticClass:"p-2 rounded-lg border cursor-pointer",on:{click:function(){e.in_select_ann=!0}}},[e._v(" "+e._s(e.ann_selected.ann_id?e.ann_selected.ann_label:"-")+" ")]),e._v(" "),e.in_select_ann?n("div",{staticClass:"z-50 w-screen h-screen absolute top-0 left-0 flex justify-center items-center ",on:{click:function(t){e.in_select_ann=!1}}},[n("div",{staticClass:"shadow-lg bg-white rounded-lg border",staticStyle:{width:"250px"},on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"p-1 border-b"},[n("custom-input",{attrs:{label:"Nom de l'annonceur ..."},model:{value:e.ann_model_search,callback:function(t){e.ann_model_search=t},expression:"ann_model_search"}})],1),e._v(" "),n("div",{staticClass:"flex flex-col overflow-auto",staticStyle:{"max-height":"200px",height:"200px"}},e._l(e.ann,(function(a){return n("span",{key:a.ann_id,staticClass:"p-2 border-b cursor-pointer hover:bg-gray-100",on:{click:function(){e.ann_selected=a,e.in_select_ann=!1}}},[e._v(" \n                                "+e._s(a.ann_label)+"\n                            ")])})),0)])]):e._e()])]),e._v(" "),!e.in_process&&e.ann_selected?n("div",{staticClass:"flex p-2 border-t"},[n("span",{staticClass:"flex-grow"}),e._v(" "),n("button",{staticClass:"bt text-xs",on:{click:e.validateProps}},[e._v("Valider")])]):e._e(),e._v(" "),e.in_process?n("div",{staticClass:"text-xs text-blue-500 p-2"},[n("span",[e._v("En cours de traitement ")])]):e._e()])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomInput:n(358).default})},563:function(e,t,n){"use strict";n.r(t);n(49),n(38),n(47),n(13),n(65),n(40),n(66);var l,o=n(3),r=n(20);n(25),n(21),n(63),n(156),n(229),n(82),n(230);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _={mixins:[n(395).a],props:["carte"],watch:{input_search:function(a){this.first_load||(this.createFilters(),this.searchWithFilters())},state_search:function(a){this.first_load||(this.createFilters(),this.searchWithFilters())},validate_search:function(a){this.first_load||(this.createFilters(),this.searchWithFilters())},col_search:function(a){this.first_load||(this.createFilters(),this.searchWithFilters())},"filters.page":function(a){if(!this.first_load){if(this.$route.query.page!=a){var e=d(d({},this.$route.query),{},{page:a});this.$router.replace({query:e})}this.launchSearch()}},carte:function(a){this.show_carte=a},view_all:function(a){this.filters.limit=a?1e3:150,this.launchSearch()},list_pan_selected:function(a){console.log(a)}},data:function(){return{nb_panel:0,pan_selected_index_list:[],show_validate:-1,show_state:-1,label_state_list:[{label:"Tous",code:null},{label:"Dispo",code:1},{label:"En réservation",code:2},{label:"En Location",code:3},{label:"Indisponible",code:4}],label_validate_list:[{label:"Tous",code:null},{label:"Validé",code:1},{label:"Pas validé",code:0}],label_list:[{label:"Réf Régisseur",key:"pan_ref"},{label:"Réf publoc",key:"pan_publoc_ref"},{label:"Surface",key:"pan_surface"},{label:"Régisseur",key:"reg_label"},{label:"Annonceur",key:"ann_label"},{label:"Ville",key:"lieu_ville"},{label:"Disponibilité",key:"pan_state"},{label:"Photos",key:"image_id"},{label:"User",key:"user"}],col_search:"pan_ref",state_search:null,validate_search:null,list_col_search:[{label:"Réf Regisseur",code:"pan_ref"},{label:"Réf Publoc",code:"pan_publoc_ref"},{label:"Ville",code:"lieu_ville"},{label:"Quartier",code:"lieu_quartier"},{label:"Région",code:"lieu_region"},{label:"Annonceur",code:"ann_label"},{label:"Régisseur",code:"reg_label"}],input_search:"",dialog:{show:!1,title:"Titre",content:"Contenu",type:"default",show_bt:!0},page_list:[],m_style:{},first_load:!1,cur_pan_clicked:null,cur_pan:{},in_modif_state:!1,show_carte:!0,loaded:!1,view_all:!1,list_pan_selected:[],select_all:!1,setLocationMultiple:!1,show_export_pdf:!1,show_modif_loc:!1,show_props_ann:!1,inAssignAgent:!1}},methods:(l={validatePan:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,confirm("Valider les panneax séléctionnés ?")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$axios.$put("api/a/ad/panel/validate",{pans_id:e.list_pan_selected});case 5:(n=t.sent).status?(e.launchSearch(),e.showNotif("Validation ","Validation des panneaux avec succès")):e.showNotif("Erreur",n.message,!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.showErrorConnexion();case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},countPanel:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("api/a/panel/count").then((function(e){return e}));case 2:(n=t.sent).status?e.nb_panel=n.nb:alert(n.message);case 4:case"end":return t.stop()}}),t)})))()},addSpliceSelected:function(i){var e=this.pan_selected_index_list.indexOf(i);-1==e?this.pan_selected_index_list.push(i):this.pan_selected_index_list.splice(e,1)},toggleCheck:function(){},showDelPanel:function(){var e='<div class=""> <span>Nombre de Panneaux qui seront Supprimés</span> <span class="font-bold">('+this.pan_selected_index_list.length+")</span> </div>";e+="<span class='text-red-500 font-bold'>Action irreversible.</span> ",e+='<span class="whitespace-pre-wrap font-bold text-indigo-600">Voulez-vous continuer ? </span>',this.showDialog("Suppression de Panneau",e,"del-panel")},showDialog:function(e,t,n){this.dialog.show=!0,this.dialog.title=e,this.dialog.content=t,this.dialog.type=n},resDialog:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"no"==e.res?t.dialog.show=!1:"del-panel"==e.state&&(t.dialog.show_bt=!1,t.dialog.content="<span class=''>Fonction en cours de développement. Supprimer le panneau dans le details panneau.</span>");case 1:case"end":return n.stop()}}),n)})))()},delPanel:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,i,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],i=0;i<e.pan_selected_index_list.length;i++)l=e.panel.list[e.pan_selected_index_list[i]],n.push(l.pr_id);return t.abrupt("return",e.$axios.$delete("api/a/panel",{data:n}));case 3:case"end":return t.stop()}}),t)})))()},viewPanel:function(i){this.$router.push({name:"admin-panneau-id",params:{id:i}})},match_search:function(e){if(""==this.col_search)return!0;if(null==e[this.col_search])return!1;if(null!=this.input_search&&""!=this.input_search){var t=new RegExp(".?"+this.input_search+".?","gi");return null!=e[this.col_search].match(t)}return!0},checkValidate:function(p){return-1==this.show_validate||p.pan_validation==this.show_validate},checkState:function(p){return-1==this.show_state||p.pan_state==this.show_state},selectAll:function(){var e=this.panel.list.length;this.pan_selected_index_list=[];for(var i=0;i<e;i++)this.pan_selected_index_list.push(i)},deselectAll:function(){this.pan_selected_index_list=[]}},Object(r.a)(l,"toggleCheck",(function(e){this.pan_selected_index_list.length>0?this.deselectAll():this.selectAll()})),Object(r.a)(l,"init",(function(){var e=window.innerWidth-this.$store.state.dim.w_side_left;this.m_style={width:e+"px",maxWidth:e+"px"}})),Object(r.a)(l,"editPanel",(function(){})),Object(r.a)(l,"createFilters",(function(){this.filters.filter_by=this.col_search,this.filters.state=this.state_search,this.filters.validation=this.validate_search,this.filters.input=this.input_search})),Object(r.a)(l,"searchWithFilters",(function(){this.getListPanneau()})),Object(r.a)(l,"launchSearch",(function(){this.createFilters(),this.searchWithFilters(),this.first_load=!1})),Object(r.a)(l,"init_parameters",(function(){this.first_load=!0,console.log("Detection des querys ..."),this.$route.query.page&&(this.filters.page=this.$route.query.page),console.log("Lancement de la recherche ..."),this.launchSearch(),console.log("Etat First Load : ",this.first_load)})),l),created:function(){var e=this;this.countPanel(),this.init(),window.addEventListener("resize",(function(){e.init()}))},mounted:function(){this.launchSearch(),this.show_carte=this.carte}},f=n(7),component=Object(f.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-5 text-xs relative"},[n("div",{staticClass:"flex flex-col p-2"},[n("div",{staticClass:"border bg-white h-16 px-2 flex items-center rounded-lg mb-2 sticky top-0 text-xs"},[n("div",{staticClass:"flex items-end "},[n("c-select",{attrs:{datas:e.tabNbPage,label:"label",code:"code",placeholder:"Page"},model:{value:e.filters.page,callback:function(t){e.$set(e.filters,"page",t)},expression:"filters.page"}}),e._v(" "),n("div",{staticClass:"ml-2 border p-2 rounded-lg"},[n("span",{staticClass:"text-sm"},[n("strong",[e._v(" "+e._s(e.filters.limit*(e.filters.page-1)+1)+" - "+e._s(e.filters.limit*e.filters.page>e.nbPanel?e.nbPanel:e.filters.limit*e.filters.page)+" ")]),e._v(" sur "),n("strong",[e._v(" "+e._s(e.nbPanel)+" ")])])]),e._v(" "),n("div",{staticClass:"border flex items-center mx-2 rounded p-2",class:{"border-blue-500":e.view_all}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.view_all,expression:"view_all"}],attrs:{type:"checkbox",id:"view_all"},domProps:{checked:Array.isArray(e.view_all)?e._i(e.view_all,null)>-1:e.view_all},on:{change:function(t){var n=e.view_all,l=t.target,o=!!l.checked;if(Array.isArray(n)){var r=e._i(n,null);l.checked?r<0&&(e.view_all=n.concat([null])):r>-1&&(e.view_all=n.slice(0,r).concat(n.slice(r+1)))}else e.view_all=o}}}),e._v(" "),n("label",{staticClass:"mx-2",attrs:{for:"view_all"}},[e._v(" Tout afficher ")])]),e._v(" "),n("div",{},[n("button",{staticClass:"rounded-full w-10 h-10 items-center justify-center flex border ",on:{click:function(t){return e.launchSearch()}}},[n("span",{staticClass:"material-icons"},[e._v(" refresh ")])])])],1),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("div",{staticClass:"flex items-end"},[n("custom-input",{staticClass:"mr-1",attrs:{label:"Rechercher"},model:{value:e.input_search,callback:function(t){e.input_search=t},expression:"input_search"}}),e._v(" "),n("c-select",{staticClass:"mr-1",attrs:{label:"label",code:"code",placeholder:"Par",datas:e.list_col_search},model:{value:e.col_search,callback:function(t){e.col_search=t},expression:"col_search"}}),e._v(" "),n("c-select",{staticClass:"mr-1",attrs:{label:"label",code:"code",placeholder:"Validation",datas:e.label_validate_list},model:{value:e.validate_search,callback:function(t){e.validate_search=t},expression:"validate_search"}}),e._v(" "),n("c-select",{staticClass:"mr-1",attrs:{label:"label",code:"code",placeholder:"Etat",datas:e.label_state_list},model:{value:e.state_search,callback:function(t){e.state_search=t},expression:"state_search"}})],1)]),e._v(" "),e.show_carte?n("div",{},[n("client-only",[e.loaded?n("map-accueil",{attrs:{list_coord:e.panel.list,load_data:e.loaded}}):e._e()],1)],1):n("div",{staticClass:"border rounded-lg p-2"},[n("table",{staticClass:"w-full text-left table-auto "},[n("thead",{staticClass:"rounded-t"},[n("tr",{staticClass:"bg-gray-50 text-gray-700 sticky top-16"},[n("th",{staticClass:"p-2"},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.list_pan_selected.length>0},on:{click:function(){if(e.list_pan_selected.length>0)e.list_pan_selected=[];else for(var i=0;i<e.panel.list.length;i++)e.list_pan_selected.push(e.panel.list[i].pan_id)}}})]),e._v(" "),e._l(e.label_list,(function(t){return n("th",{key:t.key,staticClass:"p-2"},[e._v(" "+e._s(t.label)+" ")])}))],2)]),e._v(" "),n("tbody",e._l(e.panel.list,(function(p){return n("tr",{key:p.pan_id,staticClass:"border-b",class:{"bg-blue-100":e.cur_pan_clicked==p.pan_id,"bg-opacity-10 bg-blue-500 border-b-0 border-l-2 border-blue-500":-1!=e.list_pan_selected.indexOf(p.pan_id)},on:{click:function(t){e.cur_pan_clicked=p.pan_id},mousedown:function(t){e.cur_pan_clicked=p.pan_id}}},[n("td",{staticClass:"p-2"},[n("input",{attrs:{type:"checkbox"},domProps:{checked:-1!=e.list_pan_selected.indexOf(p.pan_id)},on:{click:function(){var t=e.list_pan_selected.indexOf(p.pan_id);-1!=t?e.list_pan_selected.splice(t,1):e.list_pan_selected.push(p.pan_id)}}})]),e._v(" "),e._l(e.label_list,(function(t){return n("td",{key:t.key,staticClass:"p-2 "},["pan_ref"==t.key?n("nuxt-link",{staticClass:"flex items-center hover:underline",attrs:{to:"/admin/panneau/"+p.pan_id}},[n("span",{staticClass:"text-sm material-icons mr-1"},[e._v(" link ")]),e._v(" "),n("span",{staticClass:"mr-1"},[e._v(e._s(p.pan_ref))]),e._v(" "),p.pan_validation?n("span",{staticClass:"text-sm material-icons  text-blue-500"},[e._v(" check_circle ")]):e._e()]):"pan_state"==t.key?n("div",{},[1==p.pan_state||2==p.pan_state?n("div",{staticClass:"flex items-center"},[n("span",{staticClass:"mr-2"},[e._v("Dispo")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("span",{staticClass:"block rounded-full w-3 h-3 cursor-pointer bg-green-600",on:{click:function(){e.cur_pan=p,e.in_modif_state=!0}}})]):3==p.pan_state?n("div",{staticClass:"flex items-center"},[n("span",{staticClass:"mr-2"},[e._v("En location")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("span",{staticClass:"block rounded-full w-3 h-3 cursor-pointer bg-blue-600",on:{click:function(){e.cur_pan=p,e.in_modif_state=!0}}})]):4==p.pan_state?n("div",{staticClass:"flex items-center"},[n("span",{staticClass:"mr-2"},[e._v("Indispo")]),e._v(" "),n("span",{staticClass:"flex-grow"}),e._v(" "),n("span",{staticClass:"block rounded-full cursor-pointer w-3 h-3 bg-red-600",on:{click:function(){e.cur_pan=p,e.in_modif_state=!0}}})]):e._e()]):"image_id"==t.key?n("div",{staticClass:"flex  flex-col text-xs"},[p.pan_list_photo?n("span",[e._v(" -  "),n("strong",[e._v(" "+e._s(p.pan_list_photo?p.pan_list_photo.split(",").length:0)+" ")]),e._v(" photos dispo ")]):e._e(),e._v(" "),p.pan_list_photo_pose?n("span",[e._v(" -  "),n("strong",[e._v(" "+e._s(p.pan_list_photo_pose?p.pan_list_photo_pose.split(",").length:0)+" ")]),e._v(" photos pose ")]):e._e(),e._v(" "),p.pan_list_photo_solarpro?n("span",[e._v(" -  "),n("strong",[e._v(" "+e._s(p.pan_list_photo_solarpro?p.pan_list_photo_solarpro.split(",").length:0)+" ")]),e._v(" photos solarpro ")]):e._e()]):"user"==t.key?n("div",[n("span",[e._v("  "+e._s(p.pan_pr_id?p.pr_login:"-")+" ")])]):n("span",[e._v(" "+e._s(p[t.key])+"  ")])],1)}))],2)})),0)])]),e._v(" "),e.list_pan_selected.length>0?n("div",{staticClass:"sticky bottom-0 p-2 flex justify-center items-center"},[n("div",{staticClass:"border flex p-2 bg-white items-center shadow-lg rounded-lg"},[n("span",{staticClass:"mr-2"},[e._v(" Total sélection :  ")]),e._v(" "),n("span",{staticClass:"mr-2"},[e._v(" "+e._s(e.list_pan_selected.length)+" ")]),e._v(" "),n("button",{staticClass:"bt text-xs mr-2",on:{click:function(){e.list_pan_selected=[]}}},[e._v("\n\t\t\t\t\t\tTout déselectionner\n\t\t\t\t\t")]),e._v(" "),n("menu-point",{staticClass:"relative",staticStyle:{"z-index":"1050"},attrs:{is_top:!0}},[n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){e.inAssignAgent=!0}}},[n("span",{staticClass:"material-icons text-sm"},[e._v("badge")]),e._v(" "),n("span",{staticClass:"ml-2"},[e._v("Assigner à un agent")])]),e._v(" "),n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){e.setLocationMultiple=!0}}},[n("span",{staticClass:"material-icons text-sm"},[e._v("dataset")]),e._v(" "),n("span",{staticClass:"ml-2"},[e._v("Assigner à un annonceur")])]),e._v(" "),n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){e.show_export_pdf=!0}}},[n("span",{staticClass:"material-icons text-sm"},[e._v("picture_as_pdf")]),e._v(" "),n("span",{staticClass:"ml-2"},[e._v("Exporter en PDF")])]),e._v(" "),n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){e.show_modif_loc=!0}}},[n("span",{staticClass:"material-icons text-sm"},[e._v("edit")]),e._v(" "),n("span",{staticClass:"ml-2"},[e._v("Modifier la location")])]),e._v(" "),n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){e.show_props_ann=!0}}},[n("span",{staticClass:"material-icons text-sm"},[e._v("assignment")]),e._v(" "),n("span",{staticClass:"ml-2"},[e._v("Proposer à des annonceurs")])]),e._v(" "),n("div",{staticClass:"flex p-2 w-full cursor-pointer px-2 hover:bg-gray-100",on:{click:function(){e.validatePan()}}},[n("span",{staticClass:"material-icons text-sm"},[e._v("check_circle")]),e._v(" "),n("span",{staticClass:"ml-2"},[e._v("Valider")])])])],1)]):e._e()]),e._v(" "),e.inAssignAgent?n("assign-pan-agent",{attrs:{pans_id:e.list_pan_selected,pans:e.panel.list},on:{close:function(){e.inAssignAgent=!1},validate:function(){e.launchSearch(),e.inAssignAgent=!1}}}):e._e(),e._v(" "),e.in_modif_state?n("change-state-pan",{attrs:{pan:e.cur_pan},on:{change_state:function(){e.launchSearch()},close:function(t){e.in_modif_state=!1}}}):e._e(),e._v(" "),e.setLocationMultiple?n("location-multiple-pan",{attrs:{pans_id:e.list_pan_selected,pans:e.panel.list},on:{close:function(){e.setLocationMultiple=!1},validate:function(){e.launchSearch(),e.setLocationMultiple=!1}}}):e._e(),e._v(" "),e.show_export_pdf?n("export-pdf",{attrs:{pans_id:e.list_pan_selected},on:{close:function(){e.show_export_pdf=!1}}}):e._e(),e._v(" "),e.show_modif_loc?n("modif-location",{attrs:{pans_id:e.list_pan_selected,pans:e.panel.list},on:{close:function(){e.show_modif_loc=!1},validate:function(){e.launchSearch(),e.show_modif_loc=!1}}}):e._e(),e._v(" "),e.show_props_ann?n("props-ann",{attrs:{pans_id:e.list_pan_selected,pans:e.panel.list},on:{close:function(t){e.show_props_ann=!1},validate:function(){e.show_props_ann=!1}}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CSelect:n(362).default,CustomInput:n(358).default,MapAccueil:n(370).default,MenuPoint:n(382).default,AssignPanAgent:n(426).default,ChangeStatePan:n(427).default,LocationMultiplePan:n(428).default,ExportPdf:n(429).default,ModifLocation:n(430).default,PropsAnn:n(431).default})}}]);